(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1536:(e,o,d)=>{"use strict";d.r(o),d.d(o,{default:()=>w});var t=d(5155),s=d(2115),i=d(6489),n=d(2539);d(682);var r=d(5959),l=d(6122);let a=[{id:"1",type:"input",data:{label:"Input Node"},position:{x:250,y:25}},{id:"2",data:{label:"Default Node"},position:{x:100,y:125}},{id:"3",type:"output",data:{label:"Output Node"},position:{x:250,y:250}}],p=[{id:"e1-2",source:"1",target:"2"},{id:"e2-3",source:"2",target:"3"}],c=(0,r.v)((e,o)=>({nodes:a,edges:p,selectedNodes:[],selectedEdges:[],setNodes:o=>e({nodes:o}),onNodesChange:d=>{e({nodes:(0,n._0)(d,o().nodes)})},addNode:d=>{e({nodes:[...o().nodes,d]})},updateNode:(d,t)=>{e({nodes:o().nodes.map(e=>e.id===d?{...e,...t}:e)})},deleteNode:d=>{let{nodes:t,edges:s}=o();e({nodes:t.filter(e=>e.id!==d),edges:s.filter(e=>e.source!==d&&e.target!==d)})},setEdges:o=>e({edges:o}),onEdgesChange:d=>{e({edges:(0,n.zW)(d,o().edges)})},onConnect:d=>{e({edges:(0,l.rN)(d,o().edges)})},addEdgeConnection:d=>{e({edges:[...o().edges,d]})},deleteEdge:d=>{e({edges:o().edges.filter(e=>e.id!==d)})},setSelectedNodes:o=>e({selectedNodes:o}),setSelectedEdges:o=>e({selectedEdges:o}),clearFlow:()=>{e({nodes:[],edges:[],selectedNodes:[],selectedEdges:[]})},resetFlow:()=>{e({nodes:a,edges:p,selectedNodes:[],selectedEdges:[]})}})),x=()=>c(e=>e.nodes),u=()=>c(e=>e.edges),g={},h={},f={x:0,y:0,zoom:1},b=()=>{let{data:e}=(0,i.useSession)(),[o,d]=(0,s.useState)(!1),[r,l]=(0,s.useState)(""),a=x(),p=u(),b=c(e=>e.onNodesChange),j=c(e=>e.onEdgesChange),y=c(e=>e.onConnect),w=c(e=>e.addNode),v=c(e=>e.clearFlow),m=c(e=>e.resetFlow),k=(0,s.useCallback)(()=>{w({id:`node-${Date.now()}`,type:"default",data:{label:`New Node ${a.length+1}`},position:{x:400*Math.random(),y:400*Math.random()}})},[w,a.length]),S=(0,s.useCallback)(e=>{b(e)},[b]),C=(0,s.useCallback)(e=>{j(e)},[j]),N=(0,s.useCallback)(e=>{y(e)},[y]),z=(0,s.useCallback)(async()=>{if(!e?.user)return void l("Please sign in to save flows");d(!0),l("");try{let e=`Flow ${new Date().toLocaleString()}`,o=await fetch("/api/flows",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,content:{nodes:a,edges:p}})});if(!o.ok)throw Error("Failed to save flow");let d=await o.json();l(`✅ Flow saved successfully: ${d.name}`),setTimeout(()=>l(""),3e3)}catch(e){console.error("Error saving flow:",e),l("❌ Failed to save flow"),setTimeout(()=>l(""),3e3)}finally{d(!1)}},[e,a,p]),E=(0,s.useCallback)(async()=>{if(!e?.user)return void l("Please sign in to load flows");d(!0),l("");try{let e=await fetch("/api/flows");if(!e.ok)throw Error("Failed to load flows");let o=await e.json();if(0===o.length){l("No saved flows found"),setTimeout(()=>l(""),3e3);return}let d=o[0],t=d.content;c.getState().setNodes(t.nodes||[]),c.getState().setEdges(t.edges||[]),l(`✅ Loaded flow: ${d.name}`),setTimeout(()=>l(""),3e3)}catch(e){console.error("Error loading flows:",e),l("❌ Failed to load flows"),setTimeout(()=>l(""),3e3)}finally{d(!1)}},[e]);return(0,t.jsx)("div",{style:{width:"100%",height:"100vh"},children:(0,t.jsxs)(n.Gc,{nodes:a,edges:p,onNodesChange:S,onEdgesChange:C,onConnect:N,nodeTypes:g,edgeTypes:h,defaultViewport:f,minZoom:.2,maxZoom:4,attributionPosition:"bottom-left",children:[(0,t.jsx)(n.VS,{variant:n._5.Dots,gap:20,size:1}),(0,t.jsx)(n.H2,{}),(0,t.jsx)(n.of,{zoomable:!0,pannable:!0,nodeStrokeWidth:3,nodeColor:e=>{switch(e.type){case"input":return"#00ff00";case"output":return"#ff0000";default:return"#1a192b"}}}),(0,t.jsx)(n.Zk,{position:"top-left",children:(0,t.jsx)("div",{style:{background:"white",padding:"12px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",minWidth:"200px"},children:e?.user?(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:"12px",color:"#666",marginBottom:"8px"},children:"Signed in as:"}),(0,t.jsx)("div",{style:{fontSize:"14px",fontWeight:"bold",marginBottom:"8px"},children:e.user.name||e.user.email}),(0,t.jsx)("button",{onClick:()=>(0,i.signOut)(),style:{padding:"4px 8px",border:"1px solid #ddd",borderRadius:"4px",background:"#f5f5f5",cursor:"pointer",fontSize:"12px"},children:"Sign Out"})]}):(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:"12px",color:"#666",marginBottom:"8px"},children:"Sign in to save your flows"}),(0,t.jsx)("button",{onClick:()=>(0,i.signIn)("github"),style:{padding:"8px 12px",border:"1px solid #333",borderRadius:"4px",background:"#333",color:"white",cursor:"pointer",fontSize:"12px"},children:"Sign in with GitHub"})]})})}),(0,t.jsx)(n.Zk,{position:"top-right",children:(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",background:"white",padding:"12px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,t.jsx)("h3",{style:{margin:"0 0 8px 0",fontSize:"14px"},children:"Flow Controls"}),(0,t.jsxs)("div",{style:{display:"flex",gap:"4px"},children:[(0,t.jsx)("button",{onClick:z,disabled:!e?.user||o,style:{padding:"6px 12px",border:"1px solid #22c55e",borderRadius:"4px",background:e?.user?"#22c55e":"#e5e5e5",color:e?.user?"white":"#999",cursor:e?.user&&!o?"pointer":"not-allowed",fontSize:"12px",flex:1},children:o?"...":"\uD83D\uDCBE Save"}),(0,t.jsx)("button",{onClick:E,disabled:!e?.user||o,style:{padding:"6px 12px",border:"1px solid #3b82f6",borderRadius:"4px",background:e?.user?"#3b82f6":"#e5e5e5",color:e?.user?"white":"#999",cursor:e?.user&&!o?"pointer":"not-allowed",fontSize:"12px",flex:1},children:o?"...":"\uD83D\uDCC2 Load"})]}),r&&(0,t.jsx)("div",{style:{fontSize:"11px",padding:"4px 8px",borderRadius:"4px",background:r.includes("✅")?"#d1fae5":"#fee2e2",color:r.includes("✅")?"#166534":"#dc2626",textAlign:"center"},children:r}),(0,t.jsx)("button",{onClick:k,style:{padding:"6px 12px",border:"1px solid #ddd",borderRadius:"4px",background:"#fff",cursor:"pointer"},children:"Add Node"}),(0,t.jsx)("button",{onClick:v,style:{padding:"6px 12px",border:"1px solid #ddd",borderRadius:"4px",background:"#fff",cursor:"pointer"},children:"Clear All"}),(0,t.jsx)("button",{onClick:m,style:{padding:"6px 12px",border:"1px solid #ddd",borderRadius:"4px",background:"#fff",cursor:"pointer"},children:"Reset Flow"}),(0,t.jsxs)("div",{style:{fontSize:"12px",color:"#666",marginTop:"8px",padding:"8px",background:"#f9f9f9",borderRadius:"4px"},children:[(0,t.jsxs)("div",{children:["Nodes: ",a.length]}),(0,t.jsxs)("div",{children:["Edges: ",p.length]}),(0,t.jsx)("div",{style:{marginTop:"4px",fontWeight:"bold"},children:"✅ Zustand + Auth"}),(0,t.jsx)("div",{style:{fontSize:"10px",marginTop:"2px"},children:"Persistent flows with authentication"})]})]})})]})})},j=()=>(0,t.jsx)(n.Ln,{children:(0,t.jsx)(b,{})}),y=()=>{let e=x(),o=u();return(0,t.jsxs)("div",{style:{width:"100vw",height:"100vh",position:"relative"},children:[(0,t.jsxs)("div",{style:{position:"absolute",top:0,left:0,right:0,zIndex:1e3,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderBottom:"1px solid #e0e0e0",padding:"12px 20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{style:{margin:0,fontSize:"24px",fontWeight:600,color:"#1a192b"},children:"Gemini Flow - React Flow Canvas"}),(0,t.jsx)("p",{style:{margin:"4px 0 0 0",fontSize:"14px",color:"#666"},children:"Powered by Zustand + NextAuth.js for optimal performance & persistence"})]}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px",fontSize:"14px"},children:[(0,t.jsxs)("div",{style:{background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"6px",padding:"8px 12px",color:"#0369a1"},children:[(0,t.jsx)("strong",{children:"Performance Mode:"})," Zustand + Next.js"]}),(0,t.jsxs)("div",{style:{background:"#f0fdf4",border:"1px solid #22c55e",borderRadius:"6px",padding:"8px 12px",color:"#166534"},children:["Nodes: ",e.length," | Edges: ",o.length]})]})]}),(0,t.jsx)("div",{style:{paddingTop:"80px",height:"100vh"},children:(0,t.jsx)(j,{})}),(0,t.jsxs)("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderTop:"1px solid #e0e0e0",padding:"8px 20px",fontSize:"12px",color:"#666",display:"flex",justifyContent:"space-between",alignItems:"center",zIndex:1e3},children:[(0,t.jsxs)("div",{children:["✅ ",(0,t.jsx)("strong",{children:"Architecture:"}),"Next.js + Zustand state management + NextAuth.js authentication"]}),(0,t.jsxs)("div",{children:["\uD83D\uDCCA ",(0,t.jsx)("strong",{children:"Features:"}),"User Authentication • Flow Persistence • Selective re-rendering"]})]})]})};function w(){return(0,t.jsx)(i.SessionProvider,{children:(0,t.jsx)(y,{})})}},2251:(e,o,d)=>{Promise.resolve().then(d.bind(d,1536))}},e=>{e.O(0,[714,862,925,441,255,358],()=>e(e.s=2251)),_N_E=e.O()}]);