(()=>{var a={};a.id=974,a.ids=[974],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},2958:(a,b,c)=>{"use strict";var d=c(38301),e=c(99088),f="function"==typeof Object.is?Object.is:function(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b},g=e.useSyncExternalStore,h=d.useRef,i=d.useEffect,j=d.useMemo,k=d.useDebugValue;b.useSyncExternalStoreWithSelector=function(a,b,c,d,e){var l=h(null);if(null===l.current){var m={hasValue:!1,value:null};l.current=m}else m=l.current;var n=g(a,(l=j(function(){function a(a){if(!i){if(i=!0,g=a,a=d(a),void 0!==e&&m.hasValue){var b=m.value;if(e(b,a))return h=b}return h=a}if(b=h,f(g,a))return b;var c=d(a);return void 0!==e&&e(b,c)?(g=a,b):(g=a,h=c)}var g,h,i=!1,j=void 0===c?null:c;return[function(){return a(b())},null===j?void 0:function(){return a(j())}]},[b,c,d,e]))[0],l[1]);return i(function(){m.hasValue=!0,m.value=n},[n]),k(n),n}},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3378:a=>{a.exports=function(a){var b=Object(a),c=[];for(var d in b)c.unshift(d);return function a(){for(;c.length;)if((d=c.pop())in b)return a.value=d,a.done=!1,a;return a.done=!0,a}},a.exports.__esModule=!0,a.exports.default=a.exports},4197:a=>{function b(c,d){return a.exports=b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){return a.__proto__=b,a},a.exports.__esModule=!0,a.exports.default=a.exports,b(c,d)}a.exports=b,a.exports.__esModule=!0,a.exports.default=a.exports},6246:a=>{a.exports=function(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")},a.exports.__esModule=!0,a.exports.default=a.exports},7346:(a,b,c)=>{var d=c(14517);function e(){var b,c,f="function"==typeof Symbol?Symbol:{},g=f.iterator||"@@iterator",h=f.toStringTag||"@@toStringTag";function i(a,e,f,g){var h=Object.create((e&&e.prototype instanceof k?e:k).prototype);return d(h,"_invoke",function(a,d,e){var f,g,h,i=0,k=e||[],l=!1,m={p:0,n:0,v:b,a:n,f:n.bind(b,4),d:function(a,c){return f=a,g=0,h=b,m.n=c,j}};function n(a,d){for(g=a,h=d,c=0;!l&&i&&!e&&c<k.length;c++){var e,f=k[c],n=m.p,o=f[2];a>3?(e=o===d)&&(h=f[(g=f[4])?5:(g=3,3)],f[4]=f[5]=b):f[0]<=n&&((e=a<2&&n<f[1])?(g=0,m.v=d,m.n=f[1]):n<o&&(e=a<3||f[0]>d||d>o)&&(f[4]=a,f[5]=d,m.n=o,g=0))}if(e||a>1)return j;throw l=!0,d}return function(e,k,o){if(i>1)throw TypeError("Generator is already running");for(l&&1===k&&n(k,o),g=k,h=o;(c=g<2?b:h)||!l;){f||(g?g<3?(g>1&&(m.n=-1),n(g,h)):m.n=h:m.v=h);try{if(i=2,f){if(g||(e="next"),c=f[e]){if(!(c=c.call(f,h)))throw TypeError("iterator result is not an object");if(!c.done)return c;h=c.value,g<2&&(g=0)}else 1===g&&(c=f.return)&&c.call(f),g<2&&(h=TypeError("The iterator does not provide a '"+e+"' method"),g=1);f=b}else if((c=(l=m.n<0)?h:a.call(d,m))!==j)break}catch(a){f=b,g=1,h=a}finally{i=1}}return{value:c,done:l}}}(a,f,g),!0),h}var j={};function k(){}function l(){}function m(){}c=Object.getPrototypeOf;var n=m.prototype=k.prototype=Object.create([][g]?c(c([][g]())):(d(c={},g,function(){return this}),c));function o(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,m):(a.__proto__=m,d(a,h,"GeneratorFunction")),a.prototype=Object.create(n),a}return l.prototype=m,d(n,"constructor",m),d(m,"constructor",l),l.displayName="GeneratorFunction",d(m,h,"GeneratorFunction"),d(n),d(n,h,"Generator"),d(n,g,function(){return this}),d(n,"toString",function(){return"[object Generator]"}),(a.exports=e=function(){return{w:i,m:o}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=e,a.exports.__esModule=!0,a.exports.default=a.exports},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11330:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81170,23)),Promise.resolve().then(c.t.bind(c,23597,23)),Promise.resolve().then(c.t.bind(c,36893,23)),Promise.resolve().then(c.t.bind(c,89748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,69576,23)),Promise.resolve().then(c.t.bind(c,73041,23)),Promise.resolve().then(c.t.bind(c,51384,23))},14517:a=>{function b(c,d,e,f){var g=Object.defineProperty;try{g({},"",{})}catch(a){g=0}a.exports=b=function(a,c,d,e){function f(c,d){b(a,c,function(a){return this._invoke(c,d,a)})}c?g?g(a,c,{value:d,enumerable:!e,configurable:!e,writable:!e}):a[c]=d:(f("next",0),f("throw",1),f("return",2))},a.exports.__esModule=!0,a.exports.default=a.exports,b(c,d,e,f)}a.exports=b,a.exports.__esModule=!0,a.exports.default=a.exports},15648:(a,b,c)=>{var d=c(83182),e=c(77309),f=c(40871),g=c(84919);a.exports=function(a,b){return d(a)||e(a,b)||f(a,b)||g()},a.exports.__esModule=!0,a.exports.default=a.exports},16953:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(75338);function e({children:a}){return(0,d.jsxs)("html",{lang:"en",children:[(0,d.jsxs)("head",{children:[(0,d.jsx)("title",{children:"Gemini Flow - React Flow Canvas"}),(0,d.jsx)("meta",{name:"description",content:"Powered by Zustand for optimal performance"})]}),(0,d.jsx)("body",{children:a})]})}c(82704)},17742:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/runner/work/gemini-flow/gemini-flow/frontend/app/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/runner/work/gemini-flow/gemini-flow/frontend/app/page.tsx","default")},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19292:(a,b,c)=>{var d=c(79567);a.exports=function(a,b,c){return(b=d(b))in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a},a.exports.__esModule=!0,a.exports.default=a.exports},21228:(a,b,c)=>{var d=c(82184);a.exports=function(a,b,c,e,f){var g=d(a,b,c,e,f);return g.next().then(function(a){return a.done?a.value:g.next()})},a.exports.__esModule=!0,a.exports.default=a.exports},21327:a=>{a.exports=function(a,b){this.v=a,this.k=b},a.exports.__esModule=!0,a.exports.default=a.exports},23158:(a,b,c)=>{var d=c(4197);a.exports=function(a,b){if("function"!=typeof b&&null!==b)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),b&&d(a,b)},a.exports.__esModule=!0,a.exports.default=a.exports},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},27346:(a,b,c)=>{var d=c(21327),e=c(14517);a.exports=function a(b,c){var f;this.next||(e(a.prototype),e(a.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),e(this,"_invoke",function(a,e,g){function h(){return new c(function(e,f){!function a(e,f,g,h){try{var i=b[e](f),j=i.value;return j instanceof d?c.resolve(j.v).then(function(b){a("next",b,g,h)},function(b){a("throw",b,g,h)}):c.resolve(j).then(function(a){i.value=a,g(i)},function(b){return a("throw",b,g,h)})}catch(a){h(a)}}(a,g,e,f)})}return f=f?f.then(h,h):h()},!0)},a.exports.__esModule=!0,a.exports.default=a.exports},28354:a=>{"use strict";a.exports=require("util")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29412:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},29482:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,54160,23)),Promise.resolve().then(c.t.bind(c,31603,23)),Promise.resolve().then(c.t.bind(c,68495,23)),Promise.resolve().then(c.t.bind(c,75170,23)),Promise.resolve().then(c.t.bind(c,77526,23)),Promise.resolve().then(c.t.bind(c,78922,23)),Promise.resolve().then(c.t.bind(c,29234,23)),Promise.resolve().then(c.t.bind(c,12263,23)),Promise.resolve().then(c.bind(c,82146))},33349:a=>{a.exports=function(a){return a&&a.__esModule?a:{default:a}},a.exports.__esModule=!0,a.exports.default=a.exports},33873:a=>{"use strict";a.exports=require("path")},36791:(a,b,c)=>{var d=c(42555).default,e=c(56068);a.exports=function(a,b){if(b&&("object"==d(b)||"function"==typeof b))return b;if(void 0!==b)throw TypeError("Derived constructors may only return object or undefined");return e(a)},a.exports.__esModule=!0,a.exports.default=a.exports},37347:(a,b,c)=>{"use strict";var d=c(33349);Object.defineProperty(b,"__esModule",{value:!0}),b.BroadcastChannel=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"nextauth.message";return{receive:function(b){var c=function(c){if(c.key===a){var d,e=JSON.parse(null!=(d=c.newValue)?d:"{}");(null==e?void 0:e.event)==="session"&&null!=e&&e.data&&b(e)}};return window.addEventListener("storage",c),function(){return window.removeEventListener("storage",c)}},post:function(b){if("undefined"!=typeof window)try{localStorage.setItem(a,JSON.stringify(i(i({},b),{},{timestamp:l()})))}catch(a){}}}},b.apiBaseUrl=k,b.fetchData=function(a,b,c){return j.apply(this,arguments)},b.now=l;var e=d(c(38131)),f=d(c(19292)),g=d(c(82996));function h(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function i(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?h(Object(c),!0).forEach(function(b){(0,f.default)(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):h(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function j(){return(j=(0,g.default)(e.default.mark(function a(b,c,d){var f,g,h,j,l,m,n,o,p,q=arguments;return e.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return g=(f=q.length>3&&void 0!==q[3]?q[3]:{}).ctx,j=void 0===(h=f.req)?null==g?void 0:g.req:h,l="".concat(k(c),"/").concat(b),a.prev=2,n={headers:i({"Content-Type":"application/json"},null!=j&&null!=(m=j.headers)&&m.cookie?{cookie:j.headers.cookie}:{})},null!=j&&j.body&&(n.body=JSON.stringify(j.body),n.method="POST"),a.next=7,fetch(l,n);case 7:return o=a.sent,a.next=10,o.json();case 10:if(p=a.sent,o.ok){a.next=13;break}throw p;case 13:return a.abrupt("return",Object.keys(p).length>0?p:null);case 16:return a.prev=16,a.t0=a.catch(2),d.error("CLIENT_FETCH_ERROR",{error:a.t0,url:l}),a.abrupt("return",null);case 20:case"end":return a.stop()}},a,null,[[2,16]])}))).apply(this,arguments)}function k(a){return"undefined"==typeof window?"".concat(a.baseUrlServer).concat(a.basePathServer):a.basePath}function l(){return Math.floor(Date.now()/1e3)}},38131:(a,b,c)=>{var d=c(69960)();a.exports=d;try{regeneratorRuntime=d}catch(a){"object"==typeof globalThis?globalThis.regeneratorRuntime=d:Function("r","regeneratorRuntime = r")(d)}},40871:(a,b,c)=>{var d=c(81366);a.exports=function(a,b){if(a){if("string"==typeof a)return d(a,b);var c=({}).toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?d(a,b):void 0}},a.exports.__esModule=!0,a.exports.default=a.exports},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},42033:a=>{a.exports=function(a){try{return -1!==Function.toString.call(a).indexOf("[native code]")}catch(b){return"function"==typeof a}},a.exports.__esModule=!0,a.exports.default=a.exports},42555:a=>{function b(c){return a.exports=b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},a.exports.__esModule=!0,a.exports.default=a.exports,b(c)}a.exports=b,a.exports.__esModule=!0,a.exports.default=a.exports},42797:(a,b,c)=>{"use strict";var d=c(38301),e="function"==typeof Object.is?Object.is:function(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b},f=d.useState,g=d.useEffect,h=d.useLayoutEffect,i=d.useDebugValue;function j(a){var b=a.getSnapshot;a=a.value;try{var c=b();return!e(a,c)}catch(a){return!0}}var k="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(a,b){return b()}:function(a,b){var c=b(),d=f({inst:{value:c,getSnapshot:b}}),e=d[0].inst,k=d[1];return h(function(){e.value=c,e.getSnapshot=b,j(e)&&k({inst:e})},[a,c,b]),g(function(){return j(e)&&k({inst:e}),a(function(){j(e)&&k({inst:e})})},[a]),i(c),c};b.useSyncExternalStore=void 0!==d.useSyncExternalStore?d.useSyncExternalStore:k},46645:(a,b,c)=>{var d=c(88563),e=c(4197);a.exports=function(a,b,c){if(d())return Reflect.construct.apply(null,arguments);var f=[null];f.push.apply(f,b);var g=new(a.bind.apply(a,f));return c&&e(g,c.prototype),g},a.exports.__esModule=!0,a.exports.default=a.exports},48664:(a,b,c)=>{var d=c(42555).default;a.exports=function(a){if(null!=a){var b=a["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],c=0;if(b)return b.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length))return{next:function(){return a&&c>=a.length&&(a=void 0),{value:a&&a[c++],done:!a}}}}throw TypeError(d(a)+" is not iterable")},a.exports.__esModule=!0,a.exports.default=a.exports},52737:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>fi});var d,e,f,g,h,i,j,k,l,m=c(21124),n=c(38301),o=c(57461);function p(a){if("string"==typeof a||"number"==typeof a)return""+a;let b="";if(Array.isArray(a))for(let c=0,d;c<a.length;c++)""!==(d=p(a[c]))&&(b+=(b&&" ")+d);else for(let c in a)a[c]&&(b+=(b&&" ")+c);return b}var q={value:()=>{}};function r(){for(var a,b=0,c=arguments.length,d={};b<c;++b){if(!(a=arguments[b]+"")||a in d||/[\s.]/.test(a))throw Error("illegal type: "+a);d[a]=[]}return new s(d)}function s(a){this._=a}function t(a,b,c){for(var d=0,e=a.length;d<e;++d)if(a[d].name===b){a[d]=q,a=a.slice(0,d).concat(a.slice(d+1));break}return null!=c&&a.push({name:b,value:c}),a}function u(){}function v(a){return null==a?u:function(){return this.querySelector(a)}}function w(){return[]}function x(a){return null==a?w:function(){return this.querySelectorAll(a)}}function y(a){return function(){return this.matches(a)}}function z(a){return function(b){return b.matches(a)}}s.prototype=r.prototype={constructor:s,on:function(a,b){var c,d=this._,e=(a+"").trim().split(/^|\s+/).map(function(a){var b="",c=a.indexOf(".");if(c>=0&&(b=a.slice(c+1),a=a.slice(0,c)),a&&!d.hasOwnProperty(a))throw Error("unknown type: "+a);return{type:a,name:b}}),f=-1,g=e.length;if(arguments.length<2){for(;++f<g;)if((c=(a=e[f]).type)&&(c=function(a,b){for(var c,d=0,e=a.length;d<e;++d)if((c=a[d]).name===b)return c.value}(d[c],a.name)))return c;return}if(null!=b&&"function"!=typeof b)throw Error("invalid callback: "+b);for(;++f<g;)if(c=(a=e[f]).type)d[c]=t(d[c],a.name,b);else if(null==b)for(c in d)d[c]=t(d[c],a.name,null);return this},copy:function(){var a={},b=this._;for(var c in b)a[c]=b[c].slice();return new s(a)},call:function(a,b){if((c=arguments.length-2)>0)for(var c,d,e=Array(c),f=0;f<c;++f)e[f]=arguments[f+2];if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);for(d=this._[a],f=0,c=d.length;f<c;++f)d[f].value.apply(b,e)},apply:function(a,b,c){if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);for(var d=this._[a],e=0,f=d.length;e<f;++e)d[e].value.apply(b,c)}};var A=Array.prototype.find;function B(){return this.firstElementChild}var C=Array.prototype.filter;function D(){return Array.from(this.children)}function E(a){return Array(a.length)}function F(a,b){this.ownerDocument=a.ownerDocument,this.namespaceURI=a.namespaceURI,this._next=null,this._parent=a,this.__data__=b}function G(a,b,c,d,e,f){for(var g,h=0,i=b.length,j=f.length;h<j;++h)(g=b[h])?(g.__data__=f[h],d[h]=g):c[h]=new F(a,f[h]);for(;h<i;++h)(g=b[h])&&(e[h]=g)}function H(a,b,c,d,e,f,g){var h,i,j,k=new Map,l=b.length,m=f.length,n=Array(l);for(h=0;h<l;++h)(i=b[h])&&(n[h]=j=g.call(i,i.__data__,h,b)+"",k.has(j)?e[h]=i:k.set(j,i));for(h=0;h<m;++h)j=g.call(a,f[h],h,f)+"",(i=k.get(j))?(d[h]=i,i.__data__=f[h],k.delete(j)):c[h]=new F(a,f[h]);for(h=0;h<l;++h)(i=b[h])&&k.get(n[h])===i&&(e[h]=i)}function I(a){return a.__data__}function J(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}F.prototype={constructor:F,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,b){return this._parent.insertBefore(a,b)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};var K="http://www.w3.org/1999/xhtml";let L={svg:"http://www.w3.org/2000/svg",xhtml:K,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function M(a){var b=a+="",c=b.indexOf(":");return c>=0&&"xmlns"!==(b=a.slice(0,c))&&(a=a.slice(c+1)),L.hasOwnProperty(b)?{space:L[b],local:a}:a}function N(a){return a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView}function O(a,b){return a.style.getPropertyValue(b)||N(a).getComputedStyle(a,null).getPropertyValue(b)}function P(a){return a.trim().split(/^|\s+/)}function Q(a){return a.classList||new R(a)}function R(a){this._node=a,this._names=P(a.getAttribute("class")||"")}function S(a,b){for(var c=Q(a),d=-1,e=b.length;++d<e;)c.add(b[d])}function T(a,b){for(var c=Q(a),d=-1,e=b.length;++d<e;)c.remove(b[d])}function U(){this.textContent=""}function V(){this.innerHTML=""}function W(){this.nextSibling&&this.parentNode.appendChild(this)}function X(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Y(a){var b=M(a);return(b.local?function(a){return function(){return this.ownerDocument.createElementNS(a.space,a.local)}}:function(a){return function(){var b=this.ownerDocument,c=this.namespaceURI;return c===K&&b.documentElement.namespaceURI===K?b.createElement(a):b.createElementNS(c,a)}})(b)}function Z(){return null}function $(){var a=this.parentNode;a&&a.removeChild(this)}function _(){var a=this.cloneNode(!1),b=this.parentNode;return b?b.insertBefore(a,this.nextSibling):a}function aa(){var a=this.cloneNode(!0),b=this.parentNode;return b?b.insertBefore(a,this.nextSibling):a}function ab(a){return function(){var b=this.__on;if(b){for(var c,d=0,e=-1,f=b.length;d<f;++d)(c=b[d],a.type&&c.type!==a.type||c.name!==a.name)?b[++e]=c:this.removeEventListener(c.type,c.listener,c.options);++e?b.length=e:delete this.__on}}}function ac(a,b,c){return function(){var d,e=this.__on,f=function(a){b.call(this,a,this.__data__)};if(e){for(var g=0,h=e.length;g<h;++g)if((d=e[g]).type===a.type&&d.name===a.name){this.removeEventListener(d.type,d.listener,d.options),this.addEventListener(d.type,d.listener=f,d.options=c),d.value=b;return}}this.addEventListener(a.type,f,c),d={type:a.type,name:a.name,value:b,listener:f,options:c},e?e.push(d):this.__on=[d]}}function ad(a,b,c){var d=N(a),e=d.CustomEvent;"function"==typeof e?e=new e(b,c):(e=d.document.createEvent("Event"),c?(e.initEvent(b,c.bubbles,c.cancelable),e.detail=c.detail):e.initEvent(b,!1,!1)),a.dispatchEvent(e)}R.prototype={add:function(a){0>this._names.indexOf(a)&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){var b=this._names.indexOf(a);b>=0&&(this._names.splice(b,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return this._names.indexOf(a)>=0}};var ae=[null];function af(a,b){this._groups=a,this._parents=b}function ag(){return new af([[document.documentElement]],ae)}function ah(a){return((a=Math.exp(a))+1/a)/2}af.prototype=ag.prototype={constructor:af,select:function(a){"function"!=typeof a&&(a=v(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var f,g,h=b[e],i=h.length,j=d[e]=Array(i),k=0;k<i;++k)(f=h[k])&&(g=a.call(f,f.__data__,k,h))&&("__data__"in f&&(g.__data__=f.__data__),j[k]=g);return new af(d,this._parents)},selectAll:function(a){if("function"==typeof a){var b;b=a,a=function(){var a;return a=b.apply(this,arguments),null==a?[]:Array.isArray(a)?a:Array.from(a)}}else a=x(a);for(var c=this._groups,d=c.length,e=[],f=[],g=0;g<d;++g)for(var h,i=c[g],j=i.length,k=0;k<j;++k)(h=i[k])&&(e.push(a.call(h,h.__data__,k,i)),f.push(h));return new af(e,f)},selectChild:function(a){var b;return this.select(null==a?B:(b="function"==typeof a?a:z(a),function(){return A.call(this.children,b)}))},selectChildren:function(a){var b;return this.selectAll(null==a?D:(b="function"==typeof a?a:z(a),function(){return C.call(this.children,b)}))},filter:function(a){"function"!=typeof a&&(a=y(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var f,g=b[e],h=g.length,i=d[e]=[],j=0;j<h;++j)(f=g[j])&&a.call(f,f.__data__,j,g)&&i.push(f);return new af(d,this._parents)},data:function(a,b){if(!arguments.length)return Array.from(this,I);var c=b?H:G,d=this._parents,e=this._groups;"function"!=typeof a&&(s=a,a=function(){return s});for(var f=e.length,g=Array(f),h=Array(f),i=Array(f),j=0;j<f;++j){var k=d[j],l=e[j],m=l.length,n="object"==typeof(r=a.call(k,k&&k.__data__,j,d))&&"length"in r?r:Array.from(r),o=n.length,p=h[j]=Array(o),q=g[j]=Array(o);c(k,l,p,q,i[j]=Array(m),n,b);for(var r,s,t,u,v=0,w=0;v<o;++v)if(t=p[v]){for(v>=w&&(w=v+1);!(u=q[w])&&++w<o;);t._next=u||null}}return(g=new af(g,d))._enter=h,g._exit=i,g},enter:function(){return new af(this._enter||this._groups.map(E),this._parents)},exit:function(){return new af(this._exit||this._groups.map(E),this._parents)},join:function(a,b,c){var d=this.enter(),e=this,f=this.exit();return"function"==typeof a?(d=a(d))&&(d=d.selection()):d=d.append(a+""),null!=b&&(e=b(e))&&(e=e.selection()),null==c?f.remove():c(f),d&&e?d.merge(e).order():e},merge:function(a){for(var b=a.selection?a.selection():a,c=this._groups,d=b._groups,e=c.length,f=d.length,g=Math.min(e,f),h=Array(e),i=0;i<g;++i)for(var j,k=c[i],l=d[i],m=k.length,n=h[i]=Array(m),o=0;o<m;++o)(j=k[o]||l[o])&&(n[o]=j);for(;i<e;++i)h[i]=c[i];return new af(h,this._parents)},selection:function(){return this},order:function(){for(var a=this._groups,b=-1,c=a.length;++b<c;)for(var d,e=a[b],f=e.length-1,g=e[f];--f>=0;)(d=e[f])&&(g&&4^d.compareDocumentPosition(g)&&g.parentNode.insertBefore(d,g),g=d);return this},sort:function(a){function b(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}a||(a=J);for(var c=this._groups,d=c.length,e=Array(d),f=0;f<d;++f){for(var g,h=c[f],i=h.length,j=e[f]=Array(i),k=0;k<i;++k)(g=h[k])&&(j[k]=g);j.sort(b)}return new af(e,this._parents).order()},call:function(){var a=arguments[0];return arguments[0]=this,a.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var a=this._groups,b=0,c=a.length;b<c;++b)for(var d=a[b],e=0,f=d.length;e<f;++e){var g=d[e];if(g)return g}return null},size:function(){let a=0;for(let b of this)++a;return a},empty:function(){return!this.node()},each:function(a){for(var b=this._groups,c=0,d=b.length;c<d;++c)for(var e,f=b[c],g=0,h=f.length;g<h;++g)(e=f[g])&&a.call(e,e.__data__,g,f);return this},attr:function(a,b){var c=M(a);if(arguments.length<2){var d=this.node();return c.local?d.getAttributeNS(c.space,c.local):d.getAttribute(c)}return this.each((null==b?c.local?function(a){return function(){this.removeAttributeNS(a.space,a.local)}}:function(a){return function(){this.removeAttribute(a)}}:"function"==typeof b?c.local?function(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}}:function(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}}:c.local?function(a,b){return function(){this.setAttributeNS(a.space,a.local,b)}}:function(a,b){return function(){this.setAttribute(a,b)}})(c,b))},style:function(a,b,c){return arguments.length>1?this.each((null==b?function(a){return function(){this.style.removeProperty(a)}}:"function"==typeof b?function(a,b,c){return function(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}}:function(a,b,c){return function(){this.style.setProperty(a,b,c)}})(a,b,null==c?"":c)):O(this.node(),a)},property:function(a,b){return arguments.length>1?this.each((null==b?function(a){return function(){delete this[a]}}:"function"==typeof b?function(a,b){return function(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}}:function(a,b){return function(){this[a]=b}})(a,b)):this.node()[a]},classed:function(a,b){var c=P(a+"");if(arguments.length<2){for(var d=Q(this.node()),e=-1,f=c.length;++e<f;)if(!d.contains(c[e]))return!1;return!0}return this.each(("function"==typeof b?function(a,b){return function(){(b.apply(this,arguments)?S:T)(this,a)}}:b?function(a){return function(){S(this,a)}}:function(a){return function(){T(this,a)}})(c,b))},text:function(a){return arguments.length?this.each(null==a?U:("function"==typeof a?function(a){return function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}}:function(a){return function(){this.textContent=a}})(a)):this.node().textContent},html:function(a){return arguments.length?this.each(null==a?V:("function"==typeof a?function(a){return function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}}:function(a){return function(){this.innerHTML=a}})(a)):this.node().innerHTML},raise:function(){return this.each(W)},lower:function(){return this.each(X)},append:function(a){var b="function"==typeof a?a:Y(a);return this.select(function(){return this.appendChild(b.apply(this,arguments))})},insert:function(a,b){var c="function"==typeof a?a:Y(a),d=null==b?Z:"function"==typeof b?b:v(b);return this.select(function(){return this.insertBefore(c.apply(this,arguments),d.apply(this,arguments)||null)})},remove:function(){return this.each($)},clone:function(a){return this.select(a?aa:_)},datum:function(a){return arguments.length?this.property("__data__",a):this.node().__data__},on:function(a,b,c){var d,e,f=(a+"").trim().split(/^|\s+/).map(function(a){var b="",c=a.indexOf(".");return c>=0&&(b=a.slice(c+1),a=a.slice(0,c)),{type:a,name:b}}),g=f.length;if(arguments.length<2){var h=this.node().__on;if(h){for(var i,j=0,k=h.length;j<k;++j)for(d=0,i=h[j];d<g;++d)if((e=f[d]).type===i.type&&e.name===i.name)return i.value}return}for(d=0,h=b?ac:ab;d<g;++d)this.each(h(f[d],b,c));return this},dispatch:function(a,b){return this.each(("function"==typeof b?function(a,b){return function(){return ad(this,a,b.apply(this,arguments))}}:function(a,b){return function(){return ad(this,a,b)}})(a,b))},[Symbol.iterator]:function*(){for(var a=this._groups,b=0,c=a.length;b<c;++b)for(var d,e=a[b],f=0,g=e.length;f<g;++f)(d=e[f])&&(yield d)}},(function(a,{sourceEvent:b,subject:c,target:d,identifier:e,active:f,x:g,y:h,dx:i,dy:j,dispatch:k}){Object.defineProperties(this,{type:{value:a,enumerable:!0,configurable:!0},sourceEvent:{value:b,enumerable:!0,configurable:!0},subject:{value:c,enumerable:!0,configurable:!0},target:{value:d,enumerable:!0,configurable:!0},identifier:{value:e,enumerable:!0,configurable:!0},active:{value:f,enumerable:!0,configurable:!0},x:{value:g,enumerable:!0,configurable:!0},y:{value:h,enumerable:!0,configurable:!0},dx:{value:i,enumerable:!0,configurable:!0},dy:{value:j,enumerable:!0,configurable:!0},_:{value:k}})}).prototype.on=function(){var a=this._.on.apply(this._,arguments);return a===this._?this:a},!function a(b,c,d){function e(a,e){var f,g,h=a[0],i=a[1],j=a[2],k=e[0],l=e[1],m=e[2],n=k-h,o=l-i,p=n*n+o*o;if(p<1e-12)g=Math.log(m/j)/b,f=function(a){return[h+a*n,i+a*o,j*Math.exp(b*a*g)]};else{var q=Math.sqrt(p),r=(m*m-j*j+d*p)/(2*j*c*q),s=(m*m-j*j-d*p)/(2*m*c*q),t=Math.log(Math.sqrt(r*r+1)-r);g=(Math.log(Math.sqrt(s*s+1)-s)-t)/b,f=function(a){var d,e,f=a*g,k=ah(t),l=j/(c*q)*(k*(((d=Math.exp(2*(d=b*f+t)))-1)/(d+1))-((e=Math.exp(e=t))-1/e)/2);return[h+l*n,i+l*o,j*k/ah(b*f+t)]}}return f.duration=1e3*g*b/Math.SQRT2,f}return e.rho=function(b){var c=Math.max(.001,+b),d=c*c;return a(c,d,d*d)},e}(Math.SQRT2,2,4);var ai,aj,ak=0,al=0,am=0,an=0,ao=0,ap=0,aq="object"==typeof performance&&performance.now?performance:Date,ar="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(a){setTimeout(a,17)};function as(){return ao||(ar(at),ao=aq.now()+ap)}function at(){ao=0}function au(){this._call=this._time=this._next=null}function av(a,b,c){var d=new au;return d.restart(a,b,c),d}function aw(){ao=(an=aq.now())+ap,ak=al=0;try{as(),++ak;for(var a,b=ai;b;)(a=ao-b._time)>=0&&b._call.call(void 0,a),b=b._next;--ak}finally{ak=0,function(){for(var a,b,c=ai,d=1/0;c;)c._call?(d>c._time&&(d=c._time),a=c,c=c._next):(b=c._next,c._next=null,c=a?a._next=b:ai=b);aj=a,ay(d)}(),ao=0}}function ax(){var a=aq.now(),b=a-an;b>1e3&&(ap-=b,an=a)}function ay(a){!ak&&(al&&(al=clearTimeout(al)),a-ao>24?(a<1/0&&(al=setTimeout(aw,a-aq.now()-ap)),am&&(am=clearInterval(am))):(am||(an=aq.now(),am=setInterval(ax,1e3)),ak=1,ar(aw)))}function az(a,b,c){var d=new au;return b=null==b?0:+b,d.restart(c=>{d.stop(),a(c+b)},b,c),d}au.prototype=av.prototype={constructor:au,restart:function(a,b,c){if("function"!=typeof a)throw TypeError("callback is not a function");c=(null==c?as():+c)+(null==b?0:+b),this._next||aj===this||(aj?aj._next=this:ai=this,aj=this),this._call=a,this._time=c,ay()},stop:function(){this._call&&(this._call=null,this._time=1/0,ay())}};var aA=r("start","end","cancel","interrupt"),aB=[];function aC(a,b,c,d,e,f){var g=a.__transition;if(g){if(c in g)return}else a.__transition={};!function(a,b,c){var d,e=a.__transition;function f(i){var j,k,l,m;if(1!==c.state)return h();for(j in e)if((m=e[j]).name===c.name){if(3===m.state)return az(f);4===m.state?(m.state=6,m.timer.stop(),m.on.call("interrupt",a,a.__data__,m.index,m.group),delete e[j]):+j<b&&(m.state=6,m.timer.stop(),m.on.call("cancel",a,a.__data__,m.index,m.group),delete e[j])}if(az(function(){3===c.state&&(c.state=4,c.timer.restart(g,c.delay,c.time),g(i))}),c.state=2,c.on.call("start",a,a.__data__,c.index,c.group),2===c.state){for(j=0,c.state=3,d=Array(l=c.tween.length),k=-1;j<l;++j)(m=c.tween[j].value.call(a,a.__data__,c.index,c.group))&&(d[++k]=m);d.length=k+1}}function g(b){for(var e=b<c.duration?c.ease.call(null,b/c.duration):(c.timer.restart(h),c.state=5,1),f=-1,g=d.length;++f<g;)d[f].call(a,e);5===c.state&&(c.on.call("end",a,a.__data__,c.index,c.group),h())}function h(){for(var d in c.state=6,c.timer.stop(),delete e[b],e)return;delete a.__transition}e[b]=c,c.timer=av(function(a){c.state=1,c.timer.restart(f,c.delay,c.time),c.delay<=a&&f(a-c.delay)},0,c.time)}(a,c,{name:b,index:d,group:e,on:aA,tween:aB,time:f.time,delay:f.delay,duration:f.duration,ease:f.ease,timer:null,state:0})}function aD(a,b){var c=aF(a,b);if(c.state>0)throw Error("too late; already scheduled");return c}function aE(a,b){var c=aF(a,b);if(c.state>3)throw Error("too late; already running");return c}function aF(a,b){var c=a.__transition;if(!c||!(c=c[b]))throw Error("transition not found");return c}function aG(a,b){return a*=1,b*=1,function(c){return a*(1-c)+b*c}}var aH=180/Math.PI,aI={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function aJ(a,b,c,d,e,f){var g,h,i;return(g=Math.sqrt(a*a+b*b))&&(a/=g,b/=g),(i=a*c+b*d)&&(c-=a*i,d-=b*i),(h=Math.sqrt(c*c+d*d))&&(c/=h,d/=h,i/=h),a*d<b*c&&(a=-a,b=-b,i=-i,g=-g),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*aH,skewX:Math.atan(i)*aH,scaleX:g,scaleY:h}}function aK(a,b,c,d){function e(a){return a.length?a.pop()+" ":""}return function(f,g){var h,i,j,k,l=[],m=[];return f=a(f),g=a(g),!function(a,d,e,f,g,h){if(a!==e||d!==f){var i=g.push("translate(",null,b,null,c);h.push({i:i-4,x:aG(a,e)},{i:i-2,x:aG(d,f)})}else(e||f)&&g.push("translate("+e+b+f+c)}(f.translateX,f.translateY,g.translateX,g.translateY,l,m),h=f.rotate,i=g.rotate,h!==i?(h-i>180?i+=360:i-h>180&&(h+=360),m.push({i:l.push(e(l)+"rotate(",null,d)-2,x:aG(h,i)})):i&&l.push(e(l)+"rotate("+i+d),j=f.skewX,k=g.skewX,j!==k?m.push({i:l.push(e(l)+"skewX(",null,d)-2,x:aG(j,k)}):k&&l.push(e(l)+"skewX("+k+d),!function(a,b,c,d,f,g){if(a!==c||b!==d){var h=f.push(e(f)+"scale(",null,",",null,")");g.push({i:h-4,x:aG(a,c)},{i:h-2,x:aG(b,d)})}else(1!==c||1!==d)&&f.push(e(f)+"scale("+c+","+d+")")}(f.scaleX,f.scaleY,g.scaleX,g.scaleY,l,m),f=g=null,function(a){for(var b,c=-1,d=m.length;++c<d;)l[(b=m[c]).i]=b.x(a);return l.join("")}}}var aL=aK(function(a){let b=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(a+"");return b.isIdentity?aI:aJ(b.a,b.b,b.c,b.d,b.e,b.f)},"px, ","px)","deg)"),aM=aK(function(a){return null==a?aI:(d||(d=document.createElementNS("http://www.w3.org/2000/svg","g")),d.setAttribute("transform",a),a=d.transform.baseVal.consolidate())?aJ((a=a.matrix).a,a.b,a.c,a.d,a.e,a.f):aI},", ",")",")");function aN(a,b,c){var d=a._id;return a.each(function(){var a=aE(this,d);(a.value||(a.value={}))[b]=c.apply(this,arguments)}),function(a){return aF(a,d).value[b]}}function aO(a,b,c){a.prototype=b.prototype=c,c.constructor=a}function aP(a,b){var c=Object.create(a.prototype);for(var d in b)c[d]=b[d];return c}function aQ(){}var aR="\\s*([+-]?\\d+)\\s*",aS="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",aT="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",aU=/^#([0-9a-f]{3,8})$/,aV=RegExp(`^rgb\\(${aR},${aR},${aR}\\)$`),aW=RegExp(`^rgb\\(${aT},${aT},${aT}\\)$`),aX=RegExp(`^rgba\\(${aR},${aR},${aR},${aS}\\)$`),aY=RegExp(`^rgba\\(${aT},${aT},${aT},${aS}\\)$`),aZ=RegExp(`^hsl\\(${aS},${aT},${aT}\\)$`),a$=RegExp(`^hsla\\(${aS},${aT},${aT},${aS}\\)$`),a_={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function a0(){return this.rgb().formatHex()}function a1(){return this.rgb().formatRgb()}function a2(a){var b,c;return a=(a+"").trim().toLowerCase(),(b=aU.exec(a))?(c=b[1].length,b=parseInt(b[1],16),6===c?a3(b):3===c?new a6(b>>8&15|b>>4&240,b>>4&15|240&b,(15&b)<<4|15&b,1):8===c?a4(b>>24&255,b>>16&255,b>>8&255,(255&b)/255):4===c?a4(b>>12&15|b>>8&240,b>>8&15|b>>4&240,b>>4&15|240&b,((15&b)<<4|15&b)/255):null):(b=aV.exec(a))?new a6(b[1],b[2],b[3],1):(b=aW.exec(a))?new a6(255*b[1]/100,255*b[2]/100,255*b[3]/100,1):(b=aX.exec(a))?a4(b[1],b[2],b[3],b[4]):(b=aY.exec(a))?a4(255*b[1]/100,255*b[2]/100,255*b[3]/100,b[4]):(b=aZ.exec(a))?bc(b[1],b[2]/100,b[3]/100,1):(b=a$.exec(a))?bc(b[1],b[2]/100,b[3]/100,b[4]):a_.hasOwnProperty(a)?a3(a_[a]):"transparent"===a?new a6(NaN,NaN,NaN,0):null}function a3(a){return new a6(a>>16&255,a>>8&255,255&a,1)}function a4(a,b,c,d){return d<=0&&(a=b=c=NaN),new a6(a,b,c,d)}function a5(a,b,c,d){var e;return 1==arguments.length?((e=a)instanceof aQ||(e=a2(e)),e)?new a6((e=e.rgb()).r,e.g,e.b,e.opacity):new a6:new a6(a,b,c,null==d?1:d)}function a6(a,b,c,d){this.r=+a,this.g=+b,this.b=+c,this.opacity=+d}function a7(){return`#${bb(this.r)}${bb(this.g)}${bb(this.b)}`}function a8(){let a=a9(this.opacity);return`${1===a?"rgb(":"rgba("}${ba(this.r)}, ${ba(this.g)}, ${ba(this.b)}${1===a?")":`, ${a})`}`}function a9(a){return isNaN(a)?1:Math.max(0,Math.min(1,a))}function ba(a){return Math.max(0,Math.min(255,Math.round(a)||0))}function bb(a){return((a=ba(a))<16?"0":"")+a.toString(16)}function bc(a,b,c,d){return d<=0?a=b=c=NaN:c<=0||c>=1?a=b=NaN:b<=0&&(a=NaN),new be(a,b,c,d)}function bd(a){if(a instanceof be)return new be(a.h,a.s,a.l,a.opacity);if(a instanceof aQ||(a=a2(a)),!a)return new be;if(a instanceof be)return a;var b=(a=a.rgb()).r/255,c=a.g/255,d=a.b/255,e=Math.min(b,c,d),f=Math.max(b,c,d),g=NaN,h=f-e,i=(f+e)/2;return h?(g=b===f?(c-d)/h+(c<d)*6:c===f?(d-b)/h+2:(b-c)/h+4,h/=i<.5?f+e:2-f-e,g*=60):h=i>0&&i<1?0:g,new be(g,h,i,a.opacity)}function be(a,b,c,d){this.h=+a,this.s=+b,this.l=+c,this.opacity=+d}function bf(a){return(a=(a||0)%360)<0?a+360:a}function bg(a){return Math.max(0,Math.min(1,a||0))}function bh(a,b,c){return(a<60?b+(c-b)*a/60:a<180?c:a<240?b+(c-b)*(240-a)/60:b)*255}function bi(a,b,c,d,e){var f=a*a,g=f*a;return((1-3*a+3*f-g)*b+(4-6*f+3*g)*c+(1+3*a+3*f-3*g)*d+g*e)/6}aO(aQ,a2,{copy(a){return Object.assign(new this.constructor,this,a)},displayable(){return this.rgb().displayable()},hex:a0,formatHex:a0,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return bd(this).formatHsl()},formatRgb:a1,toString:a1}),aO(a6,a5,aP(aQ,{brighter(a){return a=null==a?1.4285714285714286:Math.pow(1.4285714285714286,a),new a6(this.r*a,this.g*a,this.b*a,this.opacity)},darker(a){return a=null==a?.7:Math.pow(.7,a),new a6(this.r*a,this.g*a,this.b*a,this.opacity)},rgb(){return this},clamp(){return new a6(ba(this.r),ba(this.g),ba(this.b),a9(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:a7,formatHex:a7,formatHex8:function(){return`#${bb(this.r)}${bb(this.g)}${bb(this.b)}${bb((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:a8,toString:a8})),aO(be,function(a,b,c,d){return 1==arguments.length?bd(a):new be(a,b,c,null==d?1:d)},aP(aQ,{brighter(a){return a=null==a?1.4285714285714286:Math.pow(1.4285714285714286,a),new be(this.h,this.s,this.l*a,this.opacity)},darker(a){return a=null==a?.7:Math.pow(.7,a),new be(this.h,this.s,this.l*a,this.opacity)},rgb(){var a=this.h%360+(this.h<0)*360,b=isNaN(a)||isNaN(this.s)?0:this.s,c=this.l,d=c+(c<.5?c:1-c)*b,e=2*c-d;return new a6(bh(a>=240?a-240:a+120,e,d),bh(a,e,d),bh(a<120?a+240:a-120,e,d),this.opacity)},clamp(){return new be(bf(this.h),bg(this.s),bg(this.l),a9(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let a=a9(this.opacity);return`${1===a?"hsl(":"hsla("}${bf(this.h)}, ${100*bg(this.s)}%, ${100*bg(this.l)}%${1===a?")":`, ${a})`}`}}));let bj=a=>()=>a;function bk(a,b){var c=b-a;return c?function(b){return a+b*c}:bj(isNaN(a)?b:a)}let bl=function a(b){var c,d=1==(c=+b)?bk:function(a,b){var d,e,f;return b-a?(d=a,e=b,d=Math.pow(d,f=c),e=Math.pow(e,f)-d,f=1/f,function(a){return Math.pow(d+a*e,f)}):bj(isNaN(a)?b:a)};function e(a,b){var c=d((a=a5(a)).r,(b=a5(b)).r),e=d(a.g,b.g),f=d(a.b,b.b),g=bk(a.opacity,b.opacity);return function(b){return a.r=c(b),a.g=e(b),a.b=f(b),a.opacity=g(b),a+""}}return e.gamma=a,e}(1);function bm(a){return function(b){var c,d,e=b.length,f=Array(e),g=Array(e),h=Array(e);for(c=0;c<e;++c)d=a5(b[c]),f[c]=d.r||0,g[c]=d.g||0,h[c]=d.b||0;return f=a(f),g=a(g),h=a(h),d.opacity=1,function(a){return d.r=f(a),d.g=g(a),d.b=h(a),d+""}}}bm(function(a){var b=a.length-1;return function(c){var d=c<=0?c=0:c>=1?(c=1,b-1):Math.floor(c*b),e=a[d],f=a[d+1],g=d>0?a[d-1]:2*e-f,h=d<b-1?a[d+2]:2*f-e;return bi((c-d/b)*b,g,e,f,h)}}),bm(function(a){var b=a.length;return function(c){var d=Math.floor(((c%=1)<0?++c:c)*b),e=a[(d+b-1)%b],f=a[d%b],g=a[(d+1)%b],h=a[(d+2)%b];return bi((c-d/b)*b,e,f,g,h)}});var bn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bo=RegExp(bn.source,"g");function bp(a,b){var c,d,e,f,g,h=bn.lastIndex=bo.lastIndex=0,i=-1,j=[],k=[];for(a+="",b+="";(e=bn.exec(a))&&(f=bo.exec(b));)(g=f.index)>h&&(g=b.slice(h,g),j[i]?j[i]+=g:j[++i]=g),(e=e[0])===(f=f[0])?j[i]?j[i]+=f:j[++i]=f:(j[++i]=null,k.push({i:i,x:aG(e,f)})),h=bo.lastIndex;return h<b.length&&(g=b.slice(h),j[i]?j[i]+=g:j[++i]=g),j.length<2?k[0]?(c=k[0].x,function(a){return c(a)+""}):(d=b,function(){return d}):(b=k.length,function(a){for(var c,d=0;d<b;++d)j[(c=k[d]).i]=c.x(a);return j.join("")})}function bq(a,b){var c;return("number"==typeof b?aG:b instanceof a2?bl:(c=a2(b))?(b=c,bl):bp)(a,b)}var br=ag.prototype.constructor;function bs(a){return function(){this.style.removeProperty(a)}}var bt=0;function bu(a,b,c,d){this._groups=a,this._parents=b,this._name=c,this._id=d}var bv=ag.prototype;bu.prototype=(function(a){return ag().transition(a)}).prototype={constructor:bu,select:function(a){var b=this._name,c=this._id;"function"!=typeof a&&(a=v(a));for(var d=this._groups,e=d.length,f=Array(e),g=0;g<e;++g)for(var h,i,j=d[g],k=j.length,l=f[g]=Array(k),m=0;m<k;++m)(h=j[m])&&(i=a.call(h,h.__data__,m,j))&&("__data__"in h&&(i.__data__=h.__data__),l[m]=i,aC(l[m],b,c,m,l,aF(h,c)));return new bu(f,this._parents,b,c)},selectAll:function(a){var b=this._name,c=this._id;"function"!=typeof a&&(a=x(a));for(var d=this._groups,e=d.length,f=[],g=[],h=0;h<e;++h)for(var i,j=d[h],k=j.length,l=0;l<k;++l)if(i=j[l]){for(var m,n=a.call(i,i.__data__,l,j),o=aF(i,c),p=0,q=n.length;p<q;++p)(m=n[p])&&aC(m,b,c,p,n,o);f.push(n),g.push(i)}return new bu(f,g,b,c)},selectChild:bv.selectChild,selectChildren:bv.selectChildren,filter:function(a){"function"!=typeof a&&(a=y(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var f,g=b[e],h=g.length,i=d[e]=[],j=0;j<h;++j)(f=g[j])&&a.call(f,f.__data__,j,g)&&i.push(f);return new bu(d,this._parents,this._name,this._id)},merge:function(a){if(a._id!==this._id)throw Error();for(var b=this._groups,c=a._groups,d=b.length,e=c.length,f=Math.min(d,e),g=Array(d),h=0;h<f;++h)for(var i,j=b[h],k=c[h],l=j.length,m=g[h]=Array(l),n=0;n<l;++n)(i=j[n]||k[n])&&(m[n]=i);for(;h<d;++h)g[h]=b[h];return new bu(g,this._parents,this._name,this._id)},selection:function(){return new br(this._groups,this._parents)},transition:function(){for(var a=this._name,b=this._id,c=++bt,d=this._groups,e=d.length,f=0;f<e;++f)for(var g,h=d[f],i=h.length,j=0;j<i;++j)if(g=h[j]){var k=aF(g,b);aC(g,a,c,j,h,{time:k.time+k.delay+k.duration,delay:0,duration:k.duration,ease:k.ease})}return new bu(d,this._parents,a,c)},call:bv.call,nodes:bv.nodes,node:bv.node,size:bv.size,empty:bv.empty,each:bv.each,on:function(a,b){var c,d,e,f,g,h,i=this._id;return arguments.length<2?aF(this.node(),i).on.on(a):this.each((c=i,d=a,e=b,h=(d+"").trim().split(/^|\s+/).every(function(a){var b=a.indexOf(".");return b>=0&&(a=a.slice(0,b)),!a||"start"===a})?aD:aE,function(){var a=h(this,c),b=a.on;b!==f&&(g=(f=b).copy()).on(d,e),a.on=g}))},attr:function(a,b){var c=M(a),d="transform"===c?aM:bq;return this.attrTween(a,"function"==typeof b?(c.local?function(a,b,c){var d,e,f;return function(){var g,h,i=c(this);return null==i?void this.removeAttributeNS(a.space,a.local):(g=this.getAttributeNS(a.space,a.local))===(h=i+"")?null:g===d&&h===e?f:(e=h,f=b(d=g,i))}}:function(a,b,c){var d,e,f;return function(){var g,h,i=c(this);return null==i?void this.removeAttribute(a):(g=this.getAttribute(a))===(h=i+"")?null:g===d&&h===e?f:(e=h,f=b(d=g,i))}})(c,d,aN(this,"attr."+a,b)):null==b?(c.local?function(a){return function(){this.removeAttributeNS(a.space,a.local)}}:function(a){return function(){this.removeAttribute(a)}})(c):(c.local?function(a,b,c){var d,e,f=c+"";return function(){var g=this.getAttributeNS(a.space,a.local);return g===f?null:g===d?e:e=b(d=g,c)}}:function(a,b,c){var d,e,f=c+"";return function(){var g=this.getAttribute(a);return g===f?null:g===d?e:e=b(d=g,c)}})(c,d,b))},attrTween:function(a,b){var c="attr."+a;if(arguments.length<2)return(c=this.tween(c))&&c._value;if(null==b)return this.tween(c,null);if("function"!=typeof b)throw Error();var d=M(a);return this.tween(c,(d.local?function(a,b){var c,d;function e(){var e=b.apply(this,arguments);return e!==d&&(c=(d=e)&&function(b){this.setAttributeNS(a.space,a.local,e.call(this,b))}),c}return e._value=b,e}:function(a,b){var c,d;function e(){var e=b.apply(this,arguments);return e!==d&&(c=(d=e)&&function(b){this.setAttribute(a,e.call(this,b))}),c}return e._value=b,e})(d,b))},style:function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y="transform"==(a+="")?aL:bq;return null==b?this.styleTween(a,(d=a,function(){var a=O(this,d),b=(this.style.removeProperty(d),O(this,d));return a===b?null:a===e&&b===f?g:g=y(e=a,f=b)})).on("end.style."+a,bs(a)):"function"==typeof b?this.styleTween(a,(h=a,i=aN(this,"style."+a,b),function(){var a=O(this,h),b=i(this),c=b+"";return null==b&&(this.style.removeProperty(h),c=b=O(this,h)),a===c?null:a===j&&c===k?l:(k=c,l=y(j=a,b))})).each((m=this._id,t="end."+(s="style."+(n=a)),function(){var a=aE(this,m),b=a.on,c=null==a.value[s]?r||(r=bs(n)):void 0;(b!==o||q!==c)&&(p=(o=b).copy()).on(t,q=c),a.on=p})):this.styleTween(a,(u=a,x=b+"",function(){var a=O(this,u);return a===x?null:a===v?w:w=y(v=a,b)}),c).on("end.style."+a,null)},styleTween:function(a,b,c){var d="style."+(a+="");if(arguments.length<2)return(d=this.tween(d))&&d._value;if(null==b)return this.tween(d,null);if("function"!=typeof b)throw Error();return this.tween(d,function(a,b,c){var d,e;function f(){var f=b.apply(this,arguments);return f!==e&&(d=(e=f)&&function(b){this.style.setProperty(a,f.call(this,b),c)}),d}return f._value=b,f}(a,b,null==c?"":c))},text:function(a){var b,c;return this.tween("text","function"==typeof a?(b=aN(this,"text",a),function(){var a=b(this);this.textContent=null==a?"":a}):(c=null==a?"":a+"",function(){this.textContent=c}))},textTween:function(a){var b="text";if(arguments.length<1)return(b=this.tween(b))&&b._value;if(null==a)return this.tween(b,null);if("function"!=typeof a)throw Error();return this.tween(b,function(a){var b,c;function d(){var d=a.apply(this,arguments);return d!==c&&(b=(c=d)&&function(a){this.textContent=d.call(this,a)}),b}return d._value=a,d}(a))},remove:function(){var a;return this.on("end.remove",(a=this._id,function(){var b=this.parentNode;for(var c in this.__transition)if(+c!==a)return;b&&b.removeChild(this)}))},tween:function(a,b){var c=this._id;if(a+="",arguments.length<2){for(var d,e=aF(this.node(),c).tween,f=0,g=e.length;f<g;++f)if((d=e[f]).name===a)return d.value;return null}return this.each((null==b?function(a,b){var c,d;return function(){var e=aE(this,a),f=e.tween;if(f!==c){d=c=f;for(var g=0,h=d.length;g<h;++g)if(d[g].name===b){(d=d.slice()).splice(g,1);break}}e.tween=d}}:function(a,b,c){var d,e;if("function"!=typeof c)throw Error();return function(){var f=aE(this,a),g=f.tween;if(g!==d){e=(d=g).slice();for(var h={name:b,value:c},i=0,j=e.length;i<j;++i)if(e[i].name===b){e[i]=h;break}i===j&&e.push(h)}f.tween=e}})(c,a,b))},delay:function(a){var b=this._id;return arguments.length?this.each(("function"==typeof a?function(a,b){return function(){aD(this,a).delay=+b.apply(this,arguments)}}:function(a,b){return b*=1,function(){aD(this,a).delay=b}})(b,a)):aF(this.node(),b).delay},duration:function(a){var b=this._id;return arguments.length?this.each(("function"==typeof a?function(a,b){return function(){aE(this,a).duration=+b.apply(this,arguments)}}:function(a,b){return b*=1,function(){aE(this,a).duration=b}})(b,a)):aF(this.node(),b).duration},ease:function(a){var b=this._id;return arguments.length?this.each(function(a,b){if("function"!=typeof b)throw Error();return function(){aE(this,a).ease=b}}(b,a)):aF(this.node(),b).ease},easeVarying:function(a){var b;if("function"!=typeof a)throw Error();return this.each((b=this._id,function(){var c=a.apply(this,arguments);if("function"!=typeof c)throw Error();aE(this,b).ease=c}))},end:function(){var a,b,c=this,d=c._id,e=c.size();return new Promise(function(f,g){var h={value:g},i={value:function(){0==--e&&f()}};c.each(function(){var c=aE(this,d),e=c.on;e!==a&&((b=(a=e).copy())._.cancel.push(h),b._.interrupt.push(h),b._.end.push(i)),c.on=b}),0===e&&f()})},[Symbol.iterator]:bv[Symbol.iterator]};var bw={time:null,delay:0,duration:250,ease:function(a){return((a*=2)<=1?a*a*a:(a-=2)*a*a+2)/2}};function bx(a,b,c){this.k=a,this.x=b,this.y=c}ag.prototype.interrupt=function(a){return this.each(function(){!function(a,b){var c,d,e,f=a.__transition,g=!0;if(f){for(e in b=null==b?null:b+"",f){if((c=f[e]).name!==b){g=!1;continue}d=c.state>2&&c.state<5,c.state=6,c.timer.stop(),c.on.call(d?"interrupt":"cancel",a,a.__data__,c.index,c.group),delete f[e]}g&&delete a.__transition}}(this,a)})},ag.prototype.transition=function(a){var b,c;a instanceof bu?(b=a._id,a=a._name):(b=++bt,(c=bw).time=as(),a=null==a?null:a+"");for(var d=this._groups,e=d.length,f=0;f<e;++f)for(var g,h=d[f],i=h.length,j=0;j<i;++j)(g=h[j])&&aC(g,a,b,j,h,c||function(a,b){for(var c;!(c=a.__transition)||!(c=c[b]);)if(!(a=a.parentNode))throw Error(`transition ${b} not found`);return c}(g,b));return new bu(d,this._parents,a,b)},bx.prototype={constructor:bx,scale:function(a){return 1===a?this:new bx(this.k*a,this.x,this.y)},translate:function(a,b){return 0===a&0===b?this:new bx(this.k,this.x+this.k*a,this.y+this.k*b)},apply:function(a){return[a[0]*this.k+this.x,a[1]*this.k+this.y]},applyX:function(a){return a*this.k+this.x},applyY:function(a){return a*this.k+this.y},invert:function(a){return[(a[0]-this.x)/this.k,(a[1]-this.y)/this.k]},invertX:function(a){return(a-this.x)/this.k},invertY:function(a){return(a-this.y)/this.k},rescaleX:function(a){return a.copy().domain(a.range().map(this.invertX,this).map(a.invert,a))},rescaleY:function(a){return a.copy().domain(a.range().map(this.invertY,this).map(a.invert,a))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new bx(1,0,0);bx.prototype;let by={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error003:a=>`Node type "${a}" not found. Using fallback type "default".`,error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error009:a=>`Marker type "${a}" doesn't exist.`,error008:(a,{id:b,sourceHandle:c,targetHandle:d})=>`Couldn't create edge for ${a} handle id: "${"source"===a?c:d}", edge id: ${b}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:a=>`Edge type "${a}" not found. Using fallback type "default".`,error012:a=>`Node with id "${a}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},bz=[[-1/0,-1/0],[1/0,1/0]],bA=["Enter"," ","Escape"],bB={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:a,x:b,y:c})=>`Moved selected node ${a}. New position, x: ${b}, y: ${c}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};!function(a){a.Strict="strict",a.Loose="loose"}(e||(e={})),function(a){a.Free="free",a.Vertical="vertical",a.Horizontal="horizontal"}(f||(f={})),function(a){a.Partial="partial",a.Full="full"}(g||(g={}));let bC={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};!function(a){a.Bezier="default",a.Straight="straight",a.Step="step",a.SmoothStep="smoothstep",a.SimpleBezier="simplebezier"}(h||(h={})),function(a){a.Arrow="arrow",a.ArrowClosed="arrowclosed"}(i||(i={})),function(a){a.Left="left",a.Top="top",a.Right="right",a.Bottom="bottom"}(j||(j={}));let bD={[j.Left]:j.Right,[j.Right]:j.Left,[j.Top]:j.Bottom,[j.Bottom]:j.Top};function bE(a){return null===a?null:a?"valid":"invalid"}let bF=a=>"id"in a&&"source"in a&&"target"in a,bG=a=>"id"in a&&"internals"in a&&!("source"in a)&&!("target"in a),bH=(a,b=[0,0])=>{let{width:c,height:d}=b5(a),e=a.origin??b,f=c*e[0],g=d*e[1];return{x:a.position.x-f,y:a.position.y-g}},bI=(a,b={})=>{if(0===a.size)return{x:0,y:0,width:0,height:0};let c={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return a.forEach(a=>{if(void 0===b.filter||b.filter(a)){let b=bU(a);c=bQ(c,b)}}),bS(c)},bJ=(a,b,[c,d,e]=[0,0,1],f=!1,g=!1)=>{let h={...b_(b,[c,d,e]),width:b.width/e,height:b.height/e},i=[];for(let b of a.values()){let{measured:a,selectable:c=!0,hidden:d=!1}=b;if(g&&!c||d)continue;let e=a.width??b.width??b.initialWidth??null,j=a.height??b.height??b.initialHeight??null,k=bW(h,bT(b)),l=(e??0)*(j??0),m=f&&k>0;(!b.internals.handleBounds||m||k>=l||b.dragging)&&i.push(b)}return i};async function bK({nodes:a,width:b,height:c,panZoom:d,minZoom:e,maxZoom:f},g){if(0===a.size)return Promise.resolve(!0);let h=b2(bI(function(a,b){let c=new Map,d=b?.nodes?new Set(b.nodes.map(a=>a.id)):null;return a.forEach(a=>{a.measured.width&&a.measured.height&&(b?.includeHiddenNodes||!a.hidden)&&(!d||d.has(a.id))&&c.set(a.id,a)}),c}(a,g)),b,c,g?.minZoom??e,g?.maxZoom??f,g?.padding??.1);return await d.setViewport(h,{duration:g?.duration,ease:g?.ease,interpolate:g?.interpolate}),Promise.resolve(!0)}async function bL({nodesToRemove:a=[],edgesToRemove:b=[],nodes:c,edges:d,onBeforeDelete:e}){let f=new Set(a.map(a=>a.id)),g=[];for(let a of c){if(!1===a.deletable)continue;let b=f.has(a.id),c=!b&&a.parentId&&g.find(b=>b.id===a.parentId);(b||c)&&g.push(a)}let h=new Set(b.map(a=>a.id)),i=d.filter(a=>!1!==a.deletable),j=((a,b)=>{let c=new Set;return a.forEach(a=>{c.add(a.id)}),b.filter(a=>c.has(a.source)||c.has(a.target))})(g,i);for(let a of i)h.has(a.id)&&!j.find(b=>b.id===a.id)&&j.push(a);if(!e)return{edges:j,nodes:g};let k=await e({nodes:g,edges:j});return"boolean"==typeof k?k?{edges:j,nodes:g}:{edges:[],nodes:[]}:k}let bM=(a,b=0,c=1)=>Math.min(Math.max(a,b),c),bN=(a={x:0,y:0},b,c)=>({x:bM(a.x,b[0][0],b[1][0]-(c?.width??0)),y:bM(a.y,b[0][1],b[1][1]-(c?.height??0))});function bO(a,b,c){let{width:d,height:e}=b5(c),{x:f,y:g}=c.internals.positionAbsolute;return bN(a,[[f,g],[f+d,g+e]],b)}let bP=(a,b,c)=>a<b?bM(Math.abs(a-b),1,b)/b:a>c?-bM(Math.abs(a-c),1,b)/b:0,bQ=(a,b)=>({x:Math.min(a.x,b.x),y:Math.min(a.y,b.y),x2:Math.max(a.x2,b.x2),y2:Math.max(a.y2,b.y2)}),bR=({x:a,y:b,width:c,height:d})=>({x:a,y:b,x2:a+c,y2:b+d}),bS=({x:a,y:b,x2:c,y2:d})=>({x:a,y:b,width:c-a,height:d-b}),bT=(a,b=[0,0])=>{let{x:c,y:d}=bG(a)?a.internals.positionAbsolute:bH(a,b);return{x:c,y:d,width:a.measured?.width??a.width??a.initialWidth??0,height:a.measured?.height??a.height??a.initialHeight??0}},bU=(a,b=[0,0])=>{let{x:c,y:d}=bG(a)?a.internals.positionAbsolute:bH(a,b);return{x:c,y:d,x2:c+(a.measured?.width??a.width??a.initialWidth??0),y2:d+(a.measured?.height??a.height??a.initialHeight??0)}},bV=(a,b)=>bS(bQ(bR(a),bR(b))),bW=(a,b)=>Math.ceil(Math.max(0,Math.min(a.x+a.width,b.x+b.width)-Math.max(a.x,b.x))*Math.max(0,Math.min(a.y+a.height,b.y+b.height)-Math.max(a.y,b.y))),bX=a=>bY(a.width)&&bY(a.height)&&bY(a.x)&&bY(a.y),bY=a=>!isNaN(a)&&isFinite(a),bZ=(a,b)=>{},b$=(a,b=[1,1])=>({x:b[0]*Math.round(a.x/b[0]),y:b[1]*Math.round(a.y/b[1])}),b_=({x:a,y:b},[c,d,e],f=!1,g=[1,1])=>{let h={x:(a-c)/e,y:(b-d)/e};return f?b$(h,g):h},b0=({x:a,y:b},[c,d,e])=>({x:a*e+c,y:b*e+d});function b1(a,b){if("number"==typeof a)return Math.floor((b-b/(1+a))*.5);if("string"==typeof a&&a.endsWith("px")){let b=parseFloat(a);if(!Number.isNaN(b))return Math.floor(b)}if("string"==typeof a&&a.endsWith("%")){let c=parseFloat(a);if(!Number.isNaN(c))return Math.floor(b*c*.01)}return console.error(`[React Flow] The padding value "${a}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}let b2=(a,b,c,d,e,f)=>{let g=function(a,b,c){if("string"==typeof a||"number"==typeof a){let d=b1(a,c),e=b1(a,b);return{top:d,right:e,bottom:d,left:e,x:2*e,y:2*d}}if("object"==typeof a){let d=b1(a.top??a.y??0,c),e=b1(a.bottom??a.y??0,c),f=b1(a.left??a.x??0,b),g=b1(a.right??a.x??0,b);return{top:d,right:g,bottom:e,left:f,x:f+g,y:d+e}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}(f,b,c),h=bM(Math.min((b-g.x)/a.width,(c-g.y)/a.height),d,e),i=a.x+a.width/2,j=a.y+a.height/2,k=b/2-i*h,l=c/2-j*h,m=function(a,b,c,d,e,f){let{x:g,y:h}=b0(a,[b,c,d]),{x:i,y:j}=b0({x:a.x+a.width,y:a.y+a.height},[b,c,d]);return{left:Math.floor(g),top:Math.floor(h),right:Math.floor(e-i),bottom:Math.floor(f-j)}}(a,k,l,h,b,c),n={left:Math.min(m.left-g.left,0),top:Math.min(m.top-g.top,0),right:Math.min(m.right-g.right,0),bottom:Math.min(m.bottom-g.bottom,0)};return{x:k-n.left+n.right,y:l-n.top+n.bottom,zoom:h}},b3=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0;function b4(a){return null!=a&&"parent"!==a}function b5(a){return{width:a.measured?.width??a.width??a.initialWidth??0,height:a.measured?.height??a.height??a.initialHeight??0}}function b6(a){return(a.measured?.width??a.width??a.initialWidth)!==void 0&&(a.measured?.height??a.height??a.initialHeight)!==void 0}function b7(a,b){if(a.size!==b.size)return!1;for(let c of a)if(!b.has(c))return!1;return!0}let b8=a=>({width:a.offsetWidth,height:a.offsetHeight}),b9=a=>a?.getRootNode?.()||window?.document,ca=["INPUT","SELECT","TEXTAREA"],cb=(a,b)=>{let c="clientX"in a,d=c?a.clientX:a.touches?.[0].clientX,e=c?a.clientY:a.touches?.[0].clientY;return{x:d-(b?.left??0),y:e-(b?.top??0)}},cc=(a,b,c,d,e)=>{let f=b.querySelectorAll(`.${a}`);return f&&f.length?Array.from(f).map(b=>{let f=b.getBoundingClientRect();return{id:b.getAttribute("data-handleid"),type:a,nodeId:e,position:b.getAttribute("data-handlepos"),x:(f.left-c.left)/d,y:(f.top-c.top)/d,...b8(b)}}):null};function cd({sourceX:a,sourceY:b,targetX:c,targetY:d,sourceControlX:e,sourceControlY:f,targetControlX:g,targetControlY:h}){let i=.125*a+.375*e+.375*g+.125*c,j=.125*b+.375*f+.375*h+.125*d,k=Math.abs(i-a),l=Math.abs(j-b);return[i,j,k,l]}function ce(a,b){return a>=0?.5*a:25*b*Math.sqrt(-a)}function cf({pos:a,x1:b,y1:c,x2:d,y2:e,c:f}){switch(a){case j.Left:return[b-ce(b-d,f),c];case j.Right:return[b+ce(d-b,f),c];case j.Top:return[b,c-ce(c-e,f)];case j.Bottom:return[b,c+ce(e-c,f)]}}function cg({sourceX:a,sourceY:b,sourcePosition:c=j.Bottom,targetX:d,targetY:e,targetPosition:f=j.Top,curvature:g=.25}){let[h,i]=cf({pos:c,x1:a,y1:b,x2:d,y2:e,c:g}),[k,l]=cf({pos:f,x1:d,y1:e,x2:a,y2:b,c:g}),[m,n,o,p]=cd({sourceX:a,sourceY:b,targetX:d,targetY:e,sourceControlX:h,sourceControlY:i,targetControlX:k,targetControlY:l});return[`M${a},${b} C${h},${i} ${k},${l} ${d},${e}`,m,n,o,p]}function ch({sourceX:a,sourceY:b,targetX:c,targetY:d}){let e=Math.abs(c-a)/2,f=Math.abs(d-b)/2;return[c<a?c+e:c-e,d<b?d+f:d-f,e,f]}let ci=(a,b)=>{let c;return a.source&&a.target?((a,b)=>b.some(b=>b.source===a.source&&b.target===a.target&&(b.sourceHandle===a.sourceHandle||!b.sourceHandle&&!a.sourceHandle)&&(b.targetHandle===a.targetHandle||!b.targetHandle&&!a.targetHandle)))(c=bF(a)?{...a}:{...a,id:(({source:a,sourceHandle:b,target:c,targetHandle:d})=>`xy-edge__${a}${b||""}-${c}${d||""}`)(a)},b)?b:(null===c.sourceHandle&&delete c.sourceHandle,null===c.targetHandle&&delete c.targetHandle,b.concat(c)):(bZ("006",by.error006()),b)};function cj({sourceX:a,sourceY:b,targetX:c,targetY:d}){let[e,f,g,h]=ch({sourceX:a,sourceY:b,targetX:c,targetY:d});return[`M ${a},${b}L ${c},${d}`,e,f,g,h]}let ck={[j.Left]:{x:-1,y:0},[j.Right]:{x:1,y:0},[j.Top]:{x:0,y:-1},[j.Bottom]:{x:0,y:1}},cl=({source:a,sourcePosition:b=j.Bottom,target:c})=>b===j.Left||b===j.Right?a.x<c.x?{x:1,y:0}:{x:-1,y:0}:a.y<c.y?{x:0,y:1}:{x:0,y:-1},cm=(a,b)=>Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2));function cn({sourceX:a,sourceY:b,sourcePosition:c=j.Bottom,targetX:d,targetY:e,targetPosition:f=j.Top,borderRadius:g=5,centerX:h,centerY:i,offset:k=20,stepPosition:l=.5}){let[m,n,o,p,q]=function({source:a,sourcePosition:b=j.Bottom,target:c,targetPosition:d=j.Top,center:e,offset:f,stepPosition:g}){let h,i,k=ck[b],l=ck[d],m={x:a.x+k.x*f,y:a.y+k.y*f},n={x:c.x+l.x*f,y:c.y+l.y*f},o=cl({source:m,sourcePosition:b,target:n}),p=0!==o.x?"x":"y",q=o[p],r=[],s={x:0,y:0},t={x:0,y:0},[,,u,v]=ch({sourceX:a.x,sourceY:a.y,targetX:c.x,targetY:c.y});if(k[p]*l[p]==-1){"x"===p?(h=e.x??m.x+(n.x-m.x)*g,i=e.y??(m.y+n.y)/2):(h=e.x??(m.x+n.x)/2,i=e.y??m.y+(n.y-m.y)*g);let a=[{x:h,y:m.y},{x:h,y:n.y}],b=[{x:m.x,y:i},{x:n.x,y:i}];r=k[p]===q?"x"===p?a:b:"x"===p?b:a}else{let e=[{x:m.x,y:n.y}],g=[{x:n.x,y:m.y}];if(r="x"===p?k.x===q?g:e:k.y===q?e:g,b===d){let b=Math.abs(a[p]-c[p]);if(b<=f){let d=Math.min(f-1,f-b);k[p]===q?s[p]=(m[p]>a[p]?-1:1)*d:t[p]=(n[p]>c[p]?-1:1)*d}}if(b!==d){let a="x"===p?"y":"x",b=k[p]===l[a],c=m[a]>n[a],d=m[a]<n[a];(1===k[p]&&(!b&&c||b&&d)||1!==k[p]&&(!b&&d||b&&c))&&(r="x"===p?e:g)}let j={x:m.x+s.x,y:m.y+s.y},o={x:n.x+t.x,y:n.y+t.y};Math.max(Math.abs(j.x-r[0].x),Math.abs(o.x-r[0].x))>=Math.max(Math.abs(j.y-r[0].y),Math.abs(o.y-r[0].y))?(h=(j.x+o.x)/2,i=r[0].y):(h=r[0].x,i=(j.y+o.y)/2)}return[[a,{x:m.x+s.x,y:m.y+s.y},...r,{x:n.x+t.x,y:n.y+t.y},c],h,i,u,v]}({source:{x:a,y:b},sourcePosition:c,target:{x:d,y:e},targetPosition:f,center:{x:h,y:i},offset:k,stepPosition:l});return[m.reduce((a,b,c)=>a+(c>0&&c<m.length-1?function(a,b,c,d){let e=Math.min(cm(a,b)/2,cm(b,c)/2,d),{x:f,y:g}=b;if(a.x===f&&f===c.x||a.y===g&&g===c.y)return`L${f} ${g}`;if(a.y===g){let b=a.x<c.x?-1:1,d=a.y<c.y?1:-1;return`L ${f+e*b},${g}Q ${f},${g} ${f},${g+e*d}`}let h=a.x<c.x?1:-1,i=a.y<c.y?-1:1;return`L ${f},${g+e*i}Q ${f},${g} ${f+e*h},${g}`}(m[c-1],b,m[c+1],g):`${0===c?"M":"L"}${b.x} ${b.y}`),""),n,o,p,q]}function co(a){return a&&!!(a.internals.handleBounds||a.handles?.length)&&!!(a.measured.width||a.width||a.initialWidth)}function cp(a){if(!a)return null;let b=[],c=[];for(let d of a)d.width=d.width??1,d.height=d.height??1,"source"===d.type?b.push(d):"target"===d.type&&c.push(d);return{source:b,target:c}}function cq(a,b,c=j.Left,d=!1){let e=(b?.x??0)+a.internals.positionAbsolute.x,f=(b?.y??0)+a.internals.positionAbsolute.y,{width:g,height:h}=b??b5(a);if(d)return{x:e+g/2,y:f+h/2};switch(b?.position??c){case j.Top:return{x:e+g/2,y:f};case j.Right:return{x:e+g,y:f+h/2};case j.Bottom:return{x:e+g/2,y:f+h};case j.Left:return{x:e,y:f+h/2}}}function cr(a,b){return a&&(b?a.find(a=>a.id===b):a[0])||null}function cs(a,b){if(!a)return"";if("string"==typeof a)return a;let c=b?`${b}__`:"";return`${c}${Object.keys(a).sort().map(b=>`${b}=${a[b]}`).join("&")}`}let ct={nodeOrigin:[0,0],nodeExtent:bz,elevateNodesOnSelect:!0,defaults:{}},cu={...ct,checkEquality:!0};function cv(a,b){let c={...a};for(let a in b)void 0!==b[a]&&(c[a]=b[a]);return c}function cw(a,b,c,d){let e=cv(cu,d),f=a.length>0,g=new Map(b),h=1e3*!!e?.elevateNodesOnSelect;for(let i of(b.clear(),c.clear(),a)){let a=g.get(i.id);if(e.checkEquality&&i===a?.internals.userNode)b.set(i.id,a);else{let c=bN(bH(i,e.nodeOrigin),b4(i.extent)?i.extent:e.nodeExtent,b5(i));a={...e.defaults,...i,measured:{width:i.measured?.width,height:i.measured?.height},internals:{positionAbsolute:c,handleBounds:function(a,b){if(!a.handles)return a.measured?b?.internals.handleBounds:void 0;let c=[],d=[];for(let b of a.handles){let e={id:b.id,width:b.width??1,height:b.height??1,nodeId:a.id,x:b.x,y:b.y,position:b.position,type:b.type};"source"===b.type?c.push(e):"target"===b.type&&d.push(e)}return{source:c,target:d}}(i,a),z:cy(i,h),userNode:i}},b.set(i.id,a)}void 0!==a.measured&&void 0!==a.measured.width&&void 0!==a.measured.height||a.hidden||(f=!1),i.parentId&&cx(a,b,c,d)}return f}function cx(a,b,c,d){let{elevateNodesOnSelect:e,nodeOrigin:f,nodeExtent:g}=cv(ct,d),h=a.parentId,i=b.get(h);if(!i)return void console.warn(`Parent node ${h} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);!function(a,b){if(!a.parentId)return;let c=b.get(a.parentId);c?c.set(a.id,a):b.set(a.parentId,new Map([[a.id,a]]))}(a,c);let{x:j,y:k,z:l}=function(a,b,c,d,e){let{x:f,y:g}=b.internals.positionAbsolute,h=b5(a),i=bH(a,c),j=b4(a.extent)?bN(i,a.extent,h):i,k=bN({x:f+j.x,y:g+j.y},d,h);"parent"===a.extent&&(k=bO(k,h,b));let l=cy(a,e),m=b.internals.z??0;return{x:k.x,y:k.y,z:m>=l?m+1:l}}(a,i,f,g,1e3*!!e),{positionAbsolute:m}=a.internals,n=j!==m.x||k!==m.y;(n||l!==a.internals.z)&&b.set(a.id,{...a,internals:{...a.internals,positionAbsolute:n?{x:j,y:k}:m,z:l}})}function cy(a,b){return(bY(a.zIndex)?a.zIndex:0)+(a.selected?b:0)}function cz(a,b,c,d=[0,0]){let e=[],f=new Map;for(let c of a){let a=b.get(c.parentId);if(!a)continue;let d=bV(f.get(c.parentId)?.expandedRect??bT(a),c.rect);f.set(c.parentId,{expandedRect:d,parent:a})}return f.size>0&&f.forEach(({expandedRect:b,parent:f},g)=>{let h=f.internals.positionAbsolute,i=b5(f),j=f.origin??d,k=b.x<h.x?Math.round(Math.abs(h.x-b.x)):0,l=b.y<h.y?Math.round(Math.abs(h.y-b.y)):0,m=Math.max(i.width,Math.round(b.width)),n=Math.max(i.height,Math.round(b.height)),o=(m-i.width)*j[0],p=(n-i.height)*j[1];(k>0||l>0||o||p)&&(e.push({id:g,type:"position",position:{x:f.position.x-k+o,y:f.position.y-l+p}}),c.get(g)?.forEach(b=>{a.some(a=>a.id===b.id)||e.push({id:b.id,type:"position",position:{x:b.position.x+k,y:b.position.y+l}})})),(i.width<b.width||i.height<b.height||k||l)&&e.push({id:g,type:"dimensions",setAttributes:!0,dimensions:{width:m+(k?j[0]*k-o:0),height:n+(l?j[1]*l-p:0)}})}),e}async function cA({delta:a,panZoom:b,transform:c,translateExtent:d,width:e,height:f}){if(!b||!a.x&&!a.y)return Promise.resolve(!1);let g=await b.setViewportConstrained({x:c[0]+a.x,y:c[1]+a.y,zoom:c[2]},[[0,0],[e,f]],d);return Promise.resolve(!!g&&(g.x!==c[0]||g.y!==c[1]||g.k!==c[2]))}function cB(a,b,c,d,e,f){let g=e,h=d.get(g)||new Map;d.set(g,h.set(c,b)),g=`${e}-${a}`;let i=d.get(g)||new Map;if(d.set(g,i.set(c,b)),f){g=`${e}-${a}-${f}`;let h=d.get(g)||new Map;d.set(g,h.set(c,b))}}function cC(a,b,c){for(let d of(a.clear(),b.clear(),c)){let{source:c,target:e,sourceHandle:f=null,targetHandle:g=null}=d,h={edgeId:d.id,source:c,target:e,sourceHandle:f,targetHandle:g},i=`${c}-${f}--${e}-${g}`;cB("source",h,`${e}-${g}--${c}-${f}`,a,c,f),cB("target",h,i,a,e,g),b.set(d.id,d)}}function cD(a,b,c,d,e,f=!1){let g=d.get(a);if(!g)return null;let h="strict"===e?g.internals.handleBounds?.[b]:[...g.internals.handleBounds?.source??[],...g.internals.handleBounds?.target??[]],i=(c?h?.find(a=>a.id===c):h?.[0])??null;return i&&f?{...i,...cq(g,i,i.position,!0)}:i}function cE(a,b){return a?a:b?.classList.contains("target")?"target":b?.classList.contains("source")?"source":null}let cF=()=>!0;function cG(a,{handle:b,connectionMode:c,fromNodeId:d,fromHandleId:f,fromType:g,doc:h,lib:i,flowId:j,isValidConnection:k=cF,nodeLookup:l}){let m="target"===g,n=b?h.querySelector(`.${i}-flow__handle[data-id="${j}-${b?.nodeId}-${b?.id}-${b?.type}"]`):null,{x:o,y:p}=cb(a),q=h.elementFromPoint(o,p),r=q?.classList.contains(`${i}-flow__handle`)?q:n,s={handleDomNode:r,isValid:!1,connection:null,toHandle:null};if(r){let a=cE(void 0,r),b=r.getAttribute("data-nodeid"),g=r.getAttribute("data-handleid"),h=r.classList.contains("connectable"),i=r.classList.contains("connectableend");if(!b||!a)return s;let j={source:m?b:d,sourceHandle:m?g:f,target:m?d:b,targetHandle:m?f:g};s.connection=j,s.isValid=h&&i&&(c===e.Strict?m&&"source"===a||!m&&"target"===a:b!==d||g!==f)&&k(j),s.toHandle=cD(b,a,g,l,c,!0)}return s}let cH={onPointerDown:function(a,{connectionMode:b,connectionRadius:c,handleId:d,nodeId:e,edgeUpdaterType:f,isTarget:g,domNode:h,nodeLookup:i,lib:k,autoPanOnConnect:l,flowId:m,panBy:n,cancelConnection:o,onConnectStart:p,onConnect:q,onConnectEnd:r,isValidConnection:s=cF,onReconnectEnd:t,updateConnection:u,getTransform:v,getFromHandle:w,autoPanSpeed:x,dragThreshold:y=1,handleDomNode:z}){let A,B=b9(a.target),C=0,{x:D,y:E}=cb(a),F=cE(f,z),G=h?.getBoundingClientRect(),H=!1;if(!G||!F)return;let I=cD(e,F,d,i,b);if(!I)return;let J=cb(a,G),K=!1,L=null,M=!1,N=null,O={...I,nodeId:e,type:F,position:I.position},P=i.get(e),Q={inProgress:!0,isValid:null,from:cq(P,O,j.Left,!0),fromHandle:O,fromPosition:O.position,fromNode:P,to:J,toHandle:null,toPosition:bD[O.position],toNode:null};function R(){H=!0,u(Q),p?.(a,{nodeId:e,handleId:d,handleType:F})}function S(a){var f,h;let j;if(!H){let{x:b,y:c}=cb(a),d=b-D,e=c-E;if(!(d*d+e*e>y*y))return;R()}if(!w()||!O)return void T(a);let o=v();A=function(a,b,c,d){let e=[],f=1/0;for(let g of function(a,b,c){let d=[],e={x:a.x-c,y:a.y-c,width:2*c,height:2*c};for(let a of b.values())bW(e,bT(a))>0&&d.push(a);return d}(a,c,b+250))for(let c of[...g.internals.handleBounds?.source??[],...g.internals.handleBounds?.target??[]]){if(d.nodeId===c.nodeId&&d.type===c.type&&d.id===c.id)continue;let{x:h,y:i}=cq(g,c,c.position,!0),j=Math.sqrt(Math.pow(h-a.x,2)+Math.pow(i-a.y,2));j>b||(j<f?(e=[{...c,x:h,y:i}],f=j):j===f&&e.push({...c,x:h,y:i}))}if(!e.length)return null;if(e.length>1){let a="source"===d.type?"target":"source";return e.find(b=>b.type===a)??e[0]}return e[0]}(b_(J=cb(a,G),o,!1,[1,1]),c,i,O),K||(!function a(){if(!l||!G)return;let[b,c]=((a,b,c=15,d=40)=>[bP(a.x,d,b.width-d)*c,bP(a.y,d,b.height-d)*c])(J,G,x);n({x:b,y:c}),C=requestAnimationFrame(a)}(),K=!0);let p=cG(a,{handle:A,connectionMode:b,fromNodeId:e,fromHandleId:d,fromType:g?"target":"source",isValidConnection:s,doc:B,lib:k,flowId:m,nodeLookup:i});N=p.handleDomNode,L=p.connection,f=!!A,h=p.isValid,j=null,h?j=!0:f&&!h&&(j=!1),M=j;let q={...Q,isValid:M,to:p.toHandle&&M?b0({x:p.toHandle.x,y:p.toHandle.y},o):J,toHandle:p.toHandle,toPosition:M&&p.toHandle?p.toHandle.position:bD[O.position],toNode:p.toHandle?i.get(p.toHandle.nodeId):null};M&&A&&Q.toHandle&&q.toHandle&&Q.toHandle.type===q.toHandle.type&&Q.toHandle.nodeId===q.toHandle.nodeId&&Q.toHandle.id===q.toHandle.id&&Q.to.x===q.to.x&&Q.to.y===q.to.y||(u(q),Q=q)}function T(a){if(!("touches"in a)||!(a.touches.length>0)){if(H){(A||N)&&L&&M&&q?.(L);let{inProgress:b,...c}=Q,d={...c,toPosition:Q.toHandle?Q.toPosition:null};r?.(a,d),f&&t?.(a,d)}o(),cancelAnimationFrame(C),K=!1,M=!1,L=null,N=null,B.removeEventListener("mousemove",S),B.removeEventListener("mouseup",T),B.removeEventListener("touchmove",S),B.removeEventListener("touchend",T)}}0===y&&R(),B.addEventListener("mousemove",S),B.addEventListener("mouseup",T),B.addEventListener("touchmove",S),B.addEventListener("touchend",T)},isValid:cG};!function(a){a.Line="line",a.Handle="handle"}(k||(k={}));var cI=c(93350);let cJ=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),c.clear()}},g=b=a(d,e,f);return f},{useDebugValue:cK}=n,{useSyncExternalStoreWithSelector:cL}=cI,cM=a=>a;function cN(a,b=cM,c){let d=cL(a.subscribe,a.getState,a.getServerState||a.getInitialState,b,c);return cK(d),d}let cO=(a,b)=>{let c=(a=>a?cJ(a):cJ)(a),d=(a,d=b)=>cN(c,a,d);return Object.assign(d,c),d};function cP(a,b){if(Object.is(a,b))return!0;if("object"!=typeof a||null===a||"object"!=typeof b||null===b)return!1;if(a instanceof Map&&b instanceof Map){if(a.size!==b.size)return!1;for(let[c,d]of a)if(!Object.is(d,b.get(c)))return!1;return!0}if(a instanceof Set&&b instanceof Set){if(a.size!==b.size)return!1;for(let c of a)if(!b.has(c))return!1;return!0}let c=Object.keys(a);if(c.length!==Object.keys(b).length)return!1;for(let d of c)if(!Object.prototype.hasOwnProperty.call(b,d)||!Object.is(a[d],b[d]))return!1;return!0}c(23312);let cQ=(0,n.createContext)(null),cR=cQ.Provider,cS=by.error001();function cT(a,b){let c=(0,n.useContext)(cQ);if(null===c)throw Error(cS);return cN(c,a,b)}function cU(){let a=(0,n.useContext)(cQ);if(null===a)throw Error(cS);return(0,n.useMemo)(()=>({getState:a.getState,setState:a.setState,subscribe:a.subscribe}),[a])}let cV={display:"none"},cW={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},cX="react-flow__node-desc",cY="react-flow__edge-desc",cZ=a=>a.ariaLiveMessage,c$=a=>a.ariaLabelConfig;function c_({rfId:a}){let b=cT(cZ);return(0,m.jsx)("div",{id:`react-flow__aria-live-${a}`,"aria-live":"assertive","aria-atomic":"true",style:cW,children:b})}function c0({rfId:a,disableKeyboardA11y:b}){let c=cT(c$);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{id:`${cX}-${a}`,style:cV,children:b?c["node.a11yDescription.default"]:c["node.a11yDescription.keyboardDisabled"]}),(0,m.jsx)("div",{id:`${cY}-${a}`,style:cV,children:c["edge.a11yDescription.default"]}),!b&&(0,m.jsx)(c_,{rfId:a})]})}let c1=(0,n.forwardRef)(({position:a="top-left",children:b,className:c,style:d,...e},f)=>{let g=`${a}`.split("-");return(0,m.jsx)("div",{className:p(["react-flow__panel",c,...g]),style:d,ref:f,...e,children:b})});function c2({proOptions:a,position:b="bottom-right"}){return a?.hideAttribution?null:(0,m.jsx)(c1,{position:b,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,m.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}c1.displayName="Panel";let c3=a=>{let b=[],c=[];for(let[,c]of a.nodeLookup)c.selected&&b.push(c.internals.userNode);for(let[,b]of a.edgeLookup)b.selected&&c.push(b);return{selectedNodes:b,selectedEdges:c}},c4=a=>a.id;function c5(a,b){return cP(a.selectedNodes.map(c4),b.selectedNodes.map(c4))&&cP(a.selectedEdges.map(c4),b.selectedEdges.map(c4))}function c6({onSelectionChange:a}){cU();let{selectedNodes:b,selectedEdges:c}=cT(c3,c5);return null}let c7=a=>!!a.onSelectionChangeHandlers;function c8({onSelectionChange:a}){let b=cT(c7);return a||b?(0,m.jsx)(c6,{onSelectionChange:a}):null}let c9=[0,0],da={x:0,y:0,zoom:1},db=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig","rfId"],dc=a=>({setNodes:a.setNodes,setEdges:a.setEdges,setMinZoom:a.setMinZoom,setMaxZoom:a.setMaxZoom,setTranslateExtent:a.setTranslateExtent,setNodeExtent:a.setNodeExtent,reset:a.reset,setDefaultNodesAndEdges:a.setDefaultNodesAndEdges,setPaneClickDistance:a.setPaneClickDistance}),dd={translateExtent:bz,nodeOrigin:c9,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function de(a){let{setNodes:b,setEdges:c,setMinZoom:d,setMaxZoom:e,setTranslateExtent:f,setNodeExtent:g,reset:h,setDefaultNodesAndEdges:i,setPaneClickDistance:j}=cT(dc,cP),k=cU(),l=(0,n.useRef)(dd);return(0,n.useEffect)(()=>{for(let h of db){let i=a[h];if(i!==l.current[h]&&void 0!==a[h])if("nodes"===h)b(i);else if("edges"===h)c(i);else if("minZoom"===h)d(i);else if("maxZoom"===h)e(i);else if("translateExtent"===h)f(i);else if("nodeExtent"===h)g(i);else if("paneClickDistance"===h)j(i);else if("ariaLabelConfig"===h)k.setState({ariaLabelConfig:{...bB,...i||{}}});else"fitView"===h?k.setState({fitViewQueued:i}):"fitViewOptions"===h?k.setState({fitViewOptions:i}):k.setState({[h]:i})}l.current=a},db.map(b=>a[b])),null}let df="undefined"!=typeof document?document:null;function dg(a=null,b={target:df,actInsideInputWithModifier:!0}){let[c,d]=(0,n.useState)(!1);(0,n.useRef)(!1),(0,n.useRef)(new Set([]));let[e,f]=(0,n.useMemo)(()=>{if(null!==a){let b=(Array.isArray(a)?a:[a]).filter(a=>"string"==typeof a).map(a=>a.replace("+","\n").replace("\n\n","\n+").split("\n")),c=b.reduce((a,b)=>a.concat(...b),[]);return[b,c]}return[[],[]]},[a]);return c}function dh(a,b){let c=[],d=new Map,e=[];for(let b of a)if("add"===b.type){e.push(b);continue}else if("remove"===b.type||"replace"===b.type)d.set(b.id,[b]);else{let a=d.get(b.id);a?a.push(b):d.set(b.id,[b])}for(let a of b){let b=d.get(a.id);if(!b){c.push(a);continue}if("remove"===b[0].type)continue;if("replace"===b[0].type){c.push({...b[0].item});continue}let e={...a};for(let a of b){var f=a,g=e;switch(f.type){case"select":g.selected=f.selected;break;case"position":void 0!==f.position&&(g.position=f.position),void 0!==f.dragging&&(g.dragging=f.dragging);break;case"dimensions":void 0!==f.dimensions&&(g.measured??={},g.measured.width=f.dimensions.width,g.measured.height=f.dimensions.height,f.setAttributes&&((!0===f.setAttributes||"width"===f.setAttributes)&&(g.width=f.dimensions.width),(!0===f.setAttributes||"height"===f.setAttributes)&&(g.height=f.dimensions.height))),"boolean"==typeof f.resizing&&(g.resizing=f.resizing)}}c.push(e)}return e.length&&e.forEach(a=>{void 0!==a.index?c.splice(a.index,0,{...a.item}):c.push({...a.item})}),c}function di(a,b){return{id:a,type:"select",selected:b}}function dj(a,b=new Set,c=!1){let d=[];for(let[e,f]of a){let a=b.has(e);(void 0!==f.selected||a)&&f.selected!==a&&(c&&(f.selected=a),d.push(di(f.id,a)))}return d}function dk({items:a=[],lookup:b}){let c=[],d=new Map(a.map(a=>[a.id,a]));for(let[d,e]of a.entries()){let a=b.get(e.id),f=a?.internals?.userNode??a;void 0!==f&&f!==e&&c.push({id:e.id,item:e,type:"replace"}),void 0===f&&c.push({item:e,type:"add",index:d})}for(let[a]of b)void 0===d.get(a)&&c.push({id:a,type:"remove"});return c}function dl(a){return{id:a.id,type:"remove"}}let dm=a=>(a=>"id"in a&&"position"in a&&!("source"in a)&&!("target"in a))(a);function dn(a){return(0,n.forwardRef)(a)}let dp=n.useEffect;function dq(a){let[b,c]=(0,n.useState)(BigInt(0)),[d]=(0,n.useState)(()=>{var a;let b;return a=()=>c(a=>a+BigInt(1)),b=[],{get:()=>b,reset:()=>{b=[]},push:c=>{b.push(c),a()}}});return dp(()=>{let b=d.get();b.length&&(a(b),d.reset())},[b]),d}let dr=(0,n.createContext)(null);function ds({children:a}){let b=cU(),c=dq((0,n.useCallback)(a=>{let{nodes:c=[],setNodes:d,hasDefaultNodes:e,onNodesChange:f,nodeLookup:g,fitViewQueued:h}=b.getState(),i=c;for(let b of a)i="function"==typeof b?b(i):b;let j=dk({items:i,lookup:g});e&&d(i),j.length>0?f?.(j):h&&window.requestAnimationFrame(()=>{let{fitViewQueued:a,nodes:c,setNodes:d}=b.getState();a&&d(c)})},[])),d=dq((0,n.useCallback)(a=>{let{edges:c=[],setEdges:d,hasDefaultEdges:e,onEdgesChange:f,edgeLookup:g}=b.getState(),h=c;for(let b of a)h="function"==typeof b?b(h):b;e?d(h):f&&f(dk({items:h,lookup:g}))},[])),e=(0,n.useMemo)(()=>({nodeQueue:c,edgeQueue:d}),[]);return(0,m.jsx)(dr.Provider,{value:e,children:a})}let dt=a=>!!a.panZoom;function du(){let a=(()=>{let a=cU();return(0,n.useMemo)(()=>({zoomIn:b=>{let{panZoom:c}=a.getState();return c?c.scaleBy(1.2,{duration:b?.duration}):Promise.resolve(!1)},zoomOut:b=>{let{panZoom:c}=a.getState();return c?c.scaleBy(1/1.2,{duration:b?.duration}):Promise.resolve(!1)},zoomTo:(b,c)=>{let{panZoom:d}=a.getState();return d?d.scaleTo(b,{duration:c?.duration}):Promise.resolve(!1)},getZoom:()=>a.getState().transform[2],setViewport:async(b,c)=>{let{transform:[d,e,f],panZoom:g}=a.getState();return g?(await g.setViewport({x:b.x??d,y:b.y??e,zoom:b.zoom??f},c),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{let[b,c,d]=a.getState().transform;return{x:b,y:c,zoom:d}},setCenter:async(b,c,d)=>a.getState().setCenter(b,c,d),fitBounds:async(b,c)=>{let{width:d,height:e,minZoom:f,maxZoom:g,panZoom:h}=a.getState(),i=b2(b,d,e,f,g,c?.padding??.1);return h?(await h.setViewport(i,{duration:c?.duration,ease:c?.ease,interpolate:c?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(b,c={})=>{let{transform:d,snapGrid:e,snapToGrid:f,domNode:g}=a.getState();if(!g)return b;let{x:h,y:i}=g.getBoundingClientRect(),j={x:b.x-h,y:b.y-i},k=c.snapGrid??e;return b_(j,d,c.snapToGrid??f,k)},flowToScreenPosition:b=>{let{transform:c,domNode:d}=a.getState();if(!d)return b;let{x:e,y:f}=d.getBoundingClientRect(),g=b0(b,c);return{x:g.x+e,y:g.y+f}}}),[])})(),b=cU(),c=function(){let a=(0,n.useContext)(dr);if(!a)throw Error("useBatchContext must be used within a BatchProvider");return a}(),d=cT(dt),e=(0,n.useMemo)(()=>{let a=a=>b.getState().nodeLookup.get(a),d=a=>{c.nodeQueue.push(a)},e=a=>{c.edgeQueue.push(a)},f=a=>{let{nodeLookup:c,nodeOrigin:d}=b.getState(),e=dm(a)?a:c.get(a.id),f=e.parentId?function(a,b={width:0,height:0},c,d,e){let f={...a},g=d.get(c);if(g){let a=g.origin||e;f.x+=g.internals.positionAbsolute.x-(b.width??0)*a[0],f.y+=g.internals.positionAbsolute.y-(b.height??0)*a[1]}return f}(e.position,e.measured,e.parentId,c,d):e.position;return bT({...e,position:f,width:e.measured?.width??e.width,height:e.measured?.height??e.height})},g=(a,b,c={replace:!1})=>{d(d=>d.map(d=>{if(d.id===a){let a="function"==typeof b?b(d):b;return c.replace&&dm(a)?a:{...d,...a}}return d}))},h=(a,b,c={replace:!1})=>{e(d=>d.map(d=>{if(d.id===a){let a="function"==typeof b?b(d):b;return c.replace&&bF(a)?a:{...d,...a}}return d}))};return{getNodes:()=>b.getState().nodes.map(a=>({...a})),getNode:b=>a(b)?.internals.userNode,getInternalNode:a,getEdges:()=>{let{edges:a=[]}=b.getState();return a.map(a=>({...a}))},getEdge:a=>b.getState().edgeLookup.get(a),setNodes:d,setEdges:e,addNodes:a=>{let b=Array.isArray(a)?a:[a];c.nodeQueue.push(a=>[...a,...b])},addEdges:a=>{let b=Array.isArray(a)?a:[a];c.edgeQueue.push(a=>[...a,...b])},toObject:()=>{let{nodes:a=[],edges:c=[],transform:d}=b.getState(),[e,f,g]=d;return{nodes:a.map(a=>({...a})),edges:c.map(a=>({...a})),viewport:{x:e,y:f,zoom:g}}},deleteElements:async({nodes:a=[],edges:c=[]})=>{let{nodes:d,edges:e,onNodesDelete:f,onEdgesDelete:g,triggerNodeChanges:h,triggerEdgeChanges:i,onDelete:j,onBeforeDelete:k}=b.getState(),{nodes:l,edges:m}=await bL({nodesToRemove:a,edgesToRemove:c,nodes:d,edges:e,onBeforeDelete:k}),n=m.length>0,o=l.length>0;if(n){let a=m.map(dl);g?.(m),i(a)}if(o){let a=l.map(dl);f?.(l),h(a)}return(o||n)&&j?.({nodes:l,edges:m}),{deletedNodes:l,deletedEdges:m}},getIntersectingNodes:(a,c=!0,d)=>{let e=bX(a),g=e?a:f(a),h=void 0!==d;return g?(d||b.getState().nodes).filter(d=>{let f=b.getState().nodeLookup.get(d.id);if(f&&!e&&(d.id===a.id||!f.internals.positionAbsolute))return!1;let i=bT(h?d:f),j=bW(i,g);return c&&j>0||j>=i.width*i.height||j>=g.width*g.height}):[]},isNodeIntersecting:(a,b,c=!0)=>{let d=bX(a)?a:f(a);if(!d)return!1;let e=bW(d,b);return c&&e>0||e>=b.width*b.height||e>=d.width*d.height},updateNode:g,updateNodeData:(a,b,c={replace:!1})=>{g(a,a=>{let d="function"==typeof b?b(a):b;return c.replace?{...a,data:d}:{...a,data:{...a.data,...d}}},c)},updateEdge:h,updateEdgeData:(a,b,c={replace:!1})=>{h(a,a=>{let d="function"==typeof b?b(a):b;return c.replace?{...a,data:d}:{...a,data:{...a.data,...d}}},c)},getNodesBounds:a=>{let{nodeLookup:c,nodeOrigin:d}=b.getState();return((a,b={nodeOrigin:[0,0]})=>0===a.length?{x:0,y:0,width:0,height:0}:bS(a.reduce((a,c)=>{let d="string"==typeof c,e=b.nodeLookup||d?void 0:c;return b.nodeLookup&&(e=d?b.nodeLookup.get(c):bG(c)?c:b.nodeLookup.get(c.id)),bQ(a,e?bU(e,b.nodeOrigin):{x:0,y:0,x2:0,y2:0})},{x:1/0,y:1/0,x2:-1/0,y2:-1/0})))(a,{nodeLookup:c,nodeOrigin:d})},getHandleConnections:({type:a,id:c,nodeId:d})=>Array.from(b.getState().connectionLookup.get(`${d}-${a}${c?`-${c}`:""}`)?.values()??[]),getNodeConnections:({type:a,handleId:c,nodeId:d})=>Array.from(b.getState().connectionLookup.get(`${d}${a?c?`-${a}-${c}`:`-${a}`:""}`)?.values()??[]),fitView:async a=>{let d,e,f=b.getState().fitViewResolver??{promise:new Promise((a,b)=>{d=a,e=b}),resolve:d,reject:e};return b.setState({fitViewQueued:!0,fitViewOptions:a,fitViewResolver:f}),c.nodeQueue.push(a=>[...a]),f.promise}}},[]);return(0,n.useMemo)(()=>({...e,...a,viewportInitialized:d}),[d])}let dv=void 0,dw={position:"absolute",width:"100%",height:"100%",top:0,left:0},dx=a=>({userSelectionActive:a.userSelectionActive,lib:a.lib,connectionInProgress:a.connection.inProgress});function dy({onPaneContextMenu:a,zoomOnScroll:b=!0,zoomOnPinch:c=!0,panOnScroll:d=!1,panOnScrollSpeed:e=.5,panOnScrollMode:g=f.Free,zoomOnDoubleClick:h=!0,panOnDrag:i=!0,defaultViewport:j,translateExtent:k,minZoom:l,maxZoom:o,zoomActivationKeyCode:p,preventScrolling:q=!0,children:r,noWheelClassName:s,noPanClassName:t,onViewportChange:u,isControlledViewport:v,paneClickDistance:w}){let x=cU(),y=(0,n.useRef)(null),{userSelectionActive:z,lib:A,connectionInProgress:B}=cT(dx,cP);return dg(p),(0,n.useRef)(),cU(),(0,n.useCallback)(a=>{u?.({x:a[0],y:a[1],zoom:a[2]}),v||x.setState({transform:a})},[u,v]),(0,m.jsx)("div",{className:"react-flow__renderer",ref:y,style:dw,children:r})}let dz=a=>({userSelectionActive:a.userSelectionActive,userSelectionRect:a.userSelectionRect});function dA(){let{userSelectionActive:a,userSelectionRect:b}=cT(dz,cP);return a&&b?(0,m.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:b.width,height:b.height,transform:`translate(${b.x}px, ${b.y}px)`}}):null}let dB=(a,b)=>c=>{c.target===b.current&&a?.(c)},dC=a=>({userSelectionActive:a.userSelectionActive,elementsSelectable:a.elementsSelectable,connectionInProgress:a.connection.inProgress,dragging:a.paneDragging});function dD({isSelecting:a,selectionKeyPressed:b,selectionMode:c=g.Full,panOnDrag:d,selectionOnDrag:e,onSelectionStart:f,onSelectionEnd:h,onPaneClick:i,onPaneContextMenu:j,onPaneScroll:k,onPaneMouseEnter:l,onPaneMouseMove:o,onPaneMouseLeave:q,children:r}){let s=cU(),{userSelectionActive:t,elementsSelectable:u,dragging:v,connectionInProgress:w}=cT(dC,cP),x=u&&(a||t),y=(0,n.useRef)(null),z=(0,n.useRef)(),A=(0,n.useRef)(new Set),B=(0,n.useRef)(new Set),C=(0,n.useRef)(!1),D=(0,n.useRef)(!1),E=a=>{if(C.current||w){C.current=!1;return}i?.(a),s.getState().resetSelectedElements(),s.setState({nodesSelectionActive:!1})},F=!0===d||Array.isArray(d)&&d.includes(0);return(0,m.jsxs)("div",{className:p(["react-flow__pane",{draggable:F,dragging:v,selection:a}]),onClick:x?void 0:dB(E,y),onContextMenu:dB(a=>{if(Array.isArray(d)&&d?.includes(2))return void a.preventDefault();j?.(a)},y),onWheel:dB(k?a=>k(a):void 0,y),onPointerEnter:x?void 0:l,onPointerDown:x?b=>{let{resetSelectedElements:c,domNode:d}=s.getState();if(z.current=d?.getBoundingClientRect(),!u||!a||0!==b.button||b.target!==y.current||!z.current)return;b.target?.setPointerCapture?.(b.pointerId),D.current=!0,C.current=!1;let{x:e,y:g}=cb(b.nativeEvent,z.current);c(),s.setState({userSelectionRect:{width:0,height:0,startX:e,startY:g,x:e,y:g}}),f?.(b)}:o,onPointerMove:x?a=>{let{userSelectionRect:b,transform:d,nodeLookup:e,edgeLookup:f,connectionLookup:h,triggerNodeChanges:i,triggerEdgeChanges:j,defaultEdgeOptions:k}=s.getState();if(!z.current||!b)return;C.current=!0;let{x:l,y:m}=cb(a.nativeEvent,z.current),{startX:n,startY:o}=b,p={startX:n,startY:o,x:l<n?l:n,y:m<o?m:o,width:Math.abs(l-n),height:Math.abs(m-o)},q=A.current,r=B.current;A.current=new Set(bJ(e,p,d,c===g.Partial,!0).map(a=>a.id)),B.current=new Set;let t=k?.selectable??!0;for(let a of A.current){let b=h.get(a);if(b)for(let{edgeId:a}of b.values()){let b=f.get(a);b&&(b.selectable??t)&&B.current.add(a)}}b7(q,A.current)||i(dj(e,A.current,!0)),b7(r,B.current)||j(dj(f,B.current)),s.setState({userSelectionRect:p,userSelectionActive:!0,nodesSelectionActive:!1})}:o,onPointerUp:x?a=>{if(0!==a.button||!D.current)return;a.target?.releasePointerCapture?.(a.pointerId);let{userSelectionRect:c}=s.getState();!t&&c&&a.target===y.current&&E?.(a),s.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:A.current.size>0}),h?.(a),(b||e)&&(C.current=!1),D.current=!1}:void 0,onPointerLeave:q,ref:y,style:dw,children:[r,(0,m.jsx)(dA,{})]})}function dE({id:a,store:b,unselect:c=!1,nodeRef:d}){let{addSelectedNodes:e,unselectNodesAndEdges:f,multiSelectionActive:g,nodeLookup:h,onError:i}=b.getState(),j=h.get(a);if(!j)return void i?.("012",by.error012(a));b.setState({nodesSelectionActive:!1}),j.selected?(c||j.selected&&g)&&(f({nodes:[j],edges:[]}),requestAnimationFrame(()=>d?.current?.blur())):e([a])}function dF({nodeRef:a,disabled:b=!1,noDragClassName:c,handleSelector:d,nodeId:e,isSelectable:f,nodeClickDistance:g}){cU();let[h,i]=(0,n.useState)(!1);return(0,n.useRef)(),h}function dG(){let a=cU();return(0,n.useCallback)(b=>{let{nodeExtent:c,snapToGrid:d,snapGrid:e,nodesDraggable:f,onError:g,updateNodePositions:h,nodeLookup:i,nodeOrigin:j}=a.getState(),k=new Map,l=a=>a.selected&&(a.draggable||f&&void 0===a.draggable),m=d?e[0]:5,n=d?e[1]:5,o=b.direction.x*m*b.factor,p=b.direction.y*n*b.factor;for(let[,a]of i){if(!l(a))continue;let b={x:a.internals.positionAbsolute.x+o,y:a.internals.positionAbsolute.y+p};d&&(b=b$(b,e));let{position:f,positionAbsolute:h}=function({nodeId:a,nextPosition:b,nodeLookup:c,nodeOrigin:d=[0,0],nodeExtent:e,onError:f}){let g=c.get(a),h=g.parentId?c.get(g.parentId):void 0,{x:i,y:j}=h?h.internals.positionAbsolute:{x:0,y:0},k=g.origin??d,l=g.extent||e;if("parent"!==g.extent||g.expandParent)h&&b4(g.extent)&&(l=[[g.extent[0][0]+i,g.extent[0][1]+j],[g.extent[1][0]+i,g.extent[1][1]+j]]);else if(h){let a=h.measured.width,b=h.measured.height;a&&b&&(l=[[i,j],[i+a,j+b]])}else f?.("005",by.error005());let m=b4(l)?bN(b,l,g.measured):b;return(void 0===g.measured.width||void 0===g.measured.height)&&f?.("015",by.error015()),{position:{x:m.x-i+(g.measured.width??0)*k[0],y:m.y-j+(g.measured.height??0)*k[1]},positionAbsolute:m}}({nodeId:a.id,nextPosition:b,nodeLookup:i,nodeExtent:c,nodeOrigin:j,onError:g});a.position=f,a.internals.positionAbsolute=h,k.set(a.id,a)}h(k)},[])}let dH=(0,n.createContext)(null),dI=dH.Provider;dH.Consumer;let dJ=a=>({connectOnClick:a.connectOnClick,noPanClassName:a.noPanClassName,rfId:a.rfId}),dK=(0,n.memo)(dn(function({type:a="source",position:b=j.Top,isValidConnection:c,isConnectable:d=!0,isConnectableStart:f=!0,isConnectableEnd:g=!0,id:h,onConnect:i,children:k,className:l,onMouseDown:o,onTouchStart:q,...r},s){let t=h||null,u="target"===a,v=cU(),w=(0,n.useContext)(dH),{connectOnClick:x,noPanClassName:y,rfId:z}=cT(dJ,cP),{connectingFrom:A,connectingTo:B,clickConnecting:C,isPossibleEndHandle:D,connectionInProcess:E,clickConnectionInProcess:F,valid:G}=cT(b=>{let{connectionClickStartHandle:c,connectionMode:d,connection:f}=b,{fromHandle:g,toHandle:h,isValid:i}=f,j=h?.nodeId===w&&h?.id===t&&h?.type===a;return{connectingFrom:g?.nodeId===w&&g?.id===t&&g?.type===a,connectingTo:j,clickConnecting:c?.nodeId===w&&c?.id===t&&c?.type===a,isPossibleEndHandle:d===e.Strict?g?.type!==a:w!==g?.nodeId||t!==g?.id,connectionInProcess:!!g,clickConnectionInProcess:!!c,valid:j&&i}},cP);w||v.getState().onError?.("010",by.error010());let H=a=>{let{defaultEdgeOptions:b,onConnect:c,hasDefaultEdges:d}=v.getState(),e={...b,...a};if(d){let{edges:a,setEdges:b}=v.getState();b(ci(e,a))}c?.(e),i?.(e)},I=a=>{if(!w)return;let b="clientX"in a.nativeEvent;if(f&&(b&&0===a.button||!b)){let b=v.getState();cH.onPointerDown(a.nativeEvent,{handleDomNode:a.currentTarget,autoPanOnConnect:b.autoPanOnConnect,connectionMode:b.connectionMode,connectionRadius:b.connectionRadius,domNode:b.domNode,nodeLookup:b.nodeLookup,lib:b.lib,isTarget:u,handleId:t,nodeId:w,flowId:b.rfId,panBy:b.panBy,cancelConnection:b.cancelConnection,onConnectStart:b.onConnectStart,onConnectEnd:b.onConnectEnd,updateConnection:b.updateConnection,onConnect:H,isValidConnection:c||b.isValidConnection,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,autoPanSpeed:b.autoPanSpeed,dragThreshold:b.connectionDragThreshold})}b?o?.(a):q?.(a)};return(0,m.jsx)("div",{"data-handleid":t,"data-nodeid":w,"data-handlepos":b,"data-id":`${z}-${w}-${t}-${a}`,className:p(["react-flow__handle",`react-flow__handle-${b}`,"nodrag",y,l,{source:!u,target:u,connectable:d,connectablestart:f,connectableend:g,clickconnecting:C,connectingfrom:A,connectingto:B,valid:G,connectionindicator:d&&(!E||D)&&(E||F?g:f)}]),onMouseDown:I,onTouchStart:I,onClick:x?b=>{let{onClickConnectStart:d,onClickConnectEnd:e,connectionClickStartHandle:g,connectionMode:h,isValidConnection:i,lib:j,rfId:k,nodeLookup:l,connection:m}=v.getState();if(!w||!g&&!f)return;if(!g){d?.(b.nativeEvent,{nodeId:w,handleId:t,handleType:a}),v.setState({connectionClickStartHandle:{nodeId:w,type:a,id:t}});return}let n=b9(b.target),o=c||i,{connection:p,isValid:q}=cH.isValid(b.nativeEvent,{handle:{nodeId:w,id:t,type:a},connectionMode:h,fromNodeId:g.nodeId,fromHandleId:g.id||null,fromType:g.type,isValidConnection:o,flowId:k,doc:n,lib:j,nodeLookup:l});q&&p&&H(p);let r=structuredClone(m);delete r.inProgress,r.toPosition=r.toHandle?r.toHandle.position:null,e?.(b,r),v.setState({connectionClickStartHandle:null})}:void 0,ref:s,...r,children:k})})),dL={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},dM={input:function({data:a,isConnectable:b,sourcePosition:c=j.Bottom}){return(0,m.jsxs)(m.Fragment,{children:[a?.label,(0,m.jsx)(dK,{type:"source",position:c,isConnectable:b})]})},default:function({data:a,isConnectable:b,targetPosition:c=j.Top,sourcePosition:d=j.Bottom}){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(dK,{type:"target",position:c,isConnectable:b}),a?.label,(0,m.jsx)(dK,{type:"source",position:d,isConnectable:b})]})},output:function({data:a,isConnectable:b,targetPosition:c=j.Top}){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(dK,{type:"target",position:c,isConnectable:b}),a?.label]})},group:function(){return null}},dN=a=>{let{width:b,height:c,x:d,y:e}=bI(a.nodeLookup,{filter:a=>!!a.selected});return{width:bY(b)?b:null,height:bY(c)?c:null,userSelectionActive:a.userSelectionActive,transformString:`translate(${a.transform[0]}px,${a.transform[1]}px) scale(${a.transform[2]}) translate(${d}px,${e}px)`}};function dO({onSelectionContextMenu:a,noPanClassName:b,disableKeyboardA11y:c}){let d=cU(),{width:e,height:f,transformString:g,userSelectionActive:h}=cT(dN,cP),i=dG(),j=(0,n.useRef)(null);if(dF({nodeRef:j}),h||!e||!f)return null;let k=a?b=>{a(b,d.getState().nodes.filter(a=>a.selected))}:void 0;return(0,m.jsx)("div",{className:p(["react-flow__nodesselection","react-flow__container",b]),style:{transform:g},children:(0,m.jsx)("div",{ref:j,className:"react-flow__nodesselection-rect",onContextMenu:k,tabIndex:c?void 0:-1,onKeyDown:c?void 0:a=>{Object.prototype.hasOwnProperty.call(dL,a.key)&&(a.preventDefault(),i({direction:dL[a.key],factor:a.shiftKey?4:1}))},style:{width:e,height:f}})})}let dP=void 0,dQ=a=>({nodesSelectionActive:a.nodesSelectionActive,userSelectionActive:a.userSelectionActive});function dR({children:a,onPaneClick:b,onPaneMouseEnter:c,onPaneMouseMove:d,onPaneMouseLeave:e,onPaneContextMenu:f,onPaneScroll:g,paneClickDistance:h,deleteKeyCode:i,selectionKeyCode:j,selectionOnDrag:k,selectionMode:l,onSelectionStart:n,onSelectionEnd:o,multiSelectionKeyCode:p,panActivationKeyCode:q,zoomActivationKeyCode:r,elementsSelectable:s,zoomOnScroll:t,zoomOnPinch:u,panOnScroll:v,panOnScrollSpeed:w,panOnScrollMode:x,zoomOnDoubleClick:y,panOnDrag:z,defaultViewport:A,translateExtent:B,minZoom:C,maxZoom:D,preventScrolling:E,onSelectionContextMenu:F,noWheelClassName:G,noPanClassName:H,disableKeyboardA11y:I,onViewportChange:J,isControlledViewport:K}){let{nodesSelectionActive:L,userSelectionActive:M}=cT(dQ),N=dg(j,{target:dP}),O=dg(q,{target:dP}),P=O||z,Q=O||v,R=k&&!0!==P,S=N||M||R;return!function({deleteKeyCode:a,multiSelectionKeyCode:b}){cU();let{deleteElements:c}=du();dg(a,{actInsideInputWithModifier:!1}),dg(b,{target:dv})}({deleteKeyCode:i,multiSelectionKeyCode:p}),(0,m.jsx)(dy,{onPaneContextMenu:f,elementsSelectable:s,zoomOnScroll:t,zoomOnPinch:u,panOnScroll:Q,panOnScrollSpeed:w,panOnScrollMode:x,zoomOnDoubleClick:y,panOnDrag:!N&&P,defaultViewport:A,translateExtent:B,minZoom:C,maxZoom:D,zoomActivationKeyCode:r,preventScrolling:E,noWheelClassName:G,noPanClassName:H,onViewportChange:J,isControlledViewport:K,paneClickDistance:h,children:(0,m.jsxs)(dD,{onSelectionStart:n,onSelectionEnd:o,onPaneClick:b,onPaneMouseEnter:c,onPaneMouseMove:d,onPaneMouseLeave:e,onPaneContextMenu:f,onPaneScroll:g,panOnDrag:P,isSelecting:!!S,selectionMode:l,selectionKeyPressed:N,selectionOnDrag:R,children:[a,L&&(0,m.jsx)(dO,{onSelectionContextMenu:F,noPanClassName:H,disableKeyboardA11y:I})]})})}dR.displayName="FlowRenderer";let dS=(0,n.memo)(dR),dT=a=>a.updateNodeInternals;function dU({id:a,onClick:b,onMouseEnter:c,onMouseMove:d,onMouseLeave:e,onContextMenu:f,onDoubleClick:g,nodesDraggable:h,elementsSelectable:i,nodesConnectable:j,nodesFocusable:k,resizeObserver:l,noDragClassName:o,noPanClassName:q,disableKeyboardA11y:r,rfId:s,nodeTypes:t,nodeClickDistance:u,onError:v}){let{node:w,internals:x,isParent:y}=cT(b=>{let c=b.nodeLookup.get(a),d=b.parentLookup.has(a);return{node:c,internals:c.internals,isParent:d}},cP),z=w.type||"default",A=t?.[z]||dM[z];void 0===A&&(v?.("003",by.error003(z)),z="default",A=t?.default||dM.default);let B=!!(w.draggable||h&&void 0===w.draggable),C=!!(w.selectable||i&&void 0===w.selectable),D=!!(w.connectable||j&&void 0===w.connectable),E=!!(w.focusable||k&&void 0===w.focusable),F=cU(),G=b6(w),H=function({node:a,nodeType:b,hasDimensions:c,resizeObserver:d}){cU();let e=(0,n.useRef)(null);return(0,n.useRef)(null),(0,n.useRef)(a.sourcePosition),(0,n.useRef)(a.targetPosition),(0,n.useRef)(b),c&&a.internals.handleBounds,e}({node:w,nodeType:z,hasDimensions:G,resizeObserver:l}),I=dF({nodeRef:H,disabled:w.hidden||!B,noDragClassName:o,handleSelector:w.dragHandle,nodeId:a,isSelectable:C,nodeClickDistance:u}),J=dG();if(w.hidden)return null;let K=b5(w),L=void 0===w.internals.handleBounds?{width:w.width??w.initialWidth??w.style?.width,height:w.height??w.initialHeight??w.style?.height}:{width:w.width??w.style?.width,height:w.height??w.style?.height},M=C||B||b||c||d||e,N=c?a=>c(a,{...x.userNode}):void 0,O=d?a=>d(a,{...x.userNode}):void 0,P=e?a=>e(a,{...x.userNode}):void 0,Q=f?a=>f(a,{...x.userNode}):void 0,R=g?a=>g(a,{...x.userNode}):void 0;return(0,m.jsx)("div",{className:p(["react-flow__node",`react-flow__node-${z}`,{[q]:B},w.className,{selected:w.selected,selectable:C,parent:y,draggable:B,dragging:I}]),ref:H,style:{zIndex:x.z,transform:`translate(${x.positionAbsolute.x}px,${x.positionAbsolute.y}px)`,pointerEvents:M?"all":"none",visibility:G?"visible":"hidden",...w.style,...L},"data-id":a,"data-testid":`rf__node-${a}`,onMouseEnter:N,onMouseMove:O,onMouseLeave:P,onContextMenu:Q,onClick:c=>{let{selectNodesOnDrag:d,nodeDragThreshold:e}=F.getState();C&&(!d||!B||e>0)&&dE({id:a,store:F,nodeRef:H}),b&&b(c,{...x.userNode})},onDoubleClick:R,onKeyDown:E?b=>{if(!function(a){let b=a.composedPath?.()?.[0]||a.target;return b?.nodeType===1&&(ca.includes(b.nodeName)||b.hasAttribute("contenteditable")||!!b.closest(".nokey"))}(b.nativeEvent)&&!r){if(bA.includes(b.key)&&C)dE({id:a,store:F,unselect:"Escape"===b.key,nodeRef:H});else if(B&&w.selected&&Object.prototype.hasOwnProperty.call(dL,b.key)){b.preventDefault();let{ariaLabelConfig:a}=F.getState();F.setState({ariaLiveMessage:a["node.a11yDescription.ariaLiveMessage"]({direction:b.key.replace("Arrow","").toLowerCase(),x:~~x.positionAbsolute.x,y:~~x.positionAbsolute.y})}),J({direction:dL[b.key],factor:b.shiftKey?4:1})}}}:void 0,tabIndex:E?0:void 0,onFocus:E?()=>{if(r||!H.current?.matches(":focus-visible"))return;let{transform:b,width:c,height:d,autoPanOnNodeFocus:e,setCenter:f}=F.getState();e&&(bJ(new Map([[a,w]]),{x:0,y:0,width:c,height:d},b,!0).length>0||f(w.position.x+K.width/2,w.position.y+K.height/2,{zoom:b[2]}))}:void 0,role:w.ariaRole??(E?"group":void 0),"aria-roledescription":"node","aria-describedby":r?void 0:`${cX}-${s}`,"aria-label":w.ariaLabel,...w.domAttributes,children:(0,m.jsx)(dI,{value:a,children:(0,m.jsx)(A,{id:a,data:w.data,type:z,positionAbsoluteX:x.positionAbsolute.x,positionAbsoluteY:x.positionAbsolute.y,selected:w.selected??!1,selectable:C,draggable:B,deletable:w.deletable??!0,isConnectable:D,sourcePosition:w.sourcePosition,targetPosition:w.targetPosition,dragging:I,dragHandle:w.dragHandle,zIndex:x.z,parentId:w.parentId,...K})})})}let dV=a=>({nodesDraggable:a.nodesDraggable,nodesConnectable:a.nodesConnectable,nodesFocusable:a.nodesFocusable,elementsSelectable:a.elementsSelectable,onError:a.onError});function dW(a){var b;let{nodesDraggable:c,nodesConnectable:d,nodesFocusable:e,elementsSelectable:f,onError:g}=cT(dV,cP),h=(b=a.onlyRenderVisibleElements,cT((0,n.useCallback)(a=>b?bJ(a.nodeLookup,{x:0,y:0,width:a.width,height:a.height},a.transform,!0).map(a=>a.id):Array.from(a.nodeLookup.keys()),[b]),cP)),i=function(){let a=cT(dT),[b]=(0,n.useState)(()=>"undefined"==typeof ResizeObserver?null:new ResizeObserver(b=>{let c=new Map;b.forEach(a=>{let b=a.target.getAttribute("data-id");c.set(b,{id:b,nodeElement:a.target,force:!0})}),a(c)}));return b}();return(0,m.jsx)("div",{className:"react-flow__nodes",style:dw,children:h.map(b=>(0,m.jsx)(dU,{id:b,nodeTypes:a.nodeTypes,nodeExtent:a.nodeExtent,onClick:a.onNodeClick,onMouseEnter:a.onNodeMouseEnter,onMouseMove:a.onNodeMouseMove,onMouseLeave:a.onNodeMouseLeave,onContextMenu:a.onNodeContextMenu,onDoubleClick:a.onNodeDoubleClick,noDragClassName:a.noDragClassName,noPanClassName:a.noPanClassName,rfId:a.rfId,disableKeyboardA11y:a.disableKeyboardA11y,resizeObserver:i,nodesDraggable:c,nodesConnectable:d,nodesFocusable:e,elementsSelectable:f,nodeClickDistance:a.nodeClickDistance,onError:g},b))})}dW.displayName="NodeRenderer";let dX=(0,n.memo)(dW),dY={[i.Arrow]:({color:a="none",strokeWidth:b=1})=>{let c={strokeWidth:b,...a&&{stroke:a}};return(0,m.jsx)("polyline",{className:"arrow",style:c,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},[i.ArrowClosed]:({color:a="none",strokeWidth:b=1})=>{let c={strokeWidth:b,...a&&{stroke:a,fill:a}};return(0,m.jsx)("polyline",{className:"arrowclosed",style:c,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})}},dZ=({id:a,type:b,color:c,width:d=12.5,height:e=12.5,markerUnits:f="strokeWidth",strokeWidth:g,orient:h="auto-start-reverse"})=>{let i=function(a){let b=cU();return(0,n.useMemo)(()=>Object.prototype.hasOwnProperty.call(dY,a)?dY[a]:(b.getState().onError?.("009",by.error009(a)),null),[a])}(b);return i?(0,m.jsx)("marker",{className:"react-flow__arrowhead",id:a,markerWidth:`${d}`,markerHeight:`${e}`,viewBox:"-10 -10 20 20",markerUnits:f,orient:h,refX:"0",refY:"0",children:(0,m.jsx)(i,{color:c,strokeWidth:g})}):null},d$=({defaultColor:a,rfId:b})=>{let c=cT(a=>a.edges),d=cT(a=>a.defaultEdgeOptions),e=(0,n.useMemo)(()=>(function(a,{id:b,defaultColor:c,defaultMarkerStart:d,defaultMarkerEnd:e}){let f=new Set;return a.reduce((a,g)=>([g.markerStart||d,g.markerEnd||e].forEach(d=>{if(d&&"object"==typeof d){let e=cs(d,b);f.has(e)||(a.push({id:e,color:d.color||c,...d}),f.add(e))}}),a),[]).sort((a,b)=>a.id.localeCompare(b.id))})(c,{id:b,defaultColor:a,defaultMarkerStart:d?.markerStart,defaultMarkerEnd:d?.markerEnd}),[c,d,b,a]);return e.length?(0,m.jsx)("svg",{className:"react-flow__marker","aria-hidden":"true",children:(0,m.jsx)("defs",{children:e.map(a=>(0,m.jsx)(dZ,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id))})}):null};d$.displayName="MarkerDefinitions";var d_=(0,n.memo)(d$);function d0({x:a,y:b,label:c,labelStyle:d,labelShowBg:e=!0,labelBgStyle:f,labelBgPadding:g=[2,4],labelBgBorderRadius:h=2,children:i,className:j,...k}){let[l,o]=(0,n.useState)({x:1,y:0,width:0,height:0}),q=p(["react-flow__edge-textwrapper",j]),r=(0,n.useRef)(null);return c?(0,m.jsxs)("g",{transform:`translate(${a-l.width/2} ${b-l.height/2})`,className:q,visibility:l.width?"visible":"hidden",...k,children:[e&&(0,m.jsx)("rect",{width:l.width+2*g[0],x:-g[0],y:-g[1],height:l.height+2*g[1],className:"react-flow__edge-textbg",style:f,rx:h,ry:h}),(0,m.jsx)("text",{className:"react-flow__edge-text",y:l.height/2,dy:"0.3em",ref:r,style:d,children:c}),i]}):null}d0.displayName="EdgeText";let d1=(0,n.memo)(d0);function d2({path:a,labelX:b,labelY:c,label:d,labelStyle:e,labelShowBg:f,labelBgStyle:g,labelBgPadding:h,labelBgBorderRadius:i,interactionWidth:j=20,...k}){return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("path",{...k,d:a,fill:"none",className:p(["react-flow__edge-path",k.className])}),j?(0,m.jsx)("path",{d:a,fill:"none",strokeOpacity:0,strokeWidth:j,className:"react-flow__edge-interaction"}):null,d&&bY(b)&&bY(c)?(0,m.jsx)(d1,{x:b,y:c,label:d,labelStyle:e,labelShowBg:f,labelBgStyle:g,labelBgPadding:h,labelBgBorderRadius:i}):null]})}function d3({pos:a,x1:b,y1:c,x2:d,y2:e}){return a===j.Left||a===j.Right?[.5*(b+d),c]:[b,.5*(c+e)]}function d4({sourceX:a,sourceY:b,sourcePosition:c=j.Bottom,targetX:d,targetY:e,targetPosition:f=j.Top}){let[g,h]=d3({pos:c,x1:a,y1:b,x2:d,y2:e}),[i,k]=d3({pos:f,x1:d,y1:e,x2:a,y2:b}),[l,m,n,o]=cd({sourceX:a,sourceY:b,targetX:d,targetY:e,sourceControlX:g,sourceControlY:h,targetControlX:i,targetControlY:k});return[`M${a},${b} C${g},${h} ${i},${k} ${d},${e}`,l,m,n,o]}function d5(a){return(0,n.memo)(({id:b,sourceX:c,sourceY:d,targetX:e,targetY:f,sourcePosition:g,targetPosition:h,label:i,labelStyle:j,labelShowBg:k,labelBgStyle:l,labelBgPadding:n,labelBgBorderRadius:o,style:p,markerEnd:q,markerStart:r,interactionWidth:s})=>{let[t,u,v]=d4({sourceX:c,sourceY:d,sourcePosition:g,targetX:e,targetY:f,targetPosition:h}),w=a.isInternal?void 0:b;return(0,m.jsx)(d2,{id:w,path:t,labelX:u,labelY:v,label:i,labelStyle:j,labelShowBg:k,labelBgStyle:l,labelBgPadding:n,labelBgBorderRadius:o,style:p,markerEnd:q,markerStart:r,interactionWidth:s})})}let d6=d5({isInternal:!1}),d7=d5({isInternal:!0});function d8(a){return(0,n.memo)(({id:b,sourceX:c,sourceY:d,targetX:e,targetY:f,label:g,labelStyle:h,labelShowBg:i,labelBgStyle:k,labelBgPadding:l,labelBgBorderRadius:n,style:o,sourcePosition:p=j.Bottom,targetPosition:q=j.Top,markerEnd:r,markerStart:s,pathOptions:t,interactionWidth:u})=>{let[v,w,x]=cn({sourceX:c,sourceY:d,sourcePosition:p,targetX:e,targetY:f,targetPosition:q,borderRadius:t?.borderRadius,offset:t?.offset,stepPosition:t?.stepPosition}),y=a.isInternal?void 0:b;return(0,m.jsx)(d2,{id:y,path:v,labelX:w,labelY:x,label:g,labelStyle:h,labelShowBg:i,labelBgStyle:k,labelBgPadding:l,labelBgBorderRadius:n,style:o,markerEnd:r,markerStart:s,interactionWidth:u})})}d6.displayName="SimpleBezierEdge",d7.displayName="SimpleBezierEdgeInternal";let d9=d8({isInternal:!1}),ea=d8({isInternal:!0});function eb(a){return(0,n.memo)(({id:b,...c})=>{let d=a.isInternal?void 0:b;return(0,m.jsx)(d9,{...c,id:d,pathOptions:(0,n.useMemo)(()=>({borderRadius:0,offset:c.pathOptions?.offset}),[c.pathOptions?.offset])})})}d9.displayName="SmoothStepEdge",ea.displayName="SmoothStepEdgeInternal";let ec=eb({isInternal:!1}),ed=eb({isInternal:!0});function ee(a){return(0,n.memo)(({id:b,sourceX:c,sourceY:d,targetX:e,targetY:f,label:g,labelStyle:h,labelShowBg:i,labelBgStyle:j,labelBgPadding:k,labelBgBorderRadius:l,style:n,markerEnd:o,markerStart:p,interactionWidth:q})=>{let[r,s,t]=cj({sourceX:c,sourceY:d,targetX:e,targetY:f}),u=a.isInternal?void 0:b;return(0,m.jsx)(d2,{id:u,path:r,labelX:s,labelY:t,label:g,labelStyle:h,labelShowBg:i,labelBgStyle:j,labelBgPadding:k,labelBgBorderRadius:l,style:n,markerEnd:o,markerStart:p,interactionWidth:q})})}ec.displayName="StepEdge",ed.displayName="StepEdgeInternal";let ef=ee({isInternal:!1}),eg=ee({isInternal:!0});function eh(a){return(0,n.memo)(({id:b,sourceX:c,sourceY:d,targetX:e,targetY:f,sourcePosition:g=j.Bottom,targetPosition:h=j.Top,label:i,labelStyle:k,labelShowBg:l,labelBgStyle:n,labelBgPadding:o,labelBgBorderRadius:p,style:q,markerEnd:r,markerStart:s,pathOptions:t,interactionWidth:u})=>{let[v,w,x]=cg({sourceX:c,sourceY:d,sourcePosition:g,targetX:e,targetY:f,targetPosition:h,curvature:t?.curvature}),y=a.isInternal?void 0:b;return(0,m.jsx)(d2,{id:y,path:v,labelX:w,labelY:x,label:i,labelStyle:k,labelShowBg:l,labelBgStyle:n,labelBgPadding:o,labelBgBorderRadius:p,style:q,markerEnd:r,markerStart:s,interactionWidth:u})})}ef.displayName="StraightEdge",eg.displayName="StraightEdgeInternal";let ei=eh({isInternal:!1}),ej=eh({isInternal:!0});ei.displayName="BezierEdge",ej.displayName="BezierEdgeInternal";let ek={default:ej,straight:eg,step:ed,smoothstep:ea,simplebezier:d7},el={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},em="react-flow__edgeupdater";function en({position:a,centerX:b,centerY:c,radius:d=10,onMouseDown:e,onMouseEnter:f,onMouseOut:g,type:h}){return(0,m.jsx)("circle",{onMouseDown:e,onMouseEnter:f,onMouseOut:g,className:p([em,`${em}-${h}`]),cx:a===j.Left?b-d:a===j.Right?b+d:b,cy:a===j.Top?c-d:a===j.Bottom?c+d:c,r:d,stroke:"transparent",fill:"transparent"})}function eo({isReconnectable:a,reconnectRadius:b,edge:c,sourceX:d,sourceY:e,targetX:f,targetY:g,sourcePosition:h,targetPosition:i,onReconnect:j,onReconnectStart:k,onReconnectEnd:l,setReconnecting:n,setUpdateHover:o}){let p=cU(),q=(a,b)=>{if(0!==a.button)return;let{autoPanOnConnect:d,domNode:e,isValidConnection:f,connectionMode:g,connectionRadius:h,lib:i,onConnectStart:m,onConnectEnd:o,cancelConnection:q,nodeLookup:r,rfId:s,panBy:t,updateConnection:u}=p.getState(),v="target"===b.type;cH.onPointerDown(a.nativeEvent,{autoPanOnConnect:d,connectionMode:g,connectionRadius:h,domNode:e,handleId:b.id,nodeId:b.nodeId,nodeLookup:r,isTarget:v,edgeUpdaterType:b.type,lib:i,flowId:s,cancelConnection:q,panBy:t,isValidConnection:f,onConnect:a=>j?.(c,a),onConnectStart:(d,e)=>{n(!0),k?.(a,c,b.type),m?.(d,e)},onConnectEnd:o,onReconnectEnd:(a,d)=>{n(!1),l?.(a,c,b.type,d)},updateConnection:u,getTransform:()=>p.getState().transform,getFromHandle:()=>p.getState().connection.fromHandle,dragThreshold:p.getState().connectionDragThreshold,handleDomNode:a.currentTarget})},r=()=>o(!0),s=()=>o(!1);return(0,m.jsxs)(m.Fragment,{children:[(!0===a||"source"===a)&&(0,m.jsx)(en,{position:h,centerX:d,centerY:e,radius:b,onMouseDown:a=>q(a,{nodeId:c.target,id:c.targetHandle??null,type:"target"}),onMouseEnter:r,onMouseOut:s,type:"source"}),(!0===a||"target"===a)&&(0,m.jsx)(en,{position:i,centerX:f,centerY:g,radius:b,onMouseDown:a=>q(a,{nodeId:c.source,id:c.sourceHandle??null,type:"source"}),onMouseEnter:r,onMouseOut:s,type:"target"})]})}function ep({id:a,edgesFocusable:b,edgesReconnectable:c,elementsSelectable:d,onClick:f,onDoubleClick:g,onContextMenu:h,onMouseEnter:i,onMouseMove:k,onMouseLeave:l,reconnectRadius:o,onReconnect:q,onReconnectStart:r,onReconnectEnd:s,rfId:t,edgeTypes:u,noPanClassName:v,onError:w,disableKeyboardA11y:x}){let y=cT(b=>b.edgeLookup.get(a)),z=cT(a=>a.defaultEdgeOptions),A=(y=z?{...z,...y}:y).type||"default",B=u?.[A]||ek[A];void 0===B&&(w?.("011",by.error011(A)),A="default",B=u?.default||ek.default);let C=!!(y.focusable||b&&void 0===y.focusable),D=void 0!==q&&(y.reconnectable||c&&void 0===y.reconnectable),E=!!(y.selectable||d&&void 0===y.selectable),F=(0,n.useRef)(null),[G,H]=(0,n.useState)(!1),[I,J]=(0,n.useState)(!1),K=cU(),{zIndex:L,sourceX:M,sourceY:N,targetX:O,targetY:P,sourcePosition:Q,targetPosition:R}=cT((0,n.useCallback)(b=>{let c=b.nodeLookup.get(y.source),d=b.nodeLookup.get(y.target);if(!c||!d)return{zIndex:y.zIndex,...el};let f=function(a){let{sourceNode:b,targetNode:c}=a;if(!co(b)||!co(c))return null;let d=b.internals.handleBounds||cp(b.handles),f=c.internals.handleBounds||cp(c.handles),g=cr(d?.source??[],a.sourceHandle),h=cr(a.connectionMode===e.Strict?f?.target??[]:(f?.target??[]).concat(f?.source??[]),a.targetHandle);if(!g||!h)return a.onError?.("008",by.error008(!g?"source":"target",{id:a.id,sourceHandle:a.sourceHandle,targetHandle:a.targetHandle})),null;let i=g?.position||j.Bottom,k=h?.position||j.Top,l=cq(b,g,i),m=cq(c,h,k);return{sourceX:l.x,sourceY:l.y,targetX:m.x,targetY:m.y,sourcePosition:i,targetPosition:k}}({id:a,sourceNode:c,targetNode:d,sourceHandle:y.sourceHandle||null,targetHandle:y.targetHandle||null,connectionMode:b.connectionMode,onError:w});return{zIndex:function({sourceNode:a,targetNode:b,selected:c=!1,zIndex:d,elevateOnSelect:e=!1}){if(void 0!==d)return d;let f=Math.max(a.parentId||e&&a.selected?a.internals.z:0,b.parentId||e&&b.selected?b.internals.z:0);return(e&&c?1e3:0)+f}({selected:y.selected,zIndex:y.zIndex,sourceNode:c,targetNode:d,elevateOnSelect:b.elevateEdgesOnSelect}),...f||el}},[y.source,y.target,y.sourceHandle,y.targetHandle,y.selected,y.zIndex]),cP),S=(0,n.useMemo)(()=>y.markerStart?`url('#${cs(y.markerStart,t)}')`:void 0,[y.markerStart,t]),T=(0,n.useMemo)(()=>y.markerEnd?`url('#${cs(y.markerEnd,t)}')`:void 0,[y.markerEnd,t]);if(y.hidden||null===M||null===N||null===O||null===P)return null;let U=g?a=>{g(a,{...y})}:void 0,V=h?a=>{h(a,{...y})}:void 0,W=i?a=>{i(a,{...y})}:void 0,X=k?a=>{k(a,{...y})}:void 0,Y=l?a=>{l(a,{...y})}:void 0;return(0,m.jsx)("svg",{style:{zIndex:L},children:(0,m.jsxs)("g",{className:p(["react-flow__edge",`react-flow__edge-${A}`,y.className,v,{selected:y.selected,animated:y.animated,inactive:!E&&!f,updating:G,selectable:E}]),onClick:b=>{let{addSelectedEdges:c,unselectNodesAndEdges:d,multiSelectionActive:e}=K.getState();E&&(K.setState({nodesSelectionActive:!1}),y.selected&&e?(d({nodes:[],edges:[y]}),F.current?.blur()):c([a])),f&&f(b,y)},onDoubleClick:U,onContextMenu:V,onMouseEnter:W,onMouseMove:X,onMouseLeave:Y,onKeyDown:C?b=>{if(!x&&bA.includes(b.key)&&E){let{unselectNodesAndEdges:c,addSelectedEdges:d}=K.getState();"Escape"===b.key?(F.current?.blur(),c({edges:[y]})):d([a])}}:void 0,tabIndex:C?0:void 0,role:y.ariaRole??(C?"group":"img"),"aria-roledescription":"edge","data-id":a,"data-testid":`rf__edge-${a}`,"aria-label":null===y.ariaLabel?void 0:y.ariaLabel||`Edge from ${y.source} to ${y.target}`,"aria-describedby":C?`${cY}-${t}`:void 0,ref:F,...y.domAttributes,children:[!I&&(0,m.jsx)(B,{id:a,source:y.source,target:y.target,type:y.type,selected:y.selected,animated:y.animated,selectable:E,deletable:y.deletable??!0,label:y.label,labelStyle:y.labelStyle,labelShowBg:y.labelShowBg,labelBgStyle:y.labelBgStyle,labelBgPadding:y.labelBgPadding,labelBgBorderRadius:y.labelBgBorderRadius,sourceX:M,sourceY:N,targetX:O,targetY:P,sourcePosition:Q,targetPosition:R,data:y.data,style:y.style,sourceHandleId:y.sourceHandle,targetHandleId:y.targetHandle,markerStart:S,markerEnd:T,pathOptions:"pathOptions"in y?y.pathOptions:void 0,interactionWidth:y.interactionWidth}),D&&(0,m.jsx)(eo,{edge:y,isReconnectable:D,reconnectRadius:o,onReconnect:q,onReconnectStart:r,onReconnectEnd:s,sourceX:M,sourceY:N,targetX:O,targetY:P,sourcePosition:Q,targetPosition:R,setUpdateHover:H,setReconnecting:J})]})})}let eq=a=>({edgesFocusable:a.edgesFocusable,edgesReconnectable:a.edgesReconnectable,elementsSelectable:a.elementsSelectable,connectionMode:a.connectionMode,onError:a.onError});function er({defaultMarkerColor:a,onlyRenderVisibleElements:b,rfId:c,edgeTypes:d,noPanClassName:e,onReconnect:f,onEdgeContextMenu:g,onEdgeMouseEnter:h,onEdgeMouseMove:i,onEdgeMouseLeave:j,onEdgeClick:k,reconnectRadius:l,onEdgeDoubleClick:o,onReconnectStart:p,onReconnectEnd:q,disableKeyboardA11y:r}){let{edgesFocusable:s,edgesReconnectable:t,elementsSelectable:u,onError:v}=cT(eq,cP),w=cT((0,n.useCallback)(a=>{if(!b)return a.edges.map(a=>a.id);let c=[];if(a.width&&a.height)for(let b of a.edges){let d=a.nodeLookup.get(b.source),e=a.nodeLookup.get(b.target);d&&e&&function({sourceNode:a,targetNode:b,width:c,height:d,transform:e}){let f=bQ(bU(a),bU(b));return f.x===f.x2&&(f.x2+=1),f.y===f.y2&&(f.y2+=1),bW({x:-e[0]/e[2],y:-e[1]/e[2],width:c/e[2],height:d/e[2]},bS(f))>0}({sourceNode:d,targetNode:e,width:a.width,height:a.height,transform:a.transform})&&c.push(b.id)}return c},[b]),cP);return(0,m.jsxs)("div",{className:"react-flow__edges",children:[(0,m.jsx)(d_,{defaultColor:a,rfId:c}),w.map(a=>(0,m.jsx)(ep,{id:a,edgesFocusable:s,edgesReconnectable:t,elementsSelectable:u,noPanClassName:e,onReconnect:f,onContextMenu:g,onMouseEnter:h,onMouseMove:i,onMouseLeave:j,onClick:k,reconnectRadius:l,onDoubleClick:o,onReconnectStart:p,onReconnectEnd:q,rfId:c,onError:v,edgeTypes:d,disableKeyboardA11y:r},a))]})}er.displayName="EdgeRenderer";let es=(0,n.memo)(er),et=a=>`translate(${a.transform[0]}px,${a.transform[1]}px) scale(${a.transform[2]})`;function eu({children:a}){let b=cT(et);return(0,m.jsx)("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:b},children:a})}let ev=a=>a.panZoom?.syncViewport;function ew(a){return a.connection.inProgress?{...a.connection,to:b_(a.connection.to,a.transform)}:{...a.connection}}let ex=a=>({nodesConnectable:a.nodesConnectable,isValid:a.connection.isValid,inProgress:a.connection.inProgress,width:a.width,height:a.height});function ey({containerStyle:a,style:b,type:c,component:d}){let{nodesConnectable:e,width:f,height:g,isValid:h,inProgress:i}=cT(ex,cP);return f&&e&&i?(0,m.jsx)("svg",{style:a,width:f,height:g,className:"react-flow__connectionline react-flow__container",children:(0,m.jsx)("g",{className:p(["react-flow__connection",bE(h)]),children:(0,m.jsx)(ez,{style:b,type:c,CustomComponent:d,isValid:h})})}):null}let ez=({style:a,type:b=h.Bezier,CustomComponent:c,isValid:d})=>{let{inProgress:e,from:f,fromNode:g,fromHandle:i,fromPosition:j,to:k,toNode:l,toHandle:n,toPosition:o}=function(a){return cT(ew,cP)}();if(!e)return;if(c)return(0,m.jsx)(c,{connectionLineType:b,connectionLineStyle:a,fromNode:g,fromHandle:i,fromX:f.x,fromY:f.y,toX:k.x,toY:k.y,fromPosition:j,toPosition:o,connectionStatus:bE(d),toNode:l,toHandle:n});let p="",q={sourceX:f.x,sourceY:f.y,sourcePosition:j,targetX:k.x,targetY:k.y,targetPosition:o};switch(b){case h.Bezier:[p]=cg(q);break;case h.SimpleBezier:[p]=d4(q);break;case h.Step:[p]=cn({...q,borderRadius:0});break;case h.SmoothStep:[p]=cn(q);break;default:[p]=cj(q)}return(0,m.jsx)("path",{d:p,fill:"none",className:"react-flow__connection-path",style:a})};ez.displayName="ConnectionLine";let eA={};function eB(a=eA){(0,n.useRef)(a),cU()}function eC({nodeTypes:a,edgeTypes:b,onInit:c,onNodeClick:d,onEdgeClick:e,onNodeDoubleClick:f,onEdgeDoubleClick:g,onNodeMouseEnter:h,onNodeMouseMove:i,onNodeMouseLeave:j,onNodeContextMenu:k,onSelectionContextMenu:l,onSelectionStart:o,onSelectionEnd:p,connectionLineType:q,connectionLineStyle:r,connectionLineComponent:s,connectionLineContainerStyle:t,selectionKeyCode:u,selectionOnDrag:v,selectionMode:w,multiSelectionKeyCode:x,panActivationKeyCode:y,zoomActivationKeyCode:z,deleteKeyCode:A,onlyRenderVisibleElements:B,elementsSelectable:C,defaultViewport:D,translateExtent:E,minZoom:F,maxZoom:G,preventScrolling:H,defaultMarkerColor:I,zoomOnScroll:J,zoomOnPinch:K,panOnScroll:L,panOnScrollSpeed:M,panOnScrollMode:N,zoomOnDoubleClick:O,panOnDrag:P,onPaneClick:Q,onPaneMouseEnter:R,onPaneMouseMove:S,onPaneMouseLeave:T,onPaneScroll:U,onPaneContextMenu:V,paneClickDistance:W,nodeClickDistance:X,onEdgeContextMenu:Y,onEdgeMouseEnter:Z,onEdgeMouseMove:$,onEdgeMouseLeave:_,reconnectRadius:aa,onReconnect:ab,onReconnectStart:ac,onReconnectEnd:ad,noDragClassName:ae,noWheelClassName:af,noPanClassName:ag,disableKeyboardA11y:ah,nodeExtent:ai,rfId:aj,viewport:ak,onViewportChange:al}){return eB(a),eB(b),cU(),(0,n.useRef)(!1),du(),(0,n.useRef)(!1),cT(ev),cU(),(0,m.jsx)(dS,{onPaneClick:Q,onPaneMouseEnter:R,onPaneMouseMove:S,onPaneMouseLeave:T,onPaneContextMenu:V,onPaneScroll:U,paneClickDistance:W,deleteKeyCode:A,selectionKeyCode:u,selectionOnDrag:v,selectionMode:w,onSelectionStart:o,onSelectionEnd:p,multiSelectionKeyCode:x,panActivationKeyCode:y,zoomActivationKeyCode:z,elementsSelectable:C,zoomOnScroll:J,zoomOnPinch:K,zoomOnDoubleClick:O,panOnScroll:L,panOnScrollSpeed:M,panOnScrollMode:N,panOnDrag:P,defaultViewport:D,translateExtent:E,minZoom:F,maxZoom:G,onSelectionContextMenu:l,preventScrolling:H,noDragClassName:ae,noWheelClassName:af,noPanClassName:ag,disableKeyboardA11y:ah,onViewportChange:al,isControlledViewport:!!ak,children:(0,m.jsxs)(eu,{children:[(0,m.jsx)(es,{edgeTypes:b,onEdgeClick:e,onEdgeDoubleClick:g,onReconnect:ab,onReconnectStart:ac,onReconnectEnd:ad,onlyRenderVisibleElements:B,onEdgeContextMenu:Y,onEdgeMouseEnter:Z,onEdgeMouseMove:$,onEdgeMouseLeave:_,reconnectRadius:aa,defaultMarkerColor:I,noPanClassName:ag,disableKeyboardA11y:ah,rfId:aj}),(0,m.jsx)(ey,{style:r,type:q,component:s,containerStyle:t}),(0,m.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,m.jsx)(dX,{nodeTypes:a,onNodeClick:d,onNodeDoubleClick:f,onNodeMouseEnter:h,onNodeMouseMove:i,onNodeMouseLeave:j,onNodeContextMenu:k,nodeClickDistance:X,onlyRenderVisibleElements:B,noPanClassName:ag,noDragClassName:ae,disableKeyboardA11y:ah,nodeExtent:ai,rfId:aj}),(0,m.jsx)("div",{className:"react-flow__viewport-portal"})]})})}eC.displayName="GraphView";let eD=(0,n.memo)(eC),eE=({nodes:a,edges:b,defaultNodes:c,defaultEdges:d,width:f,height:g,fitView:h,fitViewOptions:i,minZoom:j=.5,maxZoom:k=2,nodeOrigin:l,nodeExtent:m}={})=>{let n=new Map,o=new Map,p=new Map,q=new Map,r=d??b??[],s=c??a??[],t=l??[0,0],u=m??bz;cC(p,q,r);let v=cw(s,n,o,{nodeOrigin:t,nodeExtent:u,elevateNodesOnSelect:!1}),w=[0,0,1];if(h&&f&&g){let{x:a,y:b,zoom:c}=b2(bI(n,{filter:a=>!!((a.width||a.initialWidth)&&(a.height||a.initialHeight))}),f,g,j,k,i?.padding??.1);w=[a,b,c]}return{rfId:"1",width:f??0,height:g??0,transform:w,nodes:s,nodesInitialized:v,nodeLookup:n,parentLookup:o,edges:r,edgeLookup:q,connectionLookup:p,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:void 0!==c,hasDefaultEdges:void 0!==d,panZoom:null,minZoom:j,maxZoom:k,translateExtent:bz,nodeExtent:u,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:e.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:t,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:h??!1,fitViewOptions:i,fitViewResolver:null,connection:{...bC},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:bZ,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:bB}};function eF({initialNodes:a,initialEdges:b,defaultNodes:c,defaultEdges:d,initialWidth:e,initialHeight:f,initialMinZoom:g,initialMaxZoom:h,initialFitViewOptions:i,fitView:j,nodeOrigin:k,nodeExtent:l,children:o}){let[p]=(0,n.useState)(()=>(({nodes:a,edges:b,defaultNodes:c,defaultEdges:d,width:e,height:f,fitView:g,fitViewOptions:h,minZoom:i,maxZoom:j,nodeOrigin:k,nodeExtent:l})=>{let m,n;return m=(m,n)=>{async function o(){let{nodeLookup:a,panZoom:b,fitViewOptions:c,fitViewResolver:d,width:e,height:f,minZoom:g,maxZoom:h}=n();b&&(await bK({nodes:a,width:e,height:f,panZoom:b,minZoom:g,maxZoom:h},c),d?.resolve(!0),m({fitViewResolver:null}))}return{...eE({nodes:a,edges:b,width:e,height:f,fitView:g,fitViewOptions:h,minZoom:i,maxZoom:j,nodeOrigin:k,nodeExtent:l,defaultNodes:c,defaultEdges:d}),setNodes:a=>{let{nodeLookup:b,parentLookup:c,nodeOrigin:d,elevateNodesOnSelect:e,fitViewQueued:f}=n(),g=cw(a,b,c,{nodeOrigin:d,nodeExtent:l,elevateNodesOnSelect:e,checkEquality:!0});f&&g?(o(),m({nodes:a,nodesInitialized:g,fitViewQueued:!1,fitViewOptions:void 0})):m({nodes:a,nodesInitialized:g})},setEdges:a=>{let{connectionLookup:b,edgeLookup:c}=n();cC(b,c,a),m({edges:a})},setDefaultNodesAndEdges:(a,b)=>{if(a){let{setNodes:b}=n();b(a),m({hasDefaultNodes:!0})}if(b){let{setEdges:a}=n();a(b),m({hasDefaultEdges:!0})}},updateNodeInternals:a=>{let{triggerNodeChanges:b,nodeLookup:c,parentLookup:d,domNode:e,nodeOrigin:f,nodeExtent:g,debug:h,fitViewQueued:i}=n(),{changes:j,updatedInternals:k}=function(a,b,c,d,e,f){let g=d?.querySelector(".xyflow__viewport"),h=!1;if(!g)return{changes:[],updatedInternals:h};let i=[],j=window.getComputedStyle(g),{m22:k}=new window.DOMMatrixReadOnly(j.transform),l=[];for(let d of a.values()){let a=b.get(d.id);if(!a)continue;if(a.hidden){b.set(a.id,{...a,internals:{...a.internals,handleBounds:void 0}}),h=!0;continue}let g=b8(d.nodeElement),j=a.measured.width!==g.width||a.measured.height!==g.height;if(g.width&&g.height&&(j||!a.internals.handleBounds||d.force)){let m=d.nodeElement.getBoundingClientRect(),n=b4(a.extent)?a.extent:f,{positionAbsolute:o}=a.internals;a.parentId&&"parent"===a.extent?o=bO(o,g,b.get(a.parentId)):n&&(o=bN(o,n,g));let p={...a,measured:g,internals:{...a.internals,positionAbsolute:o,handleBounds:{source:cc("source",d.nodeElement,m,k,a.id),target:cc("target",d.nodeElement,m,k,a.id)}}};b.set(a.id,p),a.parentId&&cx(p,b,c,{nodeOrigin:e}),h=!0,j&&(i.push({id:a.id,type:"dimensions",dimensions:g}),a.expandParent&&a.parentId&&l.push({id:a.id,parentId:a.parentId,rect:bT(p,e)}))}}if(l.length>0){let a=cz(l,b,c,e);i.push(...a)}return{changes:i,updatedInternals:h}}(a,c,d,e,f,g);k&&(!function(a,b,c){let d=cv(ct,c);for(let c of a.values())if(c.parentId)cx(c,a,b,d);else{let a=bN(bH(c,d.nodeOrigin),b4(c.extent)?c.extent:d.nodeExtent,b5(c));c.internals.positionAbsolute=a}}(c,d,{nodeOrigin:f,nodeExtent:g}),i?(o(),m({fitViewQueued:!1,fitViewOptions:void 0})):m({}),j?.length>0&&(h&&console.log("React Flow: trigger node changes",j),b?.(j)))},updateNodePositions:(a,b=!1)=>{let c=[],d=[],{nodeLookup:e,triggerNodeChanges:f}=n();for(let[f,g]of a){let a=e.get(f),h=!!(a?.expandParent&&a?.parentId&&g?.position),i={id:f,type:"position",position:h?{x:Math.max(0,g.position.x),y:Math.max(0,g.position.y)}:g.position,dragging:b};h&&a.parentId&&c.push({id:f,parentId:a.parentId,rect:{...g.internals.positionAbsolute,width:g.measured.width??0,height:g.measured.height??0}}),d.push(i)}if(c.length>0){let{parentLookup:a,nodeOrigin:b}=n(),f=cz(c,e,a,b);d.push(...f)}f(d)},triggerNodeChanges:a=>{let{onNodesChange:b,setNodes:c,nodes:d,hasDefaultNodes:e,debug:f}=n();a?.length&&(e&&c(dh(a,d)),f&&console.log("React Flow: trigger node changes",a),b?.(a))},triggerEdgeChanges:a=>{let{onEdgesChange:b,setEdges:c,edges:d,hasDefaultEdges:e,debug:f}=n();a?.length&&(e&&c(dh(a,d)),f&&console.log("React Flow: trigger edge changes",a),b?.(a))},addSelectedNodes:a=>{let{multiSelectionActive:b,edgeLookup:c,nodeLookup:d,triggerNodeChanges:e,triggerEdgeChanges:f}=n();if(b)return void e(a.map(a=>di(a,!0)));e(dj(d,new Set([...a]),!0)),f(dj(c))},addSelectedEdges:a=>{let{multiSelectionActive:b,edgeLookup:c,nodeLookup:d,triggerNodeChanges:e,triggerEdgeChanges:f}=n();if(b)return void f(a.map(a=>di(a,!0)));f(dj(c,new Set([...a]))),e(dj(d,new Set,!0))},unselectNodesAndEdges:({nodes:a,edges:b}={})=>{let{edges:c,nodes:d,nodeLookup:e,triggerNodeChanges:f,triggerEdgeChanges:g}=n(),h=(a||d).map(a=>{let b=e.get(a.id);return b&&(b.selected=!1),di(a.id,!1)}),i=(b||c).map(a=>di(a.id,!1));f(h),g(i)},setMinZoom:a=>{let{panZoom:b,maxZoom:c}=n();b?.setScaleExtent([a,c]),m({minZoom:a})},setMaxZoom:a=>{let{panZoom:b,minZoom:c}=n();b?.setScaleExtent([c,a]),m({maxZoom:a})},setTranslateExtent:a=>{n().panZoom?.setTranslateExtent(a),m({translateExtent:a})},setPaneClickDistance:a=>{n().panZoom?.setClickDistance(a)},resetSelectedElements:()=>{let{edges:a,nodes:b,triggerNodeChanges:c,triggerEdgeChanges:d,elementsSelectable:e}=n();if(!e)return;let f=b.reduce((a,b)=>b.selected?[...a,di(b.id,!1)]:a,[]),g=a.reduce((a,b)=>b.selected?[...a,di(b.id,!1)]:a,[]);c(f),d(g)},setNodeExtent:a=>{let{nodes:b,nodeLookup:c,parentLookup:d,nodeOrigin:e,elevateNodesOnSelect:f,nodeExtent:g}=n();(a[0][0]!==g[0][0]||a[0][1]!==g[0][1]||a[1][0]!==g[1][0]||a[1][1]!==g[1][1])&&(cw(b,c,d,{nodeOrigin:e,nodeExtent:a,elevateNodesOnSelect:f,checkEquality:!1}),m({nodeExtent:a}))},panBy:a=>{let{transform:b,width:c,height:d,panZoom:e,translateExtent:f}=n();return cA({delta:a,panZoom:e,transform:b,translateExtent:f,width:c,height:d})},setCenter:async(a,b,c)=>{let{width:d,height:e,maxZoom:f,panZoom:g}=n();if(!g)return Promise.resolve(!1);let h=void 0!==c?.zoom?c.zoom:f;return await g.setViewport({x:d/2-a*h,y:e/2-b*h,zoom:h},{duration:c?.duration,ease:c?.ease,interpolate:c?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{m({connection:{...bC}})},updateConnection:a=>{m({connection:a})},reset:()=>m({...eE()})}},n=Object.is,m?cO(m,n):cO})({nodes:a,edges:b,defaultNodes:c,defaultEdges:d,width:e,height:f,fitView:j,minZoom:g,maxZoom:h,fitViewOptions:i,nodeOrigin:k,nodeExtent:l}));return(0,m.jsx)(cR,{value:p,children:(0,m.jsx)(ds,{children:o})})}function eG({children:a,nodes:b,edges:c,defaultNodes:d,defaultEdges:e,width:f,height:g,fitView:h,fitViewOptions:i,minZoom:j,maxZoom:k,nodeOrigin:l,nodeExtent:o}){return(0,n.useContext)(cQ)?(0,m.jsx)(m.Fragment,{children:a}):(0,m.jsx)(eF,{initialNodes:b,initialEdges:c,defaultNodes:d,defaultEdges:e,initialWidth:f,initialHeight:g,fitView:h,initialFitViewOptions:i,initialMinZoom:j,initialMaxZoom:k,nodeOrigin:l,nodeExtent:o,children:a})}let eH={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};var eI=dn(function({nodes:a,edges:b,defaultNodes:c,defaultEdges:d,className:e,nodeTypes:i,edgeTypes:j,onNodeClick:k,onEdgeClick:l,onInit:o,onMove:q,onMoveStart:r,onMoveEnd:s,onConnect:t,onConnectStart:u,onConnectEnd:v,onClickConnectStart:w,onClickConnectEnd:x,onNodeMouseEnter:y,onNodeMouseMove:z,onNodeMouseLeave:A,onNodeContextMenu:B,onNodeDoubleClick:C,onNodeDragStart:D,onNodeDrag:E,onNodeDragStop:F,onNodesDelete:G,onEdgesDelete:H,onDelete:I,onSelectionChange:J,onSelectionDragStart:K,onSelectionDrag:L,onSelectionDragStop:M,onSelectionContextMenu:N,onSelectionStart:O,onSelectionEnd:P,onBeforeDelete:Q,connectionMode:R,connectionLineType:S=h.Bezier,connectionLineStyle:T,connectionLineComponent:U,connectionLineContainerStyle:V,deleteKeyCode:W="Backspace",selectionKeyCode:X="Shift",selectionOnDrag:Y=!1,selectionMode:Z=g.Full,panActivationKeyCode:$="Space",multiSelectionKeyCode:_=b3()?"Meta":"Control",zoomActivationKeyCode:aa=b3()?"Meta":"Control",snapToGrid:ab,snapGrid:ac,onlyRenderVisibleElements:ad=!1,selectNodesOnDrag:ae,nodesDraggable:af,autoPanOnNodeFocus:ag,nodesConnectable:ah,nodesFocusable:ai,nodeOrigin:aj=c9,edgesFocusable:ak,edgesReconnectable:al,elementsSelectable:am=!0,defaultViewport:an=da,minZoom:ao=.5,maxZoom:ap=2,translateExtent:aq=bz,preventScrolling:ar=!0,nodeExtent:as,defaultMarkerColor:at="#b1b1b7",zoomOnScroll:au=!0,zoomOnPinch:av=!0,panOnScroll:aw=!1,panOnScrollSpeed:ax=.5,panOnScrollMode:ay=f.Free,zoomOnDoubleClick:az=!0,panOnDrag:aA=!0,onPaneClick:aB,onPaneMouseEnter:aC,onPaneMouseMove:aD,onPaneMouseLeave:aE,onPaneScroll:aF,onPaneContextMenu:aG,paneClickDistance:aH=0,nodeClickDistance:aI=0,children:aJ,onReconnect:aK,onReconnectStart:aL,onReconnectEnd:aM,onEdgeContextMenu:aN,onEdgeDoubleClick:aO,onEdgeMouseEnter:aP,onEdgeMouseMove:aQ,onEdgeMouseLeave:aR,reconnectRadius:aS=10,onNodesChange:aT,onEdgesChange:aU,noDragClassName:aV="nodrag",noWheelClassName:aW="nowheel",noPanClassName:aX="nopan",fitView:aY,fitViewOptions:aZ,connectOnClick:a$,attributionPosition:a_,proOptions:a0,defaultEdgeOptions:a1,elevateNodesOnSelect:a2,elevateEdgesOnSelect:a3,disableKeyboardA11y:a4=!1,autoPanOnConnect:a5,autoPanOnNodeDrag:a6,autoPanSpeed:a7,connectionRadius:a8,isValidConnection:a9,onError:ba,style:bb,id:bc,nodeDragThreshold:bd,connectionDragThreshold:be,viewport:bf,onViewportChange:bg,width:bh,height:bi,colorMode:bj="light",debug:bk,onScroll:bl,ariaLabelConfig:bm,...bn},bo){let bp=bc||"1",bq=function(a){let[b,c]=(0,n.useState)("system"===a?null:a);return null!==b?b:"light"}(bj),br=(0,n.useCallback)(a=>{a.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),bl?.(a)},[bl]);return(0,m.jsx)("div",{"data-testid":"rf__wrapper",...bn,onScroll:br,style:{...bb,...eH},ref:bo,className:p(["react-flow",e,bq]),id:bc,role:"application",children:(0,m.jsxs)(eG,{nodes:a,edges:b,width:bh,height:bi,fitView:aY,fitViewOptions:aZ,minZoom:ao,maxZoom:ap,nodeOrigin:aj,nodeExtent:as,children:[(0,m.jsx)(eD,{onInit:o,onNodeClick:k,onEdgeClick:l,onNodeMouseEnter:y,onNodeMouseMove:z,onNodeMouseLeave:A,onNodeContextMenu:B,onNodeDoubleClick:C,nodeTypes:i,edgeTypes:j,connectionLineType:S,connectionLineStyle:T,connectionLineComponent:U,connectionLineContainerStyle:V,selectionKeyCode:X,selectionOnDrag:Y,selectionMode:Z,deleteKeyCode:W,multiSelectionKeyCode:_,panActivationKeyCode:$,zoomActivationKeyCode:aa,onlyRenderVisibleElements:ad,defaultViewport:an,translateExtent:aq,minZoom:ao,maxZoom:ap,preventScrolling:ar,zoomOnScroll:au,zoomOnPinch:av,zoomOnDoubleClick:az,panOnScroll:aw,panOnScrollSpeed:ax,panOnScrollMode:ay,panOnDrag:aA,onPaneClick:aB,onPaneMouseEnter:aC,onPaneMouseMove:aD,onPaneMouseLeave:aE,onPaneScroll:aF,onPaneContextMenu:aG,paneClickDistance:aH,nodeClickDistance:aI,onSelectionContextMenu:N,onSelectionStart:O,onSelectionEnd:P,onReconnect:aK,onReconnectStart:aL,onReconnectEnd:aM,onEdgeContextMenu:aN,onEdgeDoubleClick:aO,onEdgeMouseEnter:aP,onEdgeMouseMove:aQ,onEdgeMouseLeave:aR,reconnectRadius:aS,defaultMarkerColor:at,noDragClassName:aV,noWheelClassName:aW,noPanClassName:aX,rfId:bp,disableKeyboardA11y:a4,nodeExtent:as,viewport:bf,onViewportChange:bg}),(0,m.jsx)(de,{nodes:a,edges:b,defaultNodes:c,defaultEdges:d,onConnect:t,onConnectStart:u,onConnectEnd:v,onClickConnectStart:w,onClickConnectEnd:x,nodesDraggable:af,autoPanOnNodeFocus:ag,nodesConnectable:ah,nodesFocusable:ai,edgesFocusable:ak,edgesReconnectable:al,elementsSelectable:am,elevateNodesOnSelect:a2,elevateEdgesOnSelect:a3,minZoom:ao,maxZoom:ap,nodeExtent:as,onNodesChange:aT,onEdgesChange:aU,snapToGrid:ab,snapGrid:ac,connectionMode:R,translateExtent:aq,connectOnClick:a$,defaultEdgeOptions:a1,fitView:aY,fitViewOptions:aZ,onNodesDelete:G,onEdgesDelete:H,onDelete:I,onNodeDragStart:D,onNodeDrag:E,onNodeDragStop:F,onSelectionDrag:L,onSelectionDragStart:K,onSelectionDragStop:M,onMove:q,onMoveStart:r,onMoveEnd:s,noPanClassName:aX,nodeOrigin:aj,rfId:bp,autoPanOnConnect:a5,autoPanOnNodeDrag:a6,autoPanSpeed:a7,onError:ba,connectionRadius:a8,isValidConnection:a9,selectNodesOnDrag:ae,nodeDragThreshold:bd,connectionDragThreshold:be,onBeforeDelete:Q,paneClickDistance:aH,debug:bk,ariaLabelConfig:bm}),(0,m.jsx)(c8,{onSelectionChange:J}),aJ,(0,m.jsx)(c2,{proOptions:a0,position:a_}),(0,m.jsx)(c0,{rfId:bp,disableKeyboardA11y:a4})]})})});function eJ({dimensions:a,lineWidth:b,variant:c,className:d}){return(0,m.jsx)("path",{strokeWidth:b,d:`M${a[0]/2} 0 V${a[1]} M0 ${a[1]/2} H${a[0]}`,className:p(["react-flow__background-pattern",c,d])})}function eK({radius:a,className:b}){return(0,m.jsx)("circle",{cx:a,cy:a,r:a,className:p(["react-flow__background-pattern","dots",b])})}by.error014(),function(a){a.Lines="lines",a.Dots="dots",a.Cross="cross"}(l||(l={}));let eL={[l.Dots]:1,[l.Lines]:1,[l.Cross]:6},eM=a=>({transform:a.transform,patternId:`pattern-${a.rfId}`});function eN({id:a,variant:b=l.Dots,gap:c=20,size:d,lineWidth:e=1,offset:f=0,color:g,bgColor:h,style:i,className:j,patternClassName:k}){let o=(0,n.useRef)(null),{transform:q,patternId:r}=cT(eM,cP),s=d||eL[b],t=b===l.Dots,u=b===l.Cross,v=Array.isArray(c)?c:[c,c],w=[v[0]*q[2]||1,v[1]*q[2]||1],x=s*q[2],y=Array.isArray(f)?f:[f,f],z=u?[x,x]:w,A=[y[0]*q[2]||1+z[0]/2,y[1]*q[2]||1+z[1]/2],B=`${r}${a||""}`;return(0,m.jsxs)("svg",{className:p(["react-flow__background",j]),style:{...i,...dw,"--xy-background-color-props":h,"--xy-background-pattern-color-props":g},ref:o,"data-testid":"rf__background",children:[(0,m.jsx)("pattern",{id:B,x:q[0]%w[0],y:q[1]%w[1],width:w[0],height:w[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${A[0]},-${A[1]})`,children:t?(0,m.jsx)(eK,{radius:x/2,className:k}):(0,m.jsx)(eJ,{dimensions:z,lineWidth:e,variant:b,className:k})}),(0,m.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${B})`})]})}eN.displayName="Background";let eO=(0,n.memo)(eN);function eP(){return(0,m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,m.jsx)("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function eQ(){return(0,m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:(0,m.jsx)("path",{d:"M0 0h32v4.2H0z"})})}function eR(){return(0,m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:(0,m.jsx)("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function eS(){return(0,m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,m.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function eT(){return(0,m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:(0,m.jsx)("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function eU({children:a,className:b,...c}){return(0,m.jsx)("button",{type:"button",className:p(["react-flow__controls-button",b]),...c,children:a})}let eV=a=>({isInteractive:a.nodesDraggable||a.nodesConnectable||a.elementsSelectable,minZoomReached:a.transform[2]<=a.minZoom,maxZoomReached:a.transform[2]>=a.maxZoom,ariaLabelConfig:a.ariaLabelConfig});function eW({style:a,showZoom:b=!0,showFitView:c=!0,showInteractive:d=!0,fitViewOptions:e,onZoomIn:f,onZoomOut:g,onFitView:h,onInteractiveChange:i,className:j,children:k,position:l="bottom-left",orientation:n="vertical","aria-label":o}){let q=cU(),{isInteractive:r,minZoomReached:s,maxZoomReached:t,ariaLabelConfig:u}=cT(eV,cP),{zoomIn:v,zoomOut:w,fitView:x}=du();return(0,m.jsxs)(c1,{className:p(["react-flow__controls","horizontal"===n?"horizontal":"vertical",j]),position:l,style:a,"data-testid":"rf__controls","aria-label":o??u["controls.ariaLabel"],children:[b&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(eU,{onClick:()=>{v(),f?.()},className:"react-flow__controls-zoomin",title:u["controls.zoomIn.ariaLabel"],"aria-label":u["controls.zoomIn.ariaLabel"],disabled:t,children:(0,m.jsx)(eP,{})}),(0,m.jsx)(eU,{onClick:()=>{w(),g?.()},className:"react-flow__controls-zoomout",title:u["controls.zoomOut.ariaLabel"],"aria-label":u["controls.zoomOut.ariaLabel"],disabled:s,children:(0,m.jsx)(eQ,{})})]}),c&&(0,m.jsx)(eU,{className:"react-flow__controls-fitview",onClick:()=>{x(e),h?.()},title:u["controls.fitView.ariaLabel"],"aria-label":u["controls.fitView.ariaLabel"],children:(0,m.jsx)(eR,{})}),d&&(0,m.jsx)(eU,{className:"react-flow__controls-interactive",onClick:()=>{q.setState({nodesDraggable:!r,nodesConnectable:!r,elementsSelectable:!r}),i?.(!r)},title:u["controls.interactive.ariaLabel"],"aria-label":u["controls.interactive.ariaLabel"],children:r?(0,m.jsx)(eT,{}):(0,m.jsx)(eS,{})}),k]})}eW.displayName="Controls";let eX=(0,n.memo)(eW),eY=(0,n.memo)(function({id:a,x:b,y:c,width:d,height:e,style:f,color:g,strokeColor:h,strokeWidth:i,className:j,borderRadius:k,shapeRendering:l,selected:n,onClick:o}){let{background:q,backgroundColor:r}=f||{};return(0,m.jsx)("rect",{className:p(["react-flow__minimap-node",{selected:n},j]),x:b,y:c,rx:k,ry:k,width:d,height:e,style:{fill:g||q||r,stroke:h,strokeWidth:i},shapeRendering:l,onClick:o?b=>o(b,a):void 0})}),eZ=a=>a.nodes.map(a=>a.id),e$=a=>a instanceof Function?a:()=>a,e_=(0,n.memo)(function({id:a,nodeColorFunc:b,nodeStrokeColorFunc:c,nodeClassNameFunc:d,nodeBorderRadius:e,nodeStrokeWidth:f,shapeRendering:g,NodeComponent:h,onClick:i}){let{node:j,x:k,y:l,width:n,height:o}=cT(b=>{let{internals:c}=b.nodeLookup.get(a),d=c.userNode,{x:e,y:f}=c.positionAbsolute,{width:g,height:h}=b5(d);return{node:d,x:e,y:f,width:g,height:h}},cP);return j&&!j.hidden&&b6(j)?(0,m.jsx)(h,{x:k,y:l,width:n,height:o,style:j.style,selected:!!j.selected,className:d(j),color:b(j),borderRadius:e,strokeColor:c(j),strokeWidth:f,shapeRendering:g,onClick:i,id:j.id}):null});var e0=(0,n.memo)(function({nodeStrokeColor:a,nodeColor:b,nodeClassName:c="",nodeBorderRadius:d=5,nodeStrokeWidth:e,nodeComponent:f=eY,onClick:g}){let h=cT(eZ,cP),i=e$(b),j=e$(a),k=e$(c);return(0,m.jsx)(m.Fragment,{children:h.map(a=>(0,m.jsx)(e_,{id:a,nodeColorFunc:i,nodeStrokeColorFunc:j,nodeClassNameFunc:k,nodeBorderRadius:d,nodeStrokeWidth:e,NodeComponent:f,onClick:g,shapeRendering:"crispEdges"},a))})});let e1=a=>!a.hidden,e2=a=>{let b={x:-a.transform[0]/a.transform[2],y:-a.transform[1]/a.transform[2],width:a.width/a.transform[2],height:a.height/a.transform[2]};return{viewBB:b,boundingRect:a.nodeLookup.size>0?bV(bI(a.nodeLookup,{filter:e1}),b):b,rfId:a.rfId,panZoom:a.panZoom,translateExtent:a.translateExtent,flowWidth:a.width,flowHeight:a.height,ariaLabelConfig:a.ariaLabelConfig}};function e3({style:a,className:b,nodeStrokeColor:c,nodeColor:d,nodeClassName:e="",nodeBorderRadius:f=5,nodeStrokeWidth:g,nodeComponent:h,bgColor:i,maskColor:j,maskStrokeColor:k,maskStrokeWidth:l,position:o="bottom-right",onClick:q,onNodeClick:r,pannable:s=!1,zoomable:t=!1,ariaLabel:u,inversePan:v,zoomStep:w=1,offsetScale:x=5}){let y=cU(),z=(0,n.useRef)(null),{boundingRect:A,viewBB:B,rfId:C,panZoom:D,translateExtent:E,flowWidth:F,flowHeight:G,ariaLabelConfig:H}=cT(e2,cP),I=a?.width??200,J=a?.height??150,K=Math.max(A.width/I,A.height/J),L=K*I,M=K*J,N=x*K,O=A.x-(L-A.width)/2-N,P=A.y-(M-A.height)/2-N,Q=L+2*N,R=M+2*N,S=`react-flow__minimap-desc-${C}`,T=(0,n.useRef)(0),U=(0,n.useRef)();T.current=K;let V=q?a=>{let[b,c]=U.current?.pointer(a)||[0,0];q(a,{x:b,y:c})}:void 0,W=r?(0,n.useCallback)((a,b)=>{r(a,y.getState().nodeLookup.get(b).internals.userNode)},[]):void 0,X=u??H["minimap.ariaLabel"];return(0,m.jsx)(c1,{position:o,style:{...a,"--xy-minimap-background-color-props":"string"==typeof i?i:void 0,"--xy-minimap-mask-background-color-props":"string"==typeof j?j:void 0,"--xy-minimap-mask-stroke-color-props":"string"==typeof k?k:void 0,"--xy-minimap-mask-stroke-width-props":"number"==typeof l?l*K:void 0,"--xy-minimap-node-background-color-props":"string"==typeof d?d:void 0,"--xy-minimap-node-stroke-color-props":"string"==typeof c?c:void 0,"--xy-minimap-node-stroke-width-props":"number"==typeof g?g:void 0},className:p(["react-flow__minimap",b]),"data-testid":"rf__minimap",children:(0,m.jsxs)("svg",{width:I,height:J,viewBox:`${O} ${P} ${Q} ${R}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":S,ref:z,onClick:V,children:[X&&(0,m.jsx)("title",{id:S,children:X}),(0,m.jsx)(e0,{onClick:W,nodeColor:d,nodeStrokeColor:c,nodeBorderRadius:f,nodeClassName:e,nodeStrokeWidth:g,nodeComponent:h}),(0,m.jsx)("path",{className:"react-flow__minimap-mask",d:`M${O-N},${P-N}h${Q+2*N}v${R+2*N}h${-Q-2*N}z
        M${B.x},${B.y}h${B.width}v${B.height}h${-B.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}e3.displayName="MiniMap";let e4=(0,n.memo)(e3);k.Line,k.Handle,c(71763);let e5=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a))},g=b=a(d,e,f);return f},e6=a=>{let b=(a=>a?e5(a):e5)(a),c=a=>(function(a,b=a=>a){let c=n.useSyncExternalStore(a.subscribe,n.useCallback(()=>b(a.getState()),[a,b]),n.useCallback(()=>b(a.getInitialState()),[a,b]));return n.useDebugValue(c),c})(b,a);return Object.assign(c,b),c},e7=[{id:"1",type:"input",data:{label:"Input Node"},position:{x:250,y:25}},{id:"2",data:{label:"Default Node"},position:{x:100,y:125}},{id:"3",type:"output",data:{label:"Output Node"},position:{x:250,y:250}}],e8=[{id:"e1-2",source:"1",target:"2"},{id:"e2-3",source:"2",target:"3"}],e9=(a=>a?e6(a):e6)((a,b)=>({nodes:e7,edges:e8,selectedNodes:[],selectedEdges:[],setNodes:b=>a({nodes:b}),onNodesChange:c=>{a({nodes:dh(c,b().nodes)})},addNode:c=>{a({nodes:[...b().nodes,c]})},updateNode:(c,d)=>{a({nodes:b().nodes.map(a=>a.id===c?{...a,...d}:a)})},deleteNode:c=>{let{nodes:d,edges:e}=b();a({nodes:d.filter(a=>a.id!==c),edges:e.filter(a=>a.source!==c&&a.target!==c)})},setEdges:b=>a({edges:b}),onEdgesChange:c=>{a({edges:dh(c,b().edges)})},onConnect:c=>{a({edges:ci(c,b().edges)})},addEdgeConnection:c=>{a({edges:[...b().edges,c]})},deleteEdge:c=>{a({edges:b().edges.filter(a=>a.id!==c)})},setSelectedNodes:b=>a({selectedNodes:b}),setSelectedEdges:b=>a({selectedEdges:b}),clearFlow:()=>{a({nodes:[],edges:[],selectedNodes:[],selectedEdges:[]})},resetFlow:()=>{a({nodes:e7,edges:e8,selectedNodes:[],selectedEdges:[]})}})),fa=()=>e9(a=>a.nodes),fb=()=>e9(a=>a.edges),fc={},fd={},fe={x:0,y:0,zoom:1},ff=()=>{let{data:a}=(0,o.useSession)(),[b,c]=(0,n.useState)(!1),[d,e]=(0,n.useState)(""),f=fa(),g=fb(),h=e9(a=>a.onNodesChange),i=e9(a=>a.onEdgesChange),j=e9(a=>a.onConnect),k=e9(a=>a.addNode),p=e9(a=>a.clearFlow),q=e9(a=>a.resetFlow),r=(0,n.useCallback)(()=>{k({id:`node-${Date.now()}`,type:"default",data:{label:`New Node ${f.length+1}`},position:{x:400*Math.random(),y:400*Math.random()}})},[k,f.length]),s=(0,n.useCallback)(a=>{h(a)},[h]),t=(0,n.useCallback)(a=>{i(a)},[i]),u=(0,n.useCallback)(a=>{j(a)},[j]),v=(0,n.useCallback)(async()=>{if(!a?.user)return void e("Please sign in to save flows");c(!0),e("");try{let a=`Flow ${new Date().toLocaleString()}`,b=await fetch("/api/flows",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,content:{nodes:f,edges:g}})});if(!b.ok)throw Error("Failed to save flow");let c=await b.json();e(`✅ Flow saved successfully: ${c.name}`),setTimeout(()=>e(""),3e3)}catch(a){console.error("Error saving flow:",a),e("❌ Failed to save flow"),setTimeout(()=>e(""),3e3)}finally{c(!1)}},[a,f,g]),w=(0,n.useCallback)(async()=>{if(!a?.user)return void e("Please sign in to load flows");c(!0),e("");try{let a=await fetch("/api/flows");if(!a.ok)throw Error("Failed to load flows");let b=await a.json();if(0===b.length){e("No saved flows found"),setTimeout(()=>e(""),3e3);return}let c=b[0],d=c.content;e9.getState().setNodes(d.nodes||[]),e9.getState().setEdges(d.edges||[]),e(`✅ Loaded flow: ${c.name}`),setTimeout(()=>e(""),3e3)}catch(a){console.error("Error loading flows:",a),e("❌ Failed to load flows"),setTimeout(()=>e(""),3e3)}finally{c(!1)}},[a]);return(0,m.jsx)("div",{style:{width:"100%",height:"100vh"},children:(0,m.jsxs)(eI,{nodes:f,edges:g,onNodesChange:s,onEdgesChange:t,onConnect:u,nodeTypes:fc,edgeTypes:fd,defaultViewport:fe,minZoom:.2,maxZoom:4,attributionPosition:"bottom-left",children:[(0,m.jsx)(eO,{variant:l.Dots,gap:20,size:1}),(0,m.jsx)(eX,{}),(0,m.jsx)(e4,{zoomable:!0,pannable:!0,nodeStrokeWidth:3,nodeColor:a=>{switch(a.type){case"input":return"#00ff00";case"output":return"#ff0000";default:return"#1a192b"}}}),(0,m.jsx)(c1,{position:"top-left",children:(0,m.jsx)("div",{style:{background:"white",padding:"12px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",minWidth:"200px"},children:a?.user?(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{style:{fontSize:"12px",color:"#666",marginBottom:"8px"},children:"Signed in as:"}),(0,m.jsx)("div",{style:{fontSize:"14px",fontWeight:"bold",marginBottom:"8px"},children:a.user.name||a.user.email}),(0,m.jsx)("button",{onClick:()=>(0,o.signOut)(),style:{padding:"4px 8px",border:"1px solid #ddd",borderRadius:"4px",background:"#f5f5f5",cursor:"pointer",fontSize:"12px"},children:"Sign Out"})]}):(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{style:{fontSize:"12px",color:"#666",marginBottom:"8px"},children:"Sign in to save your flows"}),(0,m.jsx)("button",{onClick:()=>(0,o.signIn)("github"),style:{padding:"8px 12px",border:"1px solid #333",borderRadius:"4px",background:"#333",color:"white",cursor:"pointer",fontSize:"12px"},children:"Sign in with GitHub"})]})})}),(0,m.jsx)(c1,{position:"top-right",children:(0,m.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",background:"white",padding:"12px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,m.jsx)("h3",{style:{margin:"0 0 8px 0",fontSize:"14px"},children:"Flow Controls"}),(0,m.jsxs)("div",{style:{display:"flex",gap:"4px"},children:[(0,m.jsx)("button",{onClick:v,disabled:!a?.user||b,style:{padding:"6px 12px",border:"1px solid #22c55e",borderRadius:"4px",background:a?.user?"#22c55e":"#e5e5e5",color:a?.user?"white":"#999",cursor:a?.user&&!b?"pointer":"not-allowed",fontSize:"12px",flex:1},children:b?"...":"\uD83D\uDCBE Save"}),(0,m.jsx)("button",{onClick:w,disabled:!a?.user||b,style:{padding:"6px 12px",border:"1px solid #3b82f6",borderRadius:"4px",background:a?.user?"#3b82f6":"#e5e5e5",color:a?.user?"white":"#999",cursor:a?.user&&!b?"pointer":"not-allowed",fontSize:"12px",flex:1},children:b?"...":"\uD83D\uDCC2 Load"})]}),d&&(0,m.jsx)("div",{style:{fontSize:"11px",padding:"4px 8px",borderRadius:"4px",background:d.includes("✅")?"#d1fae5":"#fee2e2",color:d.includes("✅")?"#166534":"#dc2626",textAlign:"center"},children:d}),(0,m.jsx)("button",{onClick:r,style:{padding:"6px 12px",border:"1px solid #ddd",borderRadius:"4px",background:"#fff",cursor:"pointer"},children:"Add Node"}),(0,m.jsx)("button",{onClick:p,style:{padding:"6px 12px",border:"1px solid #ddd",borderRadius:"4px",background:"#fff",cursor:"pointer"},children:"Clear All"}),(0,m.jsx)("button",{onClick:q,style:{padding:"6px 12px",border:"1px solid #ddd",borderRadius:"4px",background:"#fff",cursor:"pointer"},children:"Reset Flow"}),(0,m.jsxs)("div",{style:{fontSize:"12px",color:"#666",marginTop:"8px",padding:"8px",background:"#f9f9f9",borderRadius:"4px"},children:[(0,m.jsxs)("div",{children:["Nodes: ",f.length]}),(0,m.jsxs)("div",{children:["Edges: ",g.length]}),(0,m.jsx)("div",{style:{marginTop:"4px",fontWeight:"bold"},children:"✅ Zustand + Auth"}),(0,m.jsx)("div",{style:{fontSize:"10px",marginTop:"2px"},children:"Persistent flows with authentication"})]})]})})]})})},fg=()=>(0,m.jsx)(eF,{children:(0,m.jsx)(ff,{})}),fh=()=>{let a=fa(),b=fb();return(0,m.jsxs)("div",{style:{width:"100vw",height:"100vh",position:"relative"},children:[(0,m.jsxs)("div",{style:{position:"absolute",top:0,left:0,right:0,zIndex:1e3,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderBottom:"1px solid #e0e0e0",padding:"12px 20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h1",{style:{margin:0,fontSize:"24px",fontWeight:600,color:"#1a192b"},children:"Gemini Flow - React Flow Canvas"}),(0,m.jsx)("p",{style:{margin:"4px 0 0 0",fontSize:"14px",color:"#666"},children:"Powered by Zustand + NextAuth.js for optimal performance & persistence"})]}),(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px",fontSize:"14px"},children:[(0,m.jsxs)("div",{style:{background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"6px",padding:"8px 12px",color:"#0369a1"},children:[(0,m.jsx)("strong",{children:"Performance Mode:"})," Zustand + Next.js"]}),(0,m.jsxs)("div",{style:{background:"#f0fdf4",border:"1px solid #22c55e",borderRadius:"6px",padding:"8px 12px",color:"#166534"},children:["Nodes: ",a.length," | Edges: ",b.length]})]})]}),(0,m.jsx)("div",{style:{paddingTop:"80px",height:"100vh"},children:(0,m.jsx)(fg,{})}),(0,m.jsxs)("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderTop:"1px solid #e0e0e0",padding:"8px 20px",fontSize:"12px",color:"#666",display:"flex",justifyContent:"space-between",alignItems:"center",zIndex:1e3},children:[(0,m.jsxs)("div",{children:["✅ ",(0,m.jsx)("strong",{children:"Architecture:"}),"Next.js + Zustand state management + NextAuth.js authentication"]}),(0,m.jsxs)("div",{children:["\uD83D\uDCCA ",(0,m.jsx)("strong",{children:"Features:"}),"User Authentication • Flow Persistence • Selective re-rendering"]})]})]})};function fi(){return(0,m.jsx)(o.SessionProvider,{children:(0,m.jsx)(fh,{})})}},56068:a=>{a.exports=function(a){if(void 0===a)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return a},a.exports.__esModule=!0,a.exports.default=a.exports},57461:(a,b,c)=>{"use strict";var d,e,f,g,h,i=c(33349),j=c(42555);Object.defineProperty(b,"__esModule",{value:!0});var k={SessionContext:!0,useSession:!0,getSession:!0,getCsrfToken:!0,getProviders:!0,signIn:!0,signOut:!0,SessionProvider:!0};b.SessionContext=void 0,b.SessionProvider=function(a){if(!C)throw Error("React Context is unavailable in Server Components");var b,c,d,e,f,g,h=a.children,i=a.basePath,j=a.refetchInterval,k=a.refetchWhenOffline;i&&(z.basePath=i);var m=void 0!==a.session;z._lastSync=m?(0,s.now)():0;var q=p.useState(function(){return m&&(z._session=a.session),a.session}),r=(0,o.default)(q,2),u=r[0],v=r[1],w=p.useState(!m),x=(0,o.default)(w,2),y=x[0],E=x[1];p.useEffect(function(){return z._getSession=(0,n.default)(l.default.mark(function a(){var b,c,d=arguments;return l.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b=(d.length>0&&void 0!==d[0]?d[0]:{}).event,a.prev=1,!((c="storage"===b)||void 0===z._session)){a.next=10;break}return z._lastSync=(0,s.now)(),a.next=7,D({broadcast:!c});case 7:return z._session=a.sent,v(z._session),a.abrupt("return");case 10:if(!(!b||null===z._session||(0,s.now)()<z._lastSync)){a.next=12;break}return a.abrupt("return");case 12:return z._lastSync=(0,s.now)(),a.next=15,D();case 15:z._session=a.sent,v(z._session),a.next=22;break;case 19:a.prev=19,a.t0=a.catch(1),B.error("CLIENT_SESSION_ERROR",a.t0);case 22:return a.prev=22,E(!1),a.finish(22);case 25:case"end":return a.stop()}},a,null,[[1,19,22,25]])})),z._getSession(),function(){z._lastSync=0,z._session=void 0,z._getSession=function(){}}},[]),p.useEffect(function(){var a=A.receive(function(){return z._getSession({event:"storage"})});return function(){return a()}},[]),p.useEffect(function(){var b=a.refetchOnWindowFocus,c=void 0===b||b,d=function(){c&&"visible"===document.visibilityState&&z._getSession({event:"visibilitychange"})};return document.addEventListener("visibilitychange",d,!1),function(){return document.removeEventListener("visibilitychange",d,!1)}},[a.refetchOnWindowFocus]);var G=(b=p.useState("undefined"!=typeof navigator&&navigator.onLine),d=(c=(0,o.default)(b,2))[0],e=c[1],f=function(){return e(!0)},g=function(){return e(!1)},p.useEffect(function(){return window.addEventListener("online",f),window.addEventListener("offline",g),function(){window.removeEventListener("online",f),window.removeEventListener("offline",g)}},[]),d),H=!1!==k||G;p.useEffect(function(){if(j&&H){var a=setInterval(function(){z._session&&z._getSession({event:"poll"})},1e3*j);return function(){return clearInterval(a)}}},[j,H]);var I=p.useMemo(function(){return{data:u,status:y?"loading":u?"authenticated":"unauthenticated",update:function(a){return(0,n.default)(l.default.mark(function b(){var c;return l.default.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(y||!u)){b.next=2;break}return b.abrupt("return");case 2:return E(!0),b.t0=s.fetchData,b.t1=z,b.t2=B,b.next=8,F();case 8:return b.t3=b.sent,b.t4=a,b.t5={csrfToken:b.t3,data:b.t4},b.t6={body:b.t5},b.t7={req:b.t6},b.next=15,(0,b.t0)("session",b.t1,b.t2,b.t7);case 15:return c=b.sent,E(!1),c&&(v(c),A.post({event:"session",data:{trigger:"getSession"}})),b.abrupt("return",c);case 19:case"end":return b.stop()}},b)}))()}}},[u,y]);return(0,t.jsx)(C.Provider,{value:I,children:h})},b.getCsrfToken=F,b.getProviders=H,b.getSession=D,b.signIn=function(a,b,c){return J.apply(this,arguments)},b.signOut=function(a){return K.apply(this,arguments)},b.useSession=function(a){if(!C)throw Error("React Context is unavailable in Server Components");var b=p.useContext(C),c=null!=a?a:{},d=c.required,e=c.onUnauthenticated,f=d&&"unauthenticated"===b.status;return(p.useEffect(function(){if(f){var a="/api/auth/signin?".concat(new URLSearchParams({error:"SessionRequired",callbackUrl:window.location.href}));e?e():window.location.href=a}},[f,e]),f)?{data:b.data,update:b.update,status:"loading"}:b};var l=i(c(38131)),m=i(c(19292)),n=i(c(82996)),o=i(c(15648)),p=w(c(38301)),q=w(c(97719)),r=i(c(81860)),s=c(37347),t=c(21124),u=c(29412);function v(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(v=function(a){return a?c:b})(a)}function w(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=j(a)&&"function"!=typeof a)return{default:a};var c=v(b);if(c&&c.has(a))return c.get(a);var d={__proto__:null},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in a)if("default"!==f&&({}).hasOwnProperty.call(a,f)){var g=e?Object.getOwnPropertyDescriptor(a,f):null;g&&(g.get||g.set)?Object.defineProperty(d,f,g):d[f]=a[f]}return d.default=a,c&&c.set(a,d),d}function x(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function y(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?x(Object(c),!0).forEach(function(b){(0,m.default)(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):x(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}Object.keys(u).forEach(function(a){!("default"===a||"__esModule"===a||Object.prototype.hasOwnProperty.call(k,a))&&(a in b&&b[a]===u[a]||Object.defineProperty(b,a,{enumerable:!0,get:function(){return u[a]}}))});var z={baseUrl:(0,r.default)(null!=(d=process.env.NEXTAUTH_URL)?d:process.env.VERCEL_URL).origin,basePath:(0,r.default)(process.env.NEXTAUTH_URL).path,baseUrlServer:(0,r.default)(null!=(e=null!=(f=process.env.NEXTAUTH_URL_INTERNAL)?f:process.env.NEXTAUTH_URL)?e:process.env.VERCEL_URL).origin,basePathServer:(0,r.default)(null!=(g=process.env.NEXTAUTH_URL_INTERNAL)?g:process.env.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:function(){}},A=(0,s.BroadcastChannel)(),B=(0,q.proxyLogger)(q.default,z.basePath),C=b.SessionContext=null==(h=p.createContext)?void 0:h.call(p,void 0);function D(a){return E.apply(this,arguments)}function E(){return(E=(0,n.default)(l.default.mark(function a(b){var c,d;return l.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,s.fetchData)("session",z,B,b);case 2:return d=a.sent,(null==(c=null==b?void 0:b.broadcast)||c)&&A.post({event:"session",data:{trigger:"getSession"}}),a.abrupt("return",d);case 5:case"end":return a.stop()}},a)}))).apply(this,arguments)}function F(a){return G.apply(this,arguments)}function G(){return(G=(0,n.default)(l.default.mark(function a(b){var c;return l.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,s.fetchData)("csrf",z,B,b);case 2:return c=a.sent,a.abrupt("return",null==c?void 0:c.csrfToken);case 4:case"end":return a.stop()}},a)}))).apply(this,arguments)}function H(){return I.apply(this,arguments)}function I(){return(I=(0,n.default)(l.default.mark(function a(){return l.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,s.fetchData)("providers",z,B);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a)}))).apply(this,arguments)}function J(){return(J=(0,n.default)(l.default.mark(function a(b,c,d){var e,f,g,h,i,j,k,m,n,o,p,q,r,t,u,v,w;return l.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return g=void 0===(f=(e=null!=c?c:{}).callbackUrl)?window.location.href:f,i=void 0===(h=e.redirect)||h,j=(0,s.apiBaseUrl)(z),a.next=4,H();case 4:if(k=a.sent){a.next=8;break}return window.location.href="".concat(j,"/error"),a.abrupt("return");case 8:if(!(!b||!(b in k))){a.next=11;break}return window.location.href="".concat(j,"/signin?").concat(new URLSearchParams({callbackUrl:g})),a.abrupt("return");case 11:return m="credentials"===k[b].type,n="email"===k[b].type,o=m||n,p="".concat(j,"/").concat(m?"callback":"signin","/").concat(b),q="".concat(p).concat(d?"?".concat(new URLSearchParams(d)):""),a.t0=fetch,a.t1=q,a.t2={"Content-Type":"application/x-www-form-urlencoded"},a.t3=URLSearchParams,a.t4=y,a.t5=y({},c),a.t6={},a.next=25,F();case 25:return a.t7=a.sent,a.t8=g,a.t9={csrfToken:a.t7,callbackUrl:a.t8,json:!0},a.t10=(0,a.t4)(a.t5,a.t6,a.t9),a.t11=new a.t3(a.t10),a.t12={method:"post",headers:a.t2,body:a.t11},a.next=33,(0,a.t0)(a.t1,a.t12);case 33:return r=a.sent,a.next=36,r.json();case 36:if(t=a.sent,!(i||!o)){a.next=42;break}return v=null!=(u=t.url)?u:g,window.location.href=v,v.includes("#")&&window.location.reload(),a.abrupt("return");case 42:if(w=new URL(t.url).searchParams.get("error"),!r.ok){a.next=46;break}return a.next=46,z._getSession({event:"storage"});case 46:return a.abrupt("return",{error:w,status:r.status,ok:r.ok,url:w?null:t.url});case 47:case"end":return a.stop()}},a)}))).apply(this,arguments)}function K(){return(K=(0,n.default)(l.default.mark(function a(b){var c,d,e,f,g,h,i,j,k;return l.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=void 0===(d=(null!=b?b:{}).callbackUrl)?window.location.href:d,f=(0,s.apiBaseUrl)(z),a.t0={"Content-Type":"application/x-www-form-urlencoded"},a.t1=URLSearchParams,a.next=6,F();case 6:return a.t2=a.sent,a.t3=e,a.t4={csrfToken:a.t2,callbackUrl:a.t3,json:!0},a.t5=new a.t1(a.t4),g={method:"post",headers:a.t0,body:a.t5},a.next=13,fetch("".concat(f,"/signout"),g);case 13:return h=a.sent,a.next=16,h.json();case 16:if(i=a.sent,A.post({event:"session",data:{trigger:"signout"}}),!(null==(c=null==b?void 0:b.redirect)||c)){a.next=23;break}return k=null!=(j=i.url)?j:e,window.location.href=k,k.includes("#")&&window.location.reload(),a.abrupt("return");case 23:return a.next=25,z._getSession({event:"storage"});case 25:return a.abrupt("return",i);case 26:case"end":return a.stop()}},a)}))).apply(this,arguments)}},58862:(a,b,c)=>{var d=c(62273),e=c(4197),f=c(42033),g=c(46645);function h(b){var c="function"==typeof Map?new Map:void 0;return a.exports=h=function(a){if(null===a||!f(a))return a;if("function"!=typeof a)throw TypeError("Super expression must either be null or a function");if(void 0!==c){if(c.has(a))return c.get(a);c.set(a,b)}function b(){return g(a,arguments,d(this).constructor)}return b.prototype=Object.create(a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),e(b,a)},a.exports.__esModule=!0,a.exports.default=a.exports,h(b)}a.exports=h,a.exports.__esModule=!0,a.exports.default=a.exports},62273:a=>{function b(c){return a.exports=b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},a.exports.__esModule=!0,a.exports.default=a.exports,b(c)}a.exports=b,a.exports.__esModule=!0,a.exports.default=a.exports},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63636:()=>{},65844:()=>{},69960:(a,b,c)=>{var d=c(21327),e=c(7346),f=c(21228),g=c(82184),h=c(27346),i=c(3378),j=c(48664);function k(){"use strict";var b=e(),c=b.m(k),l=(Object.getPrototypeOf?Object.getPrototypeOf(c):c.__proto__).constructor;function m(a){var b="function"==typeof a&&a.constructor;return!!b&&(b===l||"GeneratorFunction"===(b.displayName||b.name))}var n={throw:1,return:2,break:3,continue:3};function o(a){var b,c;return function(d){b||(b={stop:function(){return c(d.a,2)},catch:function(){return d.v},abrupt:function(a,b){return c(d.a,n[a],b)},delegateYield:function(a,e,f){return b.resultName=e,c(d.d,j(a),f)},finish:function(a){return c(d.f,a)}},c=function(a,c,e){d.p=b.prev,d.n=b.next;try{return a(c,e)}finally{b.next=d.n}}),b.resultName&&(b[b.resultName]=d.v,b.resultName=void 0),b.sent=d.v,b.next=d.n;try{return a.call(this,b)}finally{d.p=b.prev,d.n=b.next}}}return(a.exports=k=function(){return{wrap:function(a,c,d,e){return b.w(o(a),c,d,e&&e.reverse())},isGeneratorFunction:m,mark:b.m,awrap:function(a,b){return new d(a,b)},AsyncIterator:h,async:function(a,b,c,d,e){return(m(b)?g:f)(o(a),b,c,d,e)},keys:i,values:j}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=k,a.exports.__esModule=!0,a.exports.default=a.exports},71763:()=>{},77309:a=>{a.exports=function(a,b){var c=null==a?null:"undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(null!=c){var d,e,f,g,h=[],i=!0,j=!1;try{if(f=(c=c.call(a)).next,0===b){if(Object(c)!==c)return;i=!1}else for(;!(i=(d=f.call(c)).done)&&(h.push(d.value),h.length!==b);i=!0);}catch(a){j=!0,e=a}finally{try{if(!i&&null!=c.return&&(g=c.return(),Object(g)!==g))return}finally{if(j)throw e}}return h}},a.exports.__esModule=!0,a.exports.default=a.exports},79206:(a,b,c)=>{"use strict";var d=c(33349);Object.defineProperty(b,"__esModule",{value:!0}),b.UnsupportedStrategy=b.UnknownError=b.OAuthCallbackError=b.MissingSecret=b.MissingAuthorize=b.MissingAdapterMethods=b.MissingAdapter=b.MissingAPIRoute=b.InvalidCallbackUrl=b.AccountNotLinkedError=void 0,b.adapterErrorHandler=function(a,b){if(a)return Object.keys(a).reduce(function(c,d){return c[d]=(0,f.default)(e.default.mark(function c(){var f,g,h,i,j,k=arguments;return e.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:for(c.prev=0,g=Array(f=k.length),h=0;h<f;h++)g[h]=k[h];return b.debug("adapter_".concat(d),{args:g}),i=a[d],c.next=6,i.apply(void 0,g);case 6:return c.abrupt("return",c.sent);case 9:throw c.prev=9,c.t0=c.catch(0),b.error("adapter_error_".concat(d),c.t0),(j=new o(c.t0)).name="".concat(q(d),"Error"),j;case 15:case"end":return c.stop()}},c,null,[[0,9]])})),c},{})},b.capitalize=q,b.eventsErrorHandler=function(a,b){return Object.keys(a).reduce(function(c,d){return c[d]=(0,f.default)(e.default.mark(function c(){var f,g=arguments;return e.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,f=a[d],c.next=4,f.apply(void 0,g);case 4:return c.abrupt("return",c.sent);case 7:c.prev=7,c.t0=c.catch(0),b.error("".concat(p(d),"_EVENT_ERROR"),c.t0);case 10:case"end":return c.stop()}},c,null,[[0,7]])})),c},{})},b.upperSnake=p;var e=d(c(38131)),f=d(c(82996)),g=d(c(19292)),h=d(c(6246)),i=d(c(88196)),j=d(c(36791)),k=d(c(62273)),l=d(c(23158));function m(a,b,c){return b=(0,k.default)(b),(0,j.default)(a,n()?Reflect.construct(b,c||[],(0,k.default)(a).constructor):b.apply(a,c))}function n(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(a){}return(n=function(){return!!a})()}var o=b.UnknownError=function(a){function b(a){var c,d;return(0,h.default)(this,b),(d=m(this,b,[null!=(c=null==a?void 0:a.message)?c:a])).name="UnknownError",d.code=a.code,a instanceof Error&&(d.stack=a.stack),d}return(0,l.default)(b,a),(0,i.default)(b,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,stack:this.stack}}}])}((0,d(c(58862)).default)(Error));function p(a){return a.replace(/([A-Z])/g,"_$1").toUpperCase()}function q(a){return"".concat(a[0].toUpperCase()).concat(a.slice(1))}b.OAuthCallbackError=function(a){function b(){var a;(0,h.default)(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return a=m(this,b,[].concat(d)),(0,g.default)(a,"name","OAuthCallbackError"),a}return(0,l.default)(b,a),(0,i.default)(b)}(o),b.AccountNotLinkedError=function(a){function b(){var a;(0,h.default)(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return a=m(this,b,[].concat(d)),(0,g.default)(a,"name","AccountNotLinkedError"),a}return(0,l.default)(b,a),(0,i.default)(b)}(o),b.MissingAPIRoute=function(a){function b(){var a;(0,h.default)(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return a=m(this,b,[].concat(d)),(0,g.default)(a,"name","MissingAPIRouteError"),(0,g.default)(a,"code","MISSING_NEXTAUTH_API_ROUTE_ERROR"),a}return(0,l.default)(b,a),(0,i.default)(b)}(o),b.MissingSecret=function(a){function b(){var a;(0,h.default)(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return a=m(this,b,[].concat(d)),(0,g.default)(a,"name","MissingSecretError"),(0,g.default)(a,"code","NO_SECRET"),a}return(0,l.default)(b,a),(0,i.default)(b)}(o),b.MissingAuthorize=function(a){function b(){var a;(0,h.default)(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return a=m(this,b,[].concat(d)),(0,g.default)(a,"name","MissingAuthorizeError"),(0,g.default)(a,"code","CALLBACK_CREDENTIALS_HANDLER_ERROR"),a}return(0,l.default)(b,a),(0,i.default)(b)}(o),b.MissingAdapter=function(a){function b(){var a;(0,h.default)(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return a=m(this,b,[].concat(d)),(0,g.default)(a,"name","MissingAdapterError"),(0,g.default)(a,"code","EMAIL_REQUIRES_ADAPTER_ERROR"),a}return(0,l.default)(b,a),(0,i.default)(b)}(o),b.MissingAdapterMethods=function(a){function b(){var a;(0,h.default)(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return a=m(this,b,[].concat(d)),(0,g.default)(a,"name","MissingAdapterMethodsError"),(0,g.default)(a,"code","MISSING_ADAPTER_METHODS_ERROR"),a}return(0,l.default)(b,a),(0,i.default)(b)}(o),b.UnsupportedStrategy=function(a){function b(){var a;(0,h.default)(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return a=m(this,b,[].concat(d)),(0,g.default)(a,"name","UnsupportedStrategyError"),(0,g.default)(a,"code","CALLBACK_CREDENTIALS_JWT_ERROR"),a}return(0,l.default)(b,a),(0,i.default)(b)}(o),b.InvalidCallbackUrl=function(a){function b(){var a;(0,h.default)(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return a=m(this,b,[].concat(d)),(0,g.default)(a,"name","InvalidCallbackUrl"),(0,g.default)(a,"code","INVALID_CALLBACK_URL_ERROR"),a}return(0,l.default)(b,a),(0,i.default)(b)}(o)},79567:(a,b,c)=>{var d=c(42555).default,e=c(82234);a.exports=function(a){var b=e(a,"string");return"symbol"==d(b)?b:b+""},a.exports.__esModule=!0,a.exports.default=a.exports},80335:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>J,handler:()=>L,pages:()=>I,routeModule:()=>K,tree:()=>H});var d=c(49754),e=c(9117),f=c(46595),g=c(32324),h=c(39326),i=c(38928),j=c(20175),k=c(12),l=c(54290),m=c(12696),n=c(82802),o=c(77533),p=c(45229),q=c(32822),r=c(261),s=c(26453),t=c(52474),u=c(26713),v=c(51356),w=c(62685),x=c(36225),y=c(63446),z=c(2762),A=c(45742),B=c(86439),C=c(81170),D=c.n(C),E=c(62506),F=c(91203),G={};for(let a in E)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(G[a]=()=>E[a]);c.d(b,G);let H=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,17742)),"/home/runner/work/gemini-flow/gemini-flow/frontend/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(c.bind(c,16953)),"/home/runner/work/gemini-flow/gemini-flow/frontend/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,81170,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,87028,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,90461,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,32768,23)),"next/dist/client/components/builtin/unauthorized.js"]}],I=["/home/runner/work/gemini-flow/gemini-flow/frontend/app/page.tsx"],J={require:c,loadChunk:()=>Promise.resolve()},K=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H},distDir:".next",relativeProjectDir:""});async function L(a,b,d){var C;let G="/page";"/index"===G&&(G="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await K.prepare(a,b,{srcPage:G,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(G),{isOnDemandRevalidate:ah}=O,ai=K.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===K.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&K.isDev&&(aB=aa),K.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...E,tree:H,pages:I,GlobalError:D(),handler:L,routeModule:K,__next_app__:J};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:G,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=K.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return K.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:K,page:G,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(33873).join(process.cwd(),K.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>K.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:K.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!K.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===K.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await K.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await K.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),K.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!K.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&F.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw b instanceof B.NoFallbackError||await K.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}},81366:a=>{a.exports=function(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d},a.exports.__esModule=!0,a.exports.default=a.exports},81860:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a){var b;let c=new URL("http://localhost:3000/api/auth");a&&!a.startsWith("http")&&(a=`https://${a}`);let d=new URL(null!=(b=a)?b:c),e=("/"===d.pathname?c.pathname:d.pathname).replace(/\/$/,""),f=`${d.origin}${e}`;return{origin:d.origin,host:d.host,path:e,base:f,toString:()=>f}}},82184:(a,b,c)=>{var d=c(7346),e=c(27346);a.exports=function(a,b,c,f,g){return new e(d().w(a,b,c,f),g||Promise)},a.exports.__esModule=!0,a.exports.default=a.exports},82234:(a,b,c)=>{var d=c(42555).default;a.exports=function(a,b){if("object"!=d(a)||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var e=c.call(a,b||"default");if("object"!=d(e))return e;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)},a.exports.__esModule=!0,a.exports.default=a.exports},82704:()=>{},82996:a=>{function b(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){return void c(a)}h.done?b(i):Promise.resolve(i).then(d,e)}a.exports=function(a){return function(){var c=this,d=arguments;return new Promise(function(e,f){var g=a.apply(c,d);function h(a){b(g,e,f,h,i,"next",a)}function i(a){b(g,e,f,h,i,"throw",a)}h(void 0)})}},a.exports.__esModule=!0,a.exports.default=a.exports},83182:a=>{a.exports=function(a){if(Array.isArray(a))return a},a.exports.__esModule=!0,a.exports.default=a.exports},84919:a=>{a.exports=function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},a.exports.__esModule=!0,a.exports.default=a.exports},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},88196:(a,b,c)=>{var d=c(79567);function e(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(a,d(e.key),e)}}a.exports=function(a,b,c){return b&&e(a.prototype,b),c&&e(a,c),Object.defineProperty(a,"prototype",{writable:!1}),a},a.exports.__esModule=!0,a.exports.default=a.exports},88563:a=>{function b(){try{var c=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(a){}return(a.exports=b=function(){return!!c},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=b,a.exports.__esModule=!0,a.exports.default=a.exports},90269:(a,b,c)=>{Promise.resolve().then(c.bind(c,52737))},93350:(a,b,c)=>{"use strict";a.exports=c(2958)},95005:(a,b,c)=>{Promise.resolve().then(c.bind(c,17742))},97719:(a,b,c)=>{"use strict";var d=c(33349);Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0,b.proxyLogger=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,b=arguments.length>1?arguments[1]:void 0;try{if("undefined"==typeof window)return a;var c={},d=function(a){var d;c[a]=(d=(0,g.default)(e.default.mark(function c(d,g){var h,l;return e.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(k[a](d,g),"error"===a&&(g=j(g)),g.client=!0,h="".concat(b,"/_log"),l=new URLSearchParams(function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?i(Object(c),!0).forEach(function(b){(0,f.default)(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):i(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}({level:a,code:d},g)),!navigator.sendBeacon){c.next=8;break}return c.abrupt("return",navigator.sendBeacon(h,l));case 8:return c.next=10,fetch(h,{method:"POST",body:l,keepalive:!0});case 10:return c.abrupt("return",c.sent);case 11:case"end":return c.stop()}},c)})),function(a,b){return d.apply(this,arguments)})};for(var h in a)d(h);return c}catch(a){return k}},b.setLogger=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=arguments.length>1?arguments[1]:void 0;b||(k.debug=function(){}),a.error&&(k.error=a.error),a.warn&&(k.warn=a.warn),a.debug&&(k.debug=a.debug)};var e=d(c(38131)),f=d(c(19292)),g=d(c(82996)),h=c(79206);function i(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function j(a){var b,c;if(a instanceof Error&&!(a instanceof h.UnknownError))return{message:a.message,stack:a.stack,name:a.name};if(null!=(b=a)&&b.error){a.error=j(a.error),a.message=null!=(c=a.message)?c:a.error.message}return a}var k={error:function(a,b){b=j(b),console.error("[next-auth][error][".concat(a,"]"),"\nhttps://next-auth.js.org/errors#".concat(a.toLowerCase()),b.message,b)},warn:function(a){console.warn("[next-auth][warn][".concat(a,"]"),"\nhttps://next-auth.js.org/warnings#".concat(a.toLowerCase()))},debug:function(a,b){console.log("[next-auth][debug][".concat(a,"]"),b)}};b.default=k},99088:(a,b,c)=>{"use strict";a.exports=c(42797)}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[520,361],()=>b(b.s=80335));module.exports=c})();